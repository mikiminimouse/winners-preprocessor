# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Cloud.RU ML Inference

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –º–æ–¥–µ–ª—è–º ML Inference –≤ Cloud.RU.

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–í–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Cloud.RU:

1. **CLOUD_RU_INFERENCE_URL** - –ø—É–±–ª–∏—á–Ω—ã–π URL endpoint –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
   - –ù–∞–π—Ç–∏: Cloud.RU ‚Üí AI Factory ‚Üí ML Inference ‚Üí Model RUN
   - –ü—Ä–∏–º–µ—Ä: `https://5bf2f0a2-xxxx-xxxx-xxxx-xxxxxxxxxxxx.inference.cloud.ru`

2. **CLOUD_RU_IAM_KEY_ID** - Access Key ID –∏–∑ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
   - –ü–æ–ª—É—á–∏—Ç—å: Cloud.RU ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º (IAM) ‚Üí –°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã ‚Üí –ö–ª—é—á–∏ ‚Üí –°–æ–∑–¥–∞—Ç—å –∫–ª—é—á (HMAC/AccessKey)
   - ‚ö†Ô∏è –≠—Ç–æ –ù–ï ID –º–æ–¥–µ–ª–∏ –∏ –ù–ï URL endpoint!

3. **CLOUD_RU_IAM_SECRET** - Secret Key (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è!)
   - –í—ã–¥–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å KEY_ID –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª—é—á–∞
   - ‚ö†Ô∏è –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ secret –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∂—É—Ç!

4. **CLOUD_RU_INFERENCE_NAME** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–∑–æ–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
   - –ú–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ Cloud.RU ‚Üí ML Inference ‚Üí Model RUN

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
pip install -r requirements_test.txt

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä—É—á–Ω—É—é
pip install requests urllib3 evolution-openai python-dotenv
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `.env.example`):

```bash
cp .env.example .env
```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:

```env
CLOUD_RU_INFERENCE_URL=https://your-endpoint.inference.cloud.ru
CLOUD_RU_IAM_KEY_ID=AKIA...
CLOUD_RU_IAM_SECRET=your-secret-key
CLOUD_RU_INFERENCE_NAME=your-inference-name
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
python test_inference.py
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ —ç–∫—Å–ø–æ—Ä—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export CLOUD_RU_INFERENCE_URL="https://your-endpoint.inference.cloud.ru"
export CLOUD_RU_IAM_KEY_ID="AKIA..."
export CLOUD_RU_IAM_SECRET="your-secret-key"
export CLOUD_RU_INFERENCE_NAME="your-inference-name"

python test_inference.py
```

### –°–ø–æ—Å–æ–± 3: –¢–µ—Å—Ç –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ endpoint –ø—É–±–ª–∏—á–Ω—ã–π)

–ï—Å–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ –±—ã–ª–∞ –≤–∫–ª—é—á–µ–Ω–∞, –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å endpoint:

```bash
export CLOUD_RU_INFERENCE_URL="https://your-endpoint.inference.cloud.ru"
python test_inference.py
```

## üß™ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç 4 —Ç–µ—Å—Ç–∞:

1. **–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ endpoint** (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ endpoint
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (401)
   - –ò–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

2. **–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ SDK**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `evolution_openai`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ IAM –∫–ª—é—á–∏
   - –ü—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å

3. **–¢–µ—Å—Ç –ø—Ä—è–º–æ–≥–æ HTTP –∑–∞–ø—Ä–æ—Å–∞**
   - –ü—Ä—è–º–æ–π HTTP –∑–∞–ø—Ä–æ—Å —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –ø–æ–¥–ø–∏—Å—å –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ SDK

4. **–¢–µ—Å—Ç –≤—ã–∑–æ–≤–∞ –º–æ–¥–µ–ª–∏**
   - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ SDK
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç
   - –ò–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –º–æ–¥–µ–ª–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç:

1. –í—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫–æ–Ω—Å–æ–ª—å
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –≤ JSON —Ñ–∞–π–ª: `inference_test_results_YYYYMMDD_HHMMSS.json`

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
üöÄ –ó–ê–ü–£–°–ö –¢–ï–°–¢–û–í –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ö CLOUD.RU ML INFERENCE
============================================================
üîç –ü–†–û–í–ï–†–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
============================================================
‚úÖ CLOUD_RU_INFERENCE_URL: https://...
‚úÖ CLOUD_RU_IAM_KEY_ID: AKIA...1234
‚úÖ CLOUD_RU_IAM_SECRET: ********************
‚úÖ CLOUD_RU_INFERENCE_NAME: my-inference

üß™ –¢–ï–°–¢ 1: –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å endpoint (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
============================================================
‚úÖ Endpoint –¥–æ—Å—Ç—É–ø–µ–Ω: https://.../health
   –°—Ç–∞—Ç—É—Å: 200
   –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: 0.234s

üß™ –¢–ï–°–¢ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SDK evolution_openai
============================================================
‚úÖ SDK –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
   –î–æ—Å—Ç—É–ø–Ω–æ –º–æ–¥–µ–ª–µ–π: 1
   –ú–æ–¥–µ–ª–∏: my-model

üß™ –¢–ï–°–¢ 3: –ü—Ä—è–º–æ–π HTTP –∑–∞–ø—Ä–æ—Å (—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π)
============================================================
‚ö†Ô∏è  –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   –î–ª—è –ø—Ä—è–º—ã—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω—É–∂–Ω–∞ –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ SDK

üß™ –¢–ï–°–¢ 4: –¢–µ—Å—Ç–æ–≤—ã–π –≤—ã–∑–æ–≤ –º–æ–¥–µ–ª–∏
============================================================
‚úÖ –í—ã–∑–æ–≤ –º–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–µ–Ω
   –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: 1.234s
   –û—Ç–≤–µ—Ç: –ü—Ä–∏–≤–µ—Ç

üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê
============================================================
–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 4
‚úÖ –£—Å–ø–µ—à–Ω–æ: 3
‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 1

üíæ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: inference_test_results_20250117_120000.json
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "SDK evolution_openai –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

```bash
pip install evolution-openai
```

### –û—à–∏–±–∫–∞: "401 Unauthorized"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `CLOUD_RU_IAM_KEY_ID` –∏ `CLOUD_RU_IAM_SECRET`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–∑–æ–≤ Inference

### –û—à–∏–±–∫–∞: "Endpoint URL –Ω–µ –∑–∞–¥–∞–Ω"

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `CLOUD_RU_INFERENCE_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç URL (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `https://`)

### –û—à–∏–±–∫–∞: "–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (401)" –ø—Ä–∏ —Ç–µ—Å—Ç–µ –±–µ–∑ –∫–ª—é—á–µ–π

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞. –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω—ã IAM –∫–ª—é—á–∏.

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (timeout, connection refused)

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å –∑–∞–ø—É—â–µ–Ω (—Å—Ç–∞—Ç—É—Å "–ó–∞–ø—É—â–µ–Ω" –≤ Cloud.RU)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å endpoint –∏–∑ –≤–∞—à–µ–π —Å–µ—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL (–±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª—ç—à–µ–π –≤ –∫–æ–Ω—Ü–µ)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –≤ git!
2. **–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø**: –ï—Å–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞, endpoint –¥–æ—Å—Ç—É–ø–µ–Ω –ø—É–±–ª–∏—á–Ω–æ
3. **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∏—Ö —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Cloud.RU ML Inference](https://cloud.ru/docs/ml-inference)
- [Evolution OpenAI SDK](https://github.com/cloud-ru/evolution-openai)
- [Cloud.RU IAM –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://cloud.ru/docs/iam)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å –∑–∞–ø—É—â–µ–Ω –≤ Cloud.RU
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π JSON –æ—Ç—á–µ—Ç —Å –æ—à–∏–±–∫–∞–º–∏


