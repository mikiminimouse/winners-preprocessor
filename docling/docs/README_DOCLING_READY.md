# –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –û–ë–†–ê–ë–û–¢–ö–ï –î–û–ö–£–ú–ï–ù–¢–û–í –ß–ï–†–ï–ó DOCLING

## ‚úÖ –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### Preprocessor (Router)
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç (healthy)
- ‚úÖ **–ü–æ—Ä—Ç:** 8080
- ‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
  - –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ (RAR, ZIP)
  - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è PDF (OCR vs text layer)
  - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è DOC ‚Üí DOCX
  - –°–æ–∑–¥–∞–Ω–∏–µ unit'–æ–≤ –∏ manifest'–æ–≤
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ MongoDB

### Docling Service
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç (healthy)
- ‚úÖ **–ü–æ—Ä—Ç:** 8000
- ‚úÖ **API Endpoint:** `/process`
- ‚úÖ **Health Check:** `/health`

### MongoDB
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç (healthy)
- ‚úÖ **–ü–æ—Ä—Ç:** 27017
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** `docling_metadata`
- ‚úÖ **–ö–æ–ª–ª–µ–∫—Ü–∏–∏:**
  - `processing_metrics` - –º–µ—Ç—Ä–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - `manifests` - –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã unit'–æ–≤

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

**Session ID:** `fe272d94-e6cb-4135-81a7-aadba4552904`

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 60
- **–°–æ–∑–¥–∞–Ω–æ unit'–æ–≤:** 60
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å:** 100.0%
- **–û—à–∏–±–æ–∫:** 0

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º:
- **PDF:** 48 —Ñ–∞–π–ª–æ–≤
  - –° —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º: 20 (41.7%)
  - –¢—Ä–µ–±—É—é—Ç OCR: 28 (58.3%)
- **DOCX:** 6 —Ñ–∞–π–ª–æ–≤
- **DOC:** 1 —Ñ–∞–π–ª (—Ä–µ–∞–ª—å–Ω—ã–π, –Ω–µ –∞—Ä—Ö–∏–≤)
- **HTML:** 4 —Ñ–∞–π–ª–∞
- **RAR –∞—Ä—Ö–∏–≤—ã:** 5 —Ñ–∞–π–ª–æ–≤ (–≤—Å–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω—ã)

### –ê—Ä—Ö–∏–≤—ã:
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ:** 5
- **–£—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–æ:** 5
- **–ò–∑–≤–ª–µ—á–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 10

## üîÑ Pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏

### Routes –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–ª—è:
1. **pdf_text** - PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º (–Ω–µ —Ç—Ä–µ–±—É—é—Ç OCR)
2. **pdf_scan** - PDF —Ç—Ä–µ–±—É—é—â–∏–µ OCR
3. **docx** - DOCX —Ñ–∞–π–ª—ã
4. **html_text** - HTML —Ñ–∞–π–ª—ã
5. **mixed** - –°–º–µ—à–∞–Ω–Ω—ã–µ unit'—ã (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Unit'—ã –≥–æ—Ç–æ–≤—ã –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ:
- –í—Å–µ unit'—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ MongoDB (–∫–æ–ª–ª–µ–∫—Ü–∏—è `manifests`)
- –ö–∞–∂–¥—ã–π unit —Å–æ–¥–µ—Ä–∂–∏—Ç:
  - `unit_id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
  - `files` - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
  - `processing.route` - –º–∞—Ä—à—Ä—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - `processing.status` - —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –§–∞–π–ª—ã –≤ normalized:
- –§–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ `normalized/UNIT_*/files/`
- –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ MongoDB

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Docling

### API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:

```bash
POST http://localhost:8000/process
Content-Type: application/json

{
  "unit_id": "UNIT_...",
  "manifest": "mongodb://UNIT_...",
  "files": [...],
  "route": "pdf_text" | "pdf_scan" | "docx" | "html_text" | "mixed"
}
```

### –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:

```json
{
  "unit_id": "UNIT_...",
  "status": "completed",
  "output_files": ["output/UNIT_.../file.json", "output/UNIT_.../file.md"],
  "processing_time": 0.0
}
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ MongoDB –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ API router:
   - `GET /metrics/processing` - –ø–æ–ª–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
   - `GET /metrics/summary` - —Å–≤–æ–¥–∫–∞

2. Docling —Å–µ—Ä–≤–∏—Å –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É

3. –í—Å–µ unit'—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ routes –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

4. –§–∞–π–ª—ã, —Ç—Ä–µ–±—É—é—â–∏–µ OCR, –ø–æ–º–µ—á–µ–Ω—ã —Ñ–ª–∞–≥–æ–º `needs_ocr: true`

5. HTML —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –∞—Ä—Ö–∏–≤—ã

## ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞

–í—Å–µ —Å–∏—Å—Ç–µ–º—ã –≥–æ—Ç–æ–≤—ã –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Docling!

