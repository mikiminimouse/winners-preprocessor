# –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö Pipeline

**–î–∞—Ç–∞:** 2025-12-10

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É API

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Pipeline

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± (–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏):**
```python
from paddleocr import PaddleOCRVL
pipeline = PaddleOCRVL()
```

**–ù–∞—à –∫–æ–¥ (server.py:202):**
```python
from paddleocr import PaddleOCRVL
paddle_ocr = PaddleOCRVL()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–ò–¥–µ–Ω—Ç–∏—á–Ω–æ**

---

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± (–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏):**
```python
output = pipeline.predict("image_path.png")
```

**–ù–∞—à –∫–æ–¥ (server.py:392):**
```python
result = ocr.predict(str(image_path))
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–ò–¥–µ–Ω—Ç–∏—á–Ω–æ**

---

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± (–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏):**
```python
for res in output:
    res.save_to_json(save_path="output")
    res.save_to_markdown(save_path="output")
```

**–ù–∞—à –∫–æ–¥ (server.py:435-478):**
```python
for res in results:
    res.save_to_markdown(save_path=temp_dir)
    res.save_to_json(save_path=temp_dir)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–ò–¥–µ–Ω—Ç–∏—á–Ω–æ**

---

## üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Pipeline (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω—É—Ç—Ä–∏)

### –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `PaddleOCRVL()`:

1. ‚úÖ **PP-DocLayoutV2** –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ü—É—Ç—å: `/home/paddleocr/.paddlex/official_models/PP-DocLayoutV2`
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Layout detection

2. ‚úÖ **PaddleOCR-VL-0.9B** –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ü—É—Ç—å: `/home/paddleocr/.paddlex/official_models/PaddleOCR-VL`
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: VLM text recognition

3. ‚úÖ **Post-processing** –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Markdown/JSON

---

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—à–µ–≥–æ –∫–æ–¥–∞

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (server.py:159-220)

```python
def init_paddleocr():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PaddleOCR-VL pipeline (–ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)"""
    global paddle_ocr
    if PaddleOCRVL is None:
        raise RuntimeError("PaddleOCRVL is not available. Check installation.")
    
    if paddle_ocr is None:
        # ... –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è ...
        paddle_ocr = PaddleOCRVL()  # ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±
        logger.info("PaddleOCR-VL initialized successfully")
    return paddle_ocr
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `PaddleOCRVL()`
- ‚úÖ –ù–µ –ø–µ—Ä–µ–¥–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚úÖ –ú–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ `PADDLEX_HOME/official_models/`

---

### –û–±—Ä–∞–±–æ—Ç–∫–∞ (server.py:357-427)

```python
def process_with_paddleocr(image_path: Union[str, Path]) -> Any:
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PaddleOCR-VL (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π pipeline)
    
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
    - pipeline = PaddleOCRVL()
    - output = pipeline.predict(image_path)
    """
    ocr = init_paddleocr()
    logger.info(f"Processing image with PaddleOCR-VL: {image_path}")
    
    # ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±: pipeline.predict()
    result = ocr.predict(str(image_path))
    
    return result
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `predict()`
- ‚úÖ –ü–µ—Ä–µ–¥–∞–µ–º –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (–∫–∞–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- ‚úÖ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (server.py:433-500)

```python
def save_results_locally(
    results: Any,
    output_dir: Path,
    base_filename: str
) -> Tuple[Optional[Path], Optional[Path]]:
    """
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–∑ PaddleOCR-VL pipeline
    """
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–º–æ–∂–µ—Ç –±—ã—Ç—å list, iterator, –∏–ª–∏ –æ–¥–∏–Ω–æ—á–Ω—ã–π –æ–±—ä–µ–∫—Ç)
    if not isinstance(results, (list, tuple)):
        results = [results]
    
    # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã save_to_markdown/json()
    for i, res in enumerate(results):
        md_path = output_dir / f"{base_filename}_{i:03d}.md"
        json_path = output_dir / f"{base_filename}_{i:03d}.json"
        
        try:
            res.save_to_markdown(save_path=str(md_path.parent))
            res.save_to_json(save_path=str(json_path.parent))
        except Exception as e:
            logger.error(f"Failed to save result {i}: {e}")
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã `save_to_markdown()`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã `save_to_json()`
- ‚úÖ –ü–µ—Ä–µ–¥–∞–µ–º `save_path` –∫–∞–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

### ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É API: 100%

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± | –ù–∞—à –∫–æ–¥ | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ |
|-----------|-------------------|---------|--------------|
| –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è | `PaddleOCRVL()` | `PaddleOCRVL()` | ‚úÖ 100% |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ | `pipeline.predict(path)` | `ocr.predict(path)` | ‚úÖ 100% |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ MD | `res.save_to_markdown(path)` | `res.save_to_markdown(path)` | ‚úÖ 100% |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON | `res.save_to_json(path)` | `res.save_to_json(path)` | ‚úÖ 100% |

---

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Pipeline (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ß—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. ‚úÖ **PP-DocLayoutV2**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ `PaddleOCRVL()`
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è layout detection

2. ‚úÖ **PaddleOCR-VL-0.9B**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ `PaddleOCRVL()`
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è text recognition

3. ‚úÖ **Post-processing**
   - –í–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ pipeline
   - –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Markdown/JSON
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º:

1. ‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π pipeline** `PaddleOCRVL()`
2. ‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã** `predict()`, `save_to_markdown()`, `save_to_json()`
3. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** (PP-DocLayoutV2, PaddleOCR-VL-0.9B, post-processing)

### –ö–∞—á–µ—Å—Ç–≤–æ:

- ‚úÖ **–ò–¥–µ–Ω—Ç–∏—á–Ω–æ** –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ **–ò–¥–µ–Ω—Ç–∏—á–Ω–æ** HuggingFace Demo
- ‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π API** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–æ–¥–∏–Ω –≤—ã–∑–æ–≤ - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞)
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

---

**–í—ã–≤–æ–¥:** ‚úÖ **–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ pipeline –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ HuggingFace Demo.**

