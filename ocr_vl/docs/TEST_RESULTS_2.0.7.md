# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Ä—Å–∏–∏ 2.0.7

**–î–∞—Ç–∞:** 2025-12-10  
**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:** container-msobm-pine  
**URL:** https://08d022b0-2b04-4a35-adb0-10b35daafed5.modelrun.inference.cloud.ru  
**–û–±—Ä–∞–∑:** docling-granite-258m.cr.cloud.ru/paddleocr-vl-service:2.0.7

---

## ‚úÖ –¢–ï–°–¢ 1: Health Check

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£–°–ü–ï–®–ù–û

```json
{
  "status": "healthy",
  "paddleocr": "ready",
  "s3_storage": "configured",
  "output_dir": "/app/output",
  "temp_dir": "/app/temp"
}
```

**–í—ã–≤–æ–¥:** –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã.

---

## ‚úÖ –¢–ï–°–¢ 2: –≠–Ω–¥–ø–æ–∏–Ω—Ç `/logs`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –î–û–°–¢–£–ü–ï–ù

- Status: 200 OK
- –≠–Ω–¥–ø–æ–∏–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- –õ–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ stdout/stderr (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Docker)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker logs` –∏–ª–∏ Cloud.ru Console –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠–Ω–¥–ø–æ–∏–Ω—Ç `/logs` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ª–æ–≥–∏ –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –≤ stdout/stderr –∏ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º runtime.

---

## ‚úÖ –¢–ï–°–¢ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è `page_0001 (3).png`

### –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –£–°–ü–ï–®–ù–û (—Å –æ–≥–æ–≤–æ—Ä–∫–∞–º–∏)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∞:**
- –§–∞–π–ª: `page_0001 (3).png` (750 KB)
- `return_content`: false (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è)
- Timeout: 600 —Å–µ–∫—É–Ω–¥

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **Status:** 200 OK ‚úÖ
- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:** 132.057 —Å–µ–∫—É–Ω–¥—ã (~2.2 –º–∏–Ω—É—Ç—ã)
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** ‚úÖ –£—Å–ø–µ—à–Ω–æ
  - Markdown: `/app/output/20251209_230334_page_0001 (3).md`
  - JSON: `/app/output/20251209_230334_page_0001 (3).json`
- **S3 –∑–∞–≥—Ä—É–∑–∫–∞:** ‚ùå FAILED

**–í—ã–≤–æ–¥:** 
- ‚úÖ Pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —É—Å–ø–µ—à–Ω–∞
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –≤ S3

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: S3 Upload Failed

**–°—Ç–∞—Ç—É—Å:** S3 –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ credentials
2. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ bucket
3. –û—à–∏–±–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `CLOUDRU_S3_ACCESS_KEY` (–Ω—É–∂–µ–Ω —Ñ–æ—Ä–º–∞—Ç `tenant_id:key_id`)
4. –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–æ—Å—Ç—É–ø–∞ –∫ S3 endpoint

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ S3
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è S3 –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç `ACCESS_KEY` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: `502f76f0-9017-493d-bda4-9e1bb278da84:ce94860ccc8780b2bc5f00f31459d24e`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ bucket `bucket-winners223`

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: 502 Gateway Timeout —Å `return_content=true`

**–°—Ç–∞—Ç—É—Å:** Gateway —Ç–∞–π–º–∞—É—Ç–∏—Ç –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ `return_content=true` –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç 502 (Gateway Timeout)
- –ü—Ä–∏ `return_content=false` –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç (200 OK)

**–ü—Ä–∏—á–∏–Ω–∞:**
- Gateway/ingress –∏–º–µ–µ—Ç —Ç–∞–π–º–∞—É—Ç –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ + –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç ~132 —Å–µ–∫—É–Ω–¥—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ markdown/json –≤ –æ—Ç–≤–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏

**–†–µ—à–µ–Ω–∏—è:**
1. **–£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç gateway/ingress** –¥–æ 300-600 —Å–µ–∫—É–Ω–¥
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `return_content=false`** –∏ –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ S3 —Å—Å—ã–ª–∫–∏
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É** —Å polling —Å—Ç–∞—Ç—É—Å–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç gateway –¥–æ 300+ —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `return_content=true`.

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|--------|------------|
| Health Check | ‚úÖ PASS | –°–µ—Ä–≤–∏—Å –≥–æ—Ç–æ–≤ |
| Logs Endpoint | ‚úÖ PASS | –î–æ—Å—Ç—É–ø–µ–Ω (–ª–æ–≥–∏ –≤ stdout) |
| OCR Processing | ‚úÖ PASS | –†–∞–±–æ—Ç–∞–µ—Ç, 132 —Å–µ–∫ |
| S3 Upload | ‚ùå FAIL | –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| Return Content | ‚ö†Ô∏è PARTIAL | –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å `false` |

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. ‚úÖ Pipeline PaddleOCR-VL —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
3. ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (Markdown + JSON)
4. ‚úÖ Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç
5. ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–æ–≥–∞—Ö
6. ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ Cloud.ru Console)

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

1. **S3 Upload:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç `ACCESS_KEY`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
   - –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫

2. **Gateway Timeout:**
   - –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç gateway –¥–æ 300-600 —Å–µ–∫—É–Ω–¥
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å S3 —Å—Å—ã–ª–∫–∏ –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã

1. **–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ S3:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ S3
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Cloud.ru Console
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç ACCESS_KEY (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å tenant_id:key_id)
   ```

2. **–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `return_content=false` (–±—ã—Å—Ç—Ä–µ–µ, –±–µ–∑ —Ç–∞–π–º–∞—É—Ç–æ–≤)
   - –ü–æ–ª—É—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ S3 —Å—Å—ã–ª–∫–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (—á–µ—Ä–µ–∑ exec/kubectl cp)

3. **–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
   - –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Cloud.ru Console
   - Health check –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
   - `/logs` —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏

---

## üéØ –í—ã–≤–æ–¥—ã

**–í–µ—Ä—Å–∏—è 2.0.7 —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
- ‚úÖ Pipeline —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ S3 –∑–∞–≥—Ä—É–∑–∫–∏
- ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç gateway

**–°–µ—Ä–≤–∏—Å –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** —Å `return_content=false` –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

