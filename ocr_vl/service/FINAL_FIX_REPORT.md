# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ–±—Ä–∞–∑–∞

**–î–∞—Ç–∞:** 05.12.2025  
**–í–µ—Ä—Å–∏—è –æ–±—Ä–∞–∑–∞:** 1.0.7

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:

```
PermissionError: [Errno 13] Permission denied: '/.paddlex'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- PaddleX –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/.paddlex` –≤ –∫–æ—Ä–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `TempFileManager()` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ –∫–æ—Ä–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**–ì–¥–µ –≤–æ–∑–Ω–∏–∫–∞–ª–∞:**
1. –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `paddleocr` ‚Üí –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `paddlex`
2. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `paddlex_genai_server` ‚Üí –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `paddlex.inference.genai.server`
3. –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `server.py` ‚Üí –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `from paddleocr import PaddleOCRVL`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Dockerfile:

–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/.paddlex` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞:

```dockerfile
# –ö–†–ò–¢–ò–ß–ù–û: –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è PaddleX cache —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
# PaddleX –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å /.paddlex –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç PermissionError
RUN mkdir -p /.paddlex/temp && \
    chmod -R 777 /.paddlex
```

**–ü–æ–∑–∏—Ü–∏—è:** –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –ø–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º server.py

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå `PermissionError: [Errno 13] Permission denied: '/.paddlex'`
- ‚ùå FastAPI –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚ùå –ò–º–ø–æ—Ä—Ç PaddleOCRVL –ø–∞–¥–∞–µ—Ç

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ `PaddleOCRVL imported successfully`
- ‚úÖ `Application startup complete`
- ‚úÖ `Uvicorn running on http://0.0.0.0:8081`
- ‚úÖ Health check —Ä–∞–±–æ—Ç–∞–µ—Ç (200 OK)

### –õ–æ–≥–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

```
2025-12-05 01:56:55,991 - server - INFO - PaddleOCRVL imported successfully
2025-12-05 01:56:55,993 - server - INFO - Cloud.ru S3 credentials not configured, skipping S3 upload
INFO:     Started server process [1]
INFO:     Waiting for application startup.
2025-12-05 01:56:56,005 - server - INFO - TEMP_DIR is writable: /app/temp
2025-12-05 01:56:56,007 - server - INFO - OUTPUT_DIR is writable: /app/output
2025-12-05 01:56:56,007 - server - INFO - PaddleOCR-VL will be initialized on first request
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8081 (Press CTRL+C to quit)
INFO:     172.17.0.1:33500 - "GET /health HTTP/1.1" 200 OK
```

### Health Check –æ—Ç–≤–µ—Ç:

```json
{
    "status": "healthy",
    "paddleocr": "not_initialized",
    "s3_storage": "not_configured",
    "output_dir": "/app/output",
    "temp_dir": "/app/temp",
    "docs": "/docs - Swagger UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API"
}
```

## üì¶ –û–±—Ä–∞–∑ Docker

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±—Ä–∞–∑–µ:

**URI:**
```
docling-granite-258m.cr.cloud.ru/paddleocr-vl-service:latest
```

**–í–µ—Ä—Å–∏—è —Å —Ç–µ–≥–æ–º:**
```
docling-granite-258m.cr.cloud.ru/paddleocr-vl-service:1.0.7
```

**Digest:**
```
sha256:5355d2dcf66aebc73f16643d3f78d669db62997fc75f77a44d30848c3d43e6bd
```

**–†–∞–∑–º–µ—Ä:** 20.5GB

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω –≤ Artifact Registry

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É

### –î–ª—è Cloud.ru ML Inference:

1. **Docker Image URI:**
   ```
   docling-granite-258m.cr.cloud.ru/paddleocr-vl-service:latest
   ```

2. **–ü–æ—Ä—Ç—ã:**
   - **8081** - FastAPI handler (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å OCR)
   - **8080** - vLLM —Å–µ—Ä–≤–µ—Ä (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è, —Ç—Ä–µ–±—É–µ—Ç GPU)

3. **Health Check:**
   - **Path:** `/health`
   - **Port:** `8081`
   - **Initial Delay:** `180` —Å–µ–∫—É–Ω–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - **Failure Threshold:** `3`

4. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   ```bash
   CLOUDRU_S3_ENDPOINT=https://s3.cloud.ru
   CLOUDRU_S3_BUCKET=your-bucket-name
   CLOUDRU_S3_ACCESS_KEY=your-access-key
   CLOUDRU_S3_SECRET_KEY=your-secret-key
   ```

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):

```bash
docker run -d \
  --name paddleocr-vl \
  -p 8081:8081 \
  paddleocr-vl-service:latest
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** vLLM —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –±–µ–∑ GPU (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ), –Ω–æ FastAPI handler –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ FastAPI —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Health check –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–º–ø–æ—Ä—Ç PaddleOCRVL —É—Å–ø–µ—à–µ–Ω
- ‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–ø–∏—Å–∏

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- **–° GPU:** –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ (vLLM + FastAPI) –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
- **–ë–µ–∑ GPU:** –¢–æ–ª—å–∫–æ FastAPI –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, vLLM –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- vLLM —Å–µ—Ä–≤–µ—Ä —Ç—Ä–µ–±—É–µ—Ç GPU –¥–ª—è —Ä–∞–±–æ—Ç—ã
- PaddleOCR-VL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è)

## üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

1. **FIX_PERMISSIONS_REPORT.md** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
2. **DEPLOYMENT_INSTRUCTIONS.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
3. **OFFICIAL_COMPARISON_ANALYSIS.md** - –∞–Ω–∞–ª–∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É –ø–æ–¥—Ö–æ–¥—É
4. **FINAL_FIX_REPORT.md** - —ç—Ç–æ—Ç –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PermissionError | ‚úÖ | –†–µ—à–µ–Ω–æ |
| –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ | ‚úÖ | –£—Å–ø–µ—à–Ω–æ |
| –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | –£—Å–ø–µ—à–Ω–æ |
| –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Artifact Registry | ‚úÖ | –£—Å–ø–µ—à–Ω–æ |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | ‚úÖ | –°–æ–∑–¥–∞–Ω–∞ |

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ
2. ‚úÖ –û–±—Ä–∞–∑ —Å–æ–±—Ä–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
3. ‚úÖ –û–±—Ä–∞–∑ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ Artifact Registry
4. ‚è≥ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ Cloud.ru ML Inference
5. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å GPU

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
2. Health check endpoint: `/health`
3. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å GPU (–¥–ª—è vLLM)
4. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è S3 (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**

