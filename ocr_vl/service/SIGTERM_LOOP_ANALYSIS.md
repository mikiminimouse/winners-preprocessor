# –ê–Ω–∞–ª–∏–∑ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è SIGTERM

**–î–∞—Ç–∞:** 05.12.2025  
**–í—Ä–µ–º—è:** 13:10-13:12  
**–í–µ—Ä—Å–∏—è:** 1.3.6

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç SIGTERM **–∫–∞–∂–¥—ã–µ 37-39 —Å–µ–∫—É–Ω–¥** –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ.

## üìä –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫

### –¶–∏–∫–ª 1:
- **13:10:39** - SIGTERM –ø–æ–ª—É—á–µ–Ω
- **13:10:40** - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫: "Starting FastAPI handler"
- **13:11:19** - SIGTERM –ø–æ–ª—É—á–µ–Ω (—á–µ—Ä–µ–∑ 39 —Å–µ–∫—É–Ω–¥)

### –¶–∏–∫–ª 2:
- **13:11:19** - SIGTERM –ø–æ–ª—É—á–µ–Ω
- **13:11:20** - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
- **13:11:59** - SIGTERM –ø–æ–ª—É—á–µ–Ω (—á–µ—Ä–µ–∑ 39 —Å–µ–∫—É–Ω–¥)

### –¶–∏–∫–ª 3:
- **13:11:59** - SIGTERM –ø–æ–ª—É—á–µ–Ω
- **13:12:00** - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
- **13:12:39** - SIGTERM –ø–æ–ª—É—á–µ–Ω (—á–µ—Ä–µ–∑ 39 —Å–µ–∫—É–Ω–¥)

### –¶–∏–∫–ª 4:
- **13:12:39** - SIGTERM –ø–æ–ª—É—á–µ–Ω
- **13:12:40** - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
- (—Ü–∏–∫–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è...)

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. **–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
   ```
   Starting FastAPI handler on port 8081...
   Using offline image with pre-loaded models
   PADDLEX_HOME=/home/paddleocr/.paddlex
   Dynamic graph mode enabled
   ```

2. **–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PaddleOCR-VL:**
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–æ–¥–µ–ª–∏
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏—è (ccache warning)
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç ~80-90 —Å–µ–∫—É–Ω–¥

3. **–ß–µ—Ä–µ–∑ 37-39 —Å–µ–∫—É–Ω–¥ Health Check —É–±–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
   ```
   FatalError: `Termination signal` is detected
   SIGTERM received by PID 1 from PID 0
   ```

4. **–¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ**

## üéØ –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

**Health Check –Ω–∞ Cloud.ru –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ:**

- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ (–¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)
- –ù–µ –¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (—Ç—Ä–µ–±—É–µ—Ç—Å—è 80-90 —Å–µ–∫—É–Ω–¥)
- –£–±–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–µ—Ä–µ–∑ ~37-39 —Å–µ–∫—É–Ω–¥
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "starting"

## ‚è±Ô∏è –¢–∞–π–º–∏–Ω–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

1. **–ó–∞–ø—É—Å–∫ FastAPI:** ~1-2 —Å–µ–∫—É–Ω–¥—ã
2. **–ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫:** ~2-3 —Å–µ–∫—É–Ω–¥—ã
3. **–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π PaddleOCR-VL:** ~80-90 —Å–µ–∫—É–Ω–¥
4. **–ò—Ç–æ–≥–æ:** ~90-95 —Å–µ–∫—É–Ω–¥ –º–∏–Ω–∏–º—É–º

### –ß—Ç–æ –¥–∞–µ—Ç Health Check:

- **~37-39 —Å–µ–∫—É–Ω–¥** –¥–æ SIGTERM
- –≠—Ç–æ **–º–µ–Ω–µ–µ –ø–æ–ª–æ–≤–∏–Ω—ã** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏!

## üí° –†–µ—à–µ–Ω–∏–µ

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Health Check –Ω–∞ Cloud.ru:

#### Startup Probe (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ!):
```
failureThreshold: 50        # –ú–∏–Ω–∏–º—É–º 50 –ø–æ–ø—ã—Ç–æ–∫
initialDelaySeconds: 10     # –î–∞—Ç—å –≤—Ä–µ–º—è –Ω–∞ –∑–∞–ø—É—Å–∫
periodSeconds: 10           # –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
timeoutSeconds: 5           # –¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
```

–≠—Ç–æ –¥–∞—Å—Ç: **10 + (50 * 10) = 510 —Å–µ–∫—É–Ω–¥** (8.5 –º–∏–Ω—É—Ç) –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é

#### Liveness Probe:
```
initialDelaySeconds: 300    # 5 –º–∏–Ω—É—Ç –∑–∞–¥–µ—Ä–∂–∫–∞
periodSeconds: 30           # –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
timeoutSeconds: 5
failureThreshold: 3
```

#### Readiness Probe:
```
initialDelaySeconds: 180    # 3 –º–∏–Ω—É—Ç—ã –∑–∞–¥–µ—Ä–∂–∫–∞
periodSeconds: 15           # –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
timeoutSeconds: 5
failureThreshold: 3
```

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–°–º. —Ñ–∞–π–ª—ã:
- `CLOUDRU_HEALTH_CHECK_SETUP.md` - –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `HEALTH_CHECK_CONFIGURATION.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–æ

**–ë–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Health Check:**
- ‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
- ‚ùå –°–µ—Ä–≤–∏—Å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–° –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Health Check:**
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —É—Å–ø–µ–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è
- ‚úÖ –°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã

## üéØ –ò—Ç–æ–≥

–ü—Ä–æ–±–ª–µ–º–∞ **–Ω–µ –≤ –∫–æ–¥–µ –∏–ª–∏ –æ–±—Ä–∞–∑–µ**, –∞ –≤ **–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Health Check –Ω–∞ Cloud.ru**.

–û–±—Ä–∞–∑ –≤–µ—Ä—Å–∏–∏ 1.3.6 —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

---

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Health Check –Ω–∞ Cloud.ru


