# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ PermissionError

**–î–∞—Ç–∞:** 05.12.2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** `PermissionError: [Errno 13] Permission denied: '/.paddlex'`

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:

```
PermissionError: [Errno 13] Permission denied: '/.paddlex'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- PaddleX –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/.paddlex` –≤ –∫–æ—Ä–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `TempFileManager()` –≤ `/usr/local/lib/python3.10/site-packages/paddlex/utils/cache.py` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ –∫–æ—Ä–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**–ì–¥–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:**
1. –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `paddleocr` ‚Üí –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `paddlex`
2. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `paddlex_genai_server` ‚Üí –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `paddlex.inference.genai.server`
3. –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `server.py` ‚Üí –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `from paddleocr import PaddleOCRVL`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ Dockerfile:

–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/.paddlex` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –î–û —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```dockerfile
# –ö–†–ò–¢–ò–ß–ù–û: –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è PaddleX cache —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
# PaddleX –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å /.paddlex –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç PermissionError
RUN mkdir -p /.paddlex/temp && \
    chmod -R 777 /.paddlex
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞  
‚úÖ PaddleX –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ –ò–º–ø–æ—Ä—Ç `PaddleOCRVL` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ FastAPI —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ  

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ GPU):

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå `PermissionError: [Errno 13] Permission denied: '/.paddlex'`
- ‚ùå FastAPI –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚ùå –ò–º–ø–æ—Ä—Ç PaddleOCRVL –ø–∞–¥–∞–µ—Ç

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ `PaddleOCRVL imported successfully`
- ‚úÖ `Application startup complete`
- ‚úÖ `Uvicorn running on http://0.0.0.0:8081`
- ‚úÖ Health check —Ä–∞–±–æ—Ç–∞–µ—Ç (200 OK)

**–õ–æ–≥–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
2025-12-05 01:56:55,991 - server - INFO - PaddleOCRVL imported successfully
2025-12-05 01:56:55,993 - server - INFO - Cloud.ru S3 credentials not configured, skipping S3 upload
INFO:     Started server process [1]
INFO:     Waiting for application startup.
2025-12-05 01:56:56,005 - server - INFO - TEMP_DIR is writable: /app/temp
2025-12-05 01:56:56,007 - server - INFO - OUTPUT_DIR is writable: /app/output
2025-12-05 01:56:56,007 - server - INFO - PaddleOCR-VL will be initialized on first request
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8081 (Press CTRL+C to quit)
INFO:     172.17.0.1:33500 - "GET /health HTTP/1.1" 200 OK
```

**Health Check –æ—Ç–≤–µ—Ç:**
```json
{
    "status": "healthy",
    "paddleocr": "not_initialized",
    "s3_storage": "not_configured",
    "output_dir": "/app/output",
    "temp_dir": "/app/temp",
    "docs": "/docs - Swagger UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API"
}
```

## üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑

**–¢–µ–≥:** `docling-granite-258m.cr.cloud.ru/paddleocr-vl-service:latest`  
**–í–µ—Ä—Å–∏—è:** `1.0.7`  
**Digest:** (–±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ—Å–ª–µ push)

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Dockerfile

### –î–æ–±–∞–≤–ª–µ–Ω–æ:

```dockerfile
# –ö–†–ò–¢–ò–ß–ù–û: –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è PaddleX cache —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
# PaddleX –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å /.paddlex –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç PermissionError
RUN mkdir -p /.paddlex/temp && \
    chmod -R 777 /.paddlex
```

**–ü–æ–∑–∏—Ü–∏—è –≤ Dockerfile:** –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –ø–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º server.py

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

```bash
$ docker exec container ls -la /.paddlex
total 12
drwxrwxrwx 3 root root 4096 Dec  5 01:55 .
drwxr-xr-x 1 root root 4096 Dec  5 01:56 ..
drwxrwxrwx 2 root root 4096 Dec  5 01:55 temp
```

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è Cloud.ru ML Inference:

1. ‚úÖ –û–±—Ä–∞–∑ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
2. ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ GPU –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã PaddleOCR-VL
3. ‚ö†Ô∏è vLLM —Å–µ—Ä–≤–µ—Ä —Ç—Ä–µ–±—É–µ—Ç GPU –¥–ª—è –∑–∞–ø—É—Å–∫–∞
4. ‚úÖ FastAPI handler —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç vLLM

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

- **–° GPU:** –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ (vLLM + FastAPI) –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
- **–ë–µ–∑ GPU:** –¢–æ–ª—å–∫–æ FastAPI –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, vLLM –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/.paddlex` | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| –ò–º–ø–æ—Ä—Ç PaddleOCRVL | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç |
| –ó–∞–ø—É—Å–∫ FastAPI | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç |
| Health check | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç |
| vLLM —Å–µ—Ä–≤–µ—Ä (–±–µ–∑ GPU) | ‚ùå | –û–∂–∏–¥–∞–µ–º–æ - —Ç—Ä–µ–±—É–µ—Ç GPU |
| –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | –£—Å–ø–µ—à–Ω–æ |

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ
2. ‚úÖ –û–±—Ä–∞–∑ —Å–æ–±—Ä–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
3. ‚è≥ –û–±—Ä–∞–∑ –∑–∞–ø—É—à–µ–Ω –≤ Artifact Registry
4. ‚è≥ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ Cloud.ru ML Inference
5. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å GPU

