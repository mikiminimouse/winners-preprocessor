# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã SIGTERM –≤ –≤–µ—Ä—Å–∏–∏ 1.3.5

**–î–∞—Ç–∞:** 05.12.2025

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–í–µ—Ä—Å–∏—è 1.3.5 –≤—Å–µ –µ—â–µ –ø–æ–ª—É—á–∞–µ—Ç SIGTERM –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:

```
FatalError: `Termination signal` is detected by the operating system.
SIGTERM received by PID 1
```

**–í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞:**
1. –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
2. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ñ–æ–Ω–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
3. Health check –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –≤–æ–≤—Ä–µ–º—è (–≤–æ–∑–º–æ–∂–Ω–æ)
4. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç SIGTERM –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
5. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üîç –ü—Ä–∏—á–∏–Ω—ã

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ –µ—â–µ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–∞—è

**–§–æ–Ω–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
- –ó–∞–Ω–∏–º–∞–µ—Ç ~80-90 —Å–µ–∫—É–Ω–¥ (—Å—É–¥—è –ø–æ –ª–æ–≥–∞–º)
- Health check –º–æ–∂–µ—Ç –Ω–µ –¥–æ–∂–¥–∞—Ç—å—Å—è

### 2. Health check —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–µ–Ω

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- Startup probe –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –¢–∞–π–º–∞—É—Ç—ã —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ
- Health check –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 3. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ vs –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ

**–ù–∞–±–ª—é–¥–µ–Ω–∏–µ:**
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫: –ø–æ–ª—É—á–∞–µ—Ç SIGTERM
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞: —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- –ú–æ–¥–µ–ª–∏ —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

## üí° –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã Health Check

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Cloud.ru ML Inference:**

```yaml
startupProbe:
  httpGet:
    path: /health
    port: 8081
  initialDelaySeconds: 0
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 30  # –î–æ 5 –º–∏–Ω—É—Ç –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
  successThreshold: 1

livenessProbe:
  httpGet:
    path: /health
    port: 8081
  initialDelaySeconds: 180  # 3 –º–∏–Ω—É—Ç—ã –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
  periodSeconds: 30
  timeoutSeconds: 10
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health
    port: 8081
  initialDelaySeconds: 120  # 2 –º–∏–Ω—É—Ç—ã
  periodSeconds: 15
  timeoutSeconds: 5
  failureThreshold: 3
```

### –†–µ—à–µ–Ω–∏–µ 2: –£–ª—É—á—à–∏—Ç—å Health Check endpoint

**–¢–µ–∫—É—â–∏–π health check:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç "healthy" –¥–∞–∂–µ –µ—Å–ª–∏ PaddleOCR –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- –ù–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–£–ª—É—á—à–µ–Ω–Ω—ã–π health check:**
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å "initializing" –≤–æ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- Startup probe –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å "initializing" –∫–∞–∫ –≤–∞–ª–∏–¥–Ω—ã–π —Å—Ç–∞—Ç—É—Å
- Liveness probe –¥–æ–ª–∂–µ–Ω –∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –†–µ—à–µ–Ω–∏–µ 3: –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–¢–µ–∫—É—â–µ–µ:**
- –ó–∞–¥–µ—Ä–∂–∫–∞ 2 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –¥–æ 5-10 —Å–µ–∫—É–Ω–¥
- –î–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—É –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Health Check –Ω–∞ Cloud.ru**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ startup probe –∏–º–µ–µ—Ç `failureThreshold=30+`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `initialDelaySeconds` –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π –¥–ª—è liveness probe

2. **–£–ª—É—á—à–∏—Ç—å Health Check endpoint**
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å "initializing"
   - Startup probe –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å —ç—Ç–æ—Ç —Å—Ç–∞—Ç—É—Å

3. **–£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π**
   - –° 2 —Å–µ–∫—É–Ω–¥ –¥–æ 5-10 —Å–µ–∫—É–Ω–¥
   - –î–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—É –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

1. **–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π –≤ –æ–±—Ä–∞–∑**
   - –ú–æ–¥–µ–ª–∏ —É–∂–µ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –æ—Ñ–ª–∞–π–Ω-–æ–±—Ä–∞–∑–µ
   - –ù–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ –µ—â–µ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å volume –¥–ª—è –∫—ç—à–∞ –º–æ–¥–µ–ª–µ–π**
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
   - –£—Å–∫–æ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å health check
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å OCR –∑–∞–ø—Ä–æ—Å
3. –ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ - –ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
4. –£–ª—É—á—à–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ health check –Ω–∞ Cloud.ru

---

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Health Check –Ω–∞ Cloud.ru


