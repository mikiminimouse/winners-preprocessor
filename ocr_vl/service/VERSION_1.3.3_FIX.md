# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ 1.3.3

**–î–∞—Ç–∞:** 05.12.2025  
**–í–µ—Ä—Å–∏—è:** 1.3.3

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞ –≤ –≤–µ—Ä—Å–∏–∏ 1.3.2

### –°–∏–º–ø—Ç–æ–º—ã:

–ò–∑ –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ:
- ‚úÖ –ú–æ–¥–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –∫—ç—à–∞
- ‚úÖ –í–µ—Å–∞ –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- ‚ùå –ó–∞—Ç–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–∞–µ—Ç SIGTERM –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

```
FatalError: `Termination signal` is detected by the operating system.
SIGTERM received by PID 1
```

### –ü—Ä–∏—á–∏–Ω–∞:

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PaddleOCR-VL –∑–∞–Ω–∏–º–∞–µ—Ç 10-15 —Å–µ–∫—É–Ω–¥ –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫. Health check –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –≤–æ–≤—Ä–µ–º—è –∏ —É–±–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ –≤ –≤–µ—Ä—Å–∏–∏ 1.3.3

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–§–æ–Ω–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:**
   - –ú–æ–¥–µ–ª—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ
   - –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ health check —Å—Ä–∞–∑—É
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫

2. **–ó–∞—â–∏—Ç–∞ –æ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤:**
   - Health check —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –≤–æ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –ï—Å–ª–∏ —Ñ–æ–Ω–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç fallback –Ω–∞ –ª–µ–Ω–∏–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é

### –ö–æ–¥:

```python
async def background_init_paddleocr():
    """–§–æ–Ω–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PaddleOCR-VL –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞"""
    global paddle_ocr
    try:
        logger.info("Background initialization of PaddleOCR-VL started...")
        # –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä —É—Å–ø–µ–ª –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
        await asyncio.sleep(2)
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å event loop
        import concurrent.futures
        loop = asyncio.get_event_loop()
        with concurrent.futures.ThreadPoolExecutor() as executor:
            await loop.run_in_executor(executor, init_paddleocr)
        logger.info("PaddleOCR-VL initialized successfully in background")
    except Exception as e:
        logger.warning(f"Background initialization failed: {e}. Will try on first request.")
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ
- ‚úÖ Health check —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ï—Å–ª–∏ —Ñ–æ–Ω–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –º–æ–¥–µ–ª—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Cloud.ru

### Health Check –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

**Startup Probe:**
- Initial Delay: 0 —Å–µ–∫—É–Ω–¥
- Period: 10 —Å–µ–∫—É–Ω–¥
- Failure Threshold: 30 (–¥–æ 5 –º–∏–Ω—É—Ç –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é)
- Success Threshold: 1

**Liveness Probe:**
- Initial Delay: 60 —Å–µ–∫—É–Ω–¥
- Period: 30 —Å–µ–∫—É–Ω–¥
- Failure Threshold: 3

**Readiness Probe:**
- Initial Delay: 30 —Å–µ–∫—É–Ω–¥
- Period: 10 —Å–µ–∫—É–Ω–¥
- Failure Threshold: 3

### –†–µ—Å—É—Ä—Å—ã:

- –ú–∏–Ω–∏–º—É–º 8GB –ø–∞–º—è—Ç–∏ (16GB —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- GPU –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã PaddleOCR-VL

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

