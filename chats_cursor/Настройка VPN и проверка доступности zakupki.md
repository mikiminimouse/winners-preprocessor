# –ê–Ω–∞–ª–∏–∑ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
_Exported on 28/11/2025 at 21:57:00 GMT+7 from Cursor (2.1.39)_

---

**User**

–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –Ω–∞—à –ø—Ä–æ—ç–∫—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç pipeline Preprocessor + pipeline Docling, –ø–æ–π–º–∏ –∫–∞–∫ –≤—Å–µ —Ä–∞–±–æ—Ç–µ—Ç –∏ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∏ —É–ª—É—á—à–∏—Ç—å.

–ú—ã –ø–∏—à–µ–º –ø—Ä–æ—ç–∫—Ç –ø–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è—Ö –≤ –≥–æ—Å–∑–∞–∫—É–ø–∫–∞—Ö.



---

title: "Docker –ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è DigitalOcean"

source: "https://chatgpt.com/c/69173e2c-e364-8322-867f-fb7bee2e0bfe"

author:

  - "[[ChatGPT]]"

published:

created: 2025-11-20

description: "ChatGPT ‚Äî –≤–∞—à —á–∞—Ç-–±–æ—Ç —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –û–±—â–∞–π—Ç–µ—Å—å —Å —Å–∞–º—ã–º –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º, —á—Ç–æ–±—ã –∏–∑—É—á–∞—Ç—å –∏–¥–µ–∏, —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∏ —É—á–∏—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ."

tags:

  - "clippings"

---

–ù—É–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ–∫–µ—Ä –ö–æ–º—É–ü–æ—Å —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏. –î–æ–∫–ª–∏–Ω–∫ –¥–ª—è DigitalOcean —Ö–æ—Å—Ç–∏–Ω–≥–∞. –û–ø–∏—à–∏ –∏ —Ä–∞–∑–±–µ—Ä–∏ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –¥–ª—è –∫–∞–∫–æ–≥–æ —à–∞–≥–∞ –∏ —Ñ–∞–∑—ã –≤ –ø–æ–¥–ø–ª–∞–Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è. –û—Ç–º–µ—Ç—å –≤—Å–µ —á–∞—Å—Ç–∏, –≥–¥–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Ia –∏–ª–∏ LLM. –û—Ç–ª–∏—á–Ω–æ. –ù–∏–∂–µ ‚Äî \*\*–µ–¥–∏–Ω—ã–π, —Ü–µ–ª—å–Ω—ã–π, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω\*\*, –∫–æ—Ç–æ—Ä—ã–π —É—á–∏—Ç—ã–≤–∞–µ—Ç: ‚úî –≤–∞—à—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞ \*\*DigitalOcean (2 vCPU, 8 GB RAM)\*\* ‚úî –Ω–∞–ª–∏—á–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞/–∏–Ω—Å—Ç–∞–Ω—Å–∞ –ø–æ–¥ \*\*AI-–º–æ–¥–µ–ª–∏ (GPU)\*\* ‚úî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏ ‚úî —Ä–æ–ª–∏ Docling (OCR ‚Üí Layout ‚Üí Tables ‚Üí JSON/MD) ‚úî —Ä–æ–ª–∏ –≤–Ω–µ—à–Ω–µ–π LLM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ) ‚úî –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –∏ chunking ‚úî —Ç–æ–ª—å–∫–æ JSON –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ + Markdown –≠—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π, –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –∏ —Ä–∞–±–æ—á–∏–π –≤–∞—Ä–∏–∞–Ω—Ç. --- # üü¶ –ì–õ–ê–í–ù–ê–Ø –ò–î–ï–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–´ üìå \*\*DigitalOcean (CPU)\*\* ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç \*–≤—Å—ë Document AI-–ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É\* ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ç–∞–±–ª–∏—Ü—ã, markdown, raw JSON ‚Äî –¥–µ–ª–∞–µ—Ç regex-–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ ‚Äî –≥–æ—Ç–æ–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è LLM (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) üìå \*\*AI-—Å–µ—Ä–≤–µ—Ä (GPU)\*\* ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è \*—Ç–æ–ª—å–∫–æ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –ø–æ –∑–∞–ø—Ä–æ—Å—É\* ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—è–∂—ë–ª—ã–µ –º–æ–¥–µ–ª–∏: LLM, Vision-LLM, AI-metadata extraction ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è \*—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏\* (fallback –∏–ª–∏ —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞) --- # üîµ –ü–ê–ô–ü–õ–ê–ô–ù –î–û–ö–£–ú–ï–ù–¢–û–û–ë–†–ê–ë–û–¢–ö–ò (–§–ê–ö–¢–ò–ß–ï–°–ö–ò–ô) ## –≠—Ç–∞–ø 0. –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ \*\*PDF (—Å–∫–∞–Ω—ã)\*\*: 1‚Äì5 —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–∞–∫–ª–æ–Ω 5‚Äì10%, —Ç–∞–±–ª–∏—Ü—ã, —Ç–µ–∫—Å—Ç –ø–æ –ì–û–°-–∑–∞–∫—É–ø–∫–∞–º –†–§. --- # üü© –≠–¢–ê–ü 1. DigitalOcean —Å–µ—Ä–≤–µ—Ä (2 vCPU / 8GB RAM) \*\*–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ.\*\* ### 1.1. –û—á–∏—Å—Ç–∫–∞/–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è PDF \* –ø—Ä–æ–≤–µ—Ä–∫–∞ PDF: —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π –µ—Å—Ç—å/–Ω–µ—Ç \* deskew (–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ) \* –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü \* –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è image ‚Üí PDF (–µ—Å–ª–∏ –Ω–∞–¥–æ) Docling –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—á–µ—Ä–µ–∑ PDFium / ImageMagick / –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä). --- # üü© –≠–¢–ê–ü 2. OCR (Docling + —Ä—É—Å/–∞–Ω–≥–ª, CPU-—Ä–µ–∂–∏–º) ON YOUR DIGITALOCEAN SERVER.

```

OCRConfig(language="rus+eng", deskew=True)

```

OCR: \* —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU (Tesseract) \* —Å—Ç–∞–±–∏–ª—å–Ω–æ \* –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º GPU-OCR, –Ω–æ 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Üí –ª–µ–≥–∫–æ \*\*–°–∫–æ—Ä–æ—Å—Ç—å:\*\* 1‚Äì2 —Å–µ–∫/—Å—Ç—Ä. 100 —Ñ–∞–π–ª–æ–≤ √ó 2 —Å—Ç—Ä. = 3‚Äì6 –º–∏–Ω—É—Ç. --- # üü© –≠–¢–ê–ü 3. Layout-–∞–Ω–∞–ª–∏–∑ (Docling Vision Models, CPU) \*\*–ù–∞ DigitalOcean —Å–µ—Ä–≤–µ—Ä–µ.\*\* Docling –∑–∞–ø—É—Å–∫–∞–µ—Ç Vision Transformer –¥–ª—è: \* –ø–æ–∏—Å–∫–∞ –±–ª–æ–∫–æ–≤ —Ç–µ–∫—Å—Ç–∞ \* —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ \* –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ \* –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü \* reading order \*\*–°–∫–æ—Ä–æ—Å—Ç—å:\*\* 0.5‚Äì1.5 —Å–µ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ù–∞ 100 —Ñ–∞–π–ª–æ–≤ ‚Äî –æ—Ç–ª–∏—á–Ω–æ. \*\*–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU?\*\* Docling Vision Models ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ. --- # üü© –≠–¢–ê–ü 4. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü (TableFormer / Docling Table AI) \*\*–ù–∞ DigitalOcean —Å–µ—Ä–≤–µ—Ä–µ (CPU).\*\* Docling –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: \* –Ω–∞—Ö–æ–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—ã \* —Ä–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —è—á–µ–π–∫–∏ \* –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ç–∫—É (rows, columns) \* —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ JSON –°–∫–æ—Ä–æ—Å—Ç—å: 0.5‚Äì1 —Å–µ–∫ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É –û–ø—è—Ç—å –∂–µ 100 —Ñ–∞–π–ª–æ–≤ ‚Üí –±–µ–∑ –ø—Ä–æ–±–ª–µ–º. --- # üü© –≠–¢–ê–ü 5. –°–±–æ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ Docling —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç:

```

DoclingDocument {

    pages,

    tables,

    blocks,

    coords,

    raw_text,

    semantic_order

}

```

–ò —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç: ### ‚úî Lossless JSON:

```

document.export_to_dict()

```

\### ‚úî Markdown:

```

MarkdownExporter()

```

–û–±–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ DigitalOcean –±–µ–∑ –ø—Ä–æ–±–ª–µ–º. --- # üü© –≠–¢–ê–ü 6. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ AI) \*\*–ù–∞ DigitalOcean —Å–µ—Ä–≤–µ—Ä–µ.\*\* –≠—Ç–æ: \* —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è \* heuristics \* –ª–æ–≥–∏–∫–∞ \* –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –ø–æ —à–∞–±–ª–æ–Ω–∞–º –í–∞—à–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –ø–æ–¥ REGEX-—ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—é: ‚úî –Ω–æ–º–µ—Ä –ø—Ä–æ—Ü–µ–¥—É—Ä—ã ‚úî –¥–∞—Ç—ã ‚úî –ø–æ–±–µ–¥–∏—Ç–µ–ª—å ‚úî –ò–ù–ù / –ö–ü–ü ‚úî —Å—É–º–º—ã ‚úî —Å–æ—Å—Ç–∞–≤ –∫–æ–º–∏—Å—Å–∏–∏ ‚úî –ø—Ä–µ–¥–º–µ—Ç –∑–∞–∫—É–ø–∫–∏ –î–ª—è 90% PDF —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç. \*\*–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ REGEX-—ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∞:\*\* \* –Ω–∏–∫–∞–∫–∏—Ö –∑–∞—Ç—Ä–∞—Ç –Ω–∞ LLM \* —Å–∫–æ—Ä–æ—Å—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è \* —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω \* –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–∞—Ç—á–∞ 3000‚Äì5000 —Ñ–∞–π–ª–æ–≤ \* –Ω–∞ 100 —Ñ–∞–π–ª–æ–≤ ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç --- # üü® –≠–¢–ê–ü 7 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π). AI-extraction (LLM) \*\*–ï—Å–ª–∏ —Ä–µ–≥—É–ª—è—Ä–∫–∏ –Ω–µ –Ω–∞—à–ª–∏ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è.\*\* –≠—Ç–æ—Ç —ç—Ç–∞–ø –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ DigitalOcean. –î–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å: ‚úî \*\*GPU-—Å–µ—Ä–≤–µ—Ä (RunPod / Vast.ai / HelioHost / DigitalOcean GPU)\*\* ‚úî \*\*Qwen2.5-7B-Instruct\*\*, \*\*Mistral 7B\*\*, \*\*Llama 3.1 8B\*\* –í—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ —Å—ã—Ä–æ–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞:

```

POST /extract-ai

{

    "text": "–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞",

    "fields": [ "–ø–æ–±–µ–¥–∏—Ç–µ–ª—å", "–ò–ù–ù", ... ]

}

```

–ò –ø–æ–ª—É—á–∞–µ—Ç–µ JSON —Å –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏. –≠—Ç–æ—Ç —Ä–µ–∂–∏–º: \* —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É \* —É—Å–∫–æ—Ä—è–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–ª–µ–π \* –∏—Å–∫–ª—é—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU-–∏–Ω—Å—Ç–∞–Ω—Å–∞ –ø–æ–¥ —Ç—è–∂—ë–ª—ã–µ LLM --- # üü• –≠–¢–ê–ü 8. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –í—ã –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ: \* chunking \* embeddings \* vector DB \* RAG –ü–æ—ç—Ç–æ–º—É DigitalOcean —Å–µ—Ä–≤–µ—Ä –µ—â—ë –±–æ–ª—å—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç. --- # üü¶ –ì–õ–ê–í–ù–ê–Ø –†–û–õ–¨ DIGITALOCEAN –°–ï–†–í–ï–†–ê ### ‚úî –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤–µ—Å—å \*\*Document Processing\*\*: \*\*OCR ‚Üí Layout ‚Üí Tables ‚Üí Markdown ‚Üí JSON ‚Üí Metadata(REGEX)\*\* –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. ### ‚úî –ù–ï –≤—ã–ø–æ–ª–Ω—è—Ç—å: ‚Äî –±–æ–ª—å—à–∏–µ LLM ‚Äî Vision-LLM ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏ --- # üü© –ì–õ–ê–í–ù–ê–Ø –†–û–õ–¨ GPU-AI –°–ï–†–í–ï–†–ê –û–Ω –Ω—É–∂–µ–Ω \*\*—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏\*\*: \* –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö \* –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ \* –º–Ω–æ–≥–æ —Ä—É—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ \* –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM –∫–∞–∫ fallback –ù–∞ DigitalOcean —Å–µ—Ä–≤–µ—Ä–µ —Ç–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø–æ–¥–Ω–∏–º—É—Ç—Å—è. --- # üü¶ –ò–¢–û–ì–û–í–ê–Ø –°–•–ï–ú–ê (FLOW)

```

+-------------------------+

                   |   DigitalOcean CPU      |

                   |   2 vCPU / 8 GB RAM     |

                   +------------+------------+

                                |

                                v

                    1. PDF Preprocessing

                    2. OCR (rus+eng)

                    3. Layout AI (docling)

                    4. Table extraction

                    5. Full JSON export

                    6. Markdown export

                    7. Regex metadata extraction

                            |

                            |   –µ—Å–ª–∏ –≤—Å—ë –Ω–∞–π–¥–µ–Ω–æ ‚Üí STOP

                            |

                   MISS     v

                   +-------------------------+

                   |    GPU AI Server        |

                   | (RunPod / DO / Vast.ai) |

                   +-----------+-------------+

                               |

                               v

                         LLM metadata extraction

                               |

                               v

                          Final metadata JSON

```

\--- # üü© –ß–¢–û –≠–¢–û –î–ê–Å–¢ ### ‚úî –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—à—ë–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ CPU-–∏–Ω—Å—Ç–∞–Ω—Å –æ—Ç DigitalOcean —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Docling, –∏ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. ### ‚úî –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ GPU, –µ—Å–ª–∏ —Ä–µ–≥—É–ª—è—Ä–∫–∏ –ø–æ–∫—Ä—ã–≤–∞—é—Ç 80‚Äì90% PDF ### ‚úî GPU –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ—á–µ—á–Ω–æ (—ç–∫–æ–Ω–æ–º–∏—è 70‚Äì90% –±—é–¥–∂–µ—Ç–∞) ### ‚úî –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ: \* CPU-–∏–Ω—Å—Ç–∞–Ω—Å—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—á–∫–∞–º–∏ –¥–ª—è batch-parsing \* LLM-—Å–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞—ë—Ç—Å—è –æ–¥–Ω–∏–º –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ API --- # üü¶ –•–æ—á–µ—à—å ‚Äî —Å–æ—Å—Ç–∞–≤–ª—é: ‚úî Docker-compose —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏: \* docling-api \* docling-worker \* ai-worker (GPU) ‚úî Terraform-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É DigitalOcean + RunPod GPU ‚úî –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω, –∫–æ—Ç–æ—Ä—ã–π –∑–∞ 30‚Äì50 –º–∏–Ω—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç 3000‚Äì5000 PDF --- –ì–æ—Ç–æ–≤ –ø–µ—Ä–µ–π—Ç–∏ –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –≤ –≤–∏–¥–µ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏–ª–∏ terraform?



---



–û—Ç–ª–∏—á–Ω–æ, —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –µ–≥–æ –≤ **—Ä–∞–±–æ—á—É—é Docker-–∫–æ–º–ø–æ–Ω–æ–≤–∫—É (docker-compose)**, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç—Ä–∞–∂–∞–µ—Ç –≤–µ—Å—å flow —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º DigitalOcean CPU –∏ GPU-—Å–µ—Ä–≤–∏—Å–∞.



–ù–∏–∂–µ —è —Ä–∞–∑–±–µ—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Ö —Ä–æ–ª–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —à–∞–≥–∞–º–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞, —Å –ø–æ–º–µ—Ç–∫–æ–π, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è AI / LLM.



---



## üü¶ Docker-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞



## 1Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã



| –°–µ—Ä–≤–∏—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –ù–∞ –∫–∞–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç AI / LLM |

| --- | --- | --- | --- |

| `docling-api` | –û—Å–Ω–æ–≤–Ω–æ–π API –¥–ª—è –ø—Ä–∏—ë–º–∞ PDF, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OCR, Layout, Tables, JSON/MD | DigitalOcean CPU | Vision AI (Docling, –Ω–æ CPU-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è) |

| `docling-worker` | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á: Preprocessing ‚Üí OCR ‚Üí Layout ‚Üí Tables ‚Üí Markdown/JSON ‚Üí REGEX metadata | DigitalOcean CPU | –ß–∞—Å—Ç–∏—á–Ω–æ: Vision AI, –Ω–æ CPU-–º–æ–¥–µ–ª–∏ |

| `ai-worker` | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è LLM-extraction (fallback) | GPU-—Å–µ—Ä–≤–µ—Ä | –î–∞, LLM / Generative AI |

| `redis` | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –º–µ–∂–¥—É API –∏ worker | –õ—é–±–æ–π | –ù–µ—Ç |

| `nginx` | –ü—Ä–æ–∫—Å–∏, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞, –≤–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã | DigitalOcean CPU | –ù–µ—Ç |



---



## 2Ô∏è‚É£ –î–æ–∫–µ—Ä-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ —à–∞–≥–∞–º –ø–∞–π–ø–ª–∞–π–Ω–∞



| –≠—Ç–∞–ø | –°–µ—Ä–≤–∏—Å | –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |

| --- | --- | --- | --- |

| 0\. –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | docling-api | `docling/api:latest` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç PDF |

| 1\. PDF Preprocessing | docling-worker | `docling/worker:latest` | Deskew, image‚ÜíPDF |

| 2\. OCR | docling-worker | `docling/worker:latest` | Tesseract CPU (—Ä—É—Å+–∞–Ω–≥–ª) |

| 3\. Layout | docling-worker | `docling/worker:latest` | Vision Transformer CPU |

| 4\. Table extraction | docling-worker | `docling/worker:latest` | TableFormer CPU |

| 5\. JSON/Markdown export | docling-worker | `docling/worker:latest` | Lossless JSON + Markdown |

| 6\. Metadata extraction (regex) | docling-worker | `docling/worker:latest` | REGEX, heuristics |

| 7\. AI/LLM fallback | ai-worker | `llm/worker:latest` | GPU + LLM, –ø–æ –∑–∞–ø—Ä–æ—Å—É |



---



## 3Ô∏è‚É£ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã docker-compose



---



## 4Ô∏è‚É£ –†–∞–∑–±–æ—Ä –ø–æ —Ñ–∞–∑–∞–º –ø–æ–¥–ø–ª–∞–Ω–∞



| –ü–æ–¥–ø–ª–∞–Ω / –§–∞–∑–∞ | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |

| --- | --- | --- |

| ETL + Preprocessing | docling-worker | –ü–æ–ª–Ω–æ—Å—Ç—å—é CPU, DigitalOcean 2 vCPU –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ |

| OCR | docling-worker | Tesseract, –±–µ–∑ GPU |

| Layout & Tables | docling-worker | Docling Vision CPU-–º–æ–¥–µ–ª–∏ |

| Export JSON/MD | docling-worker | –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ |

| Metadata regex | docling-worker | –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–∫–∏ |

| AI fallback | ai-worker | GPU —Å–µ—Ä–≤–µ—Ä, —Ç–æ–ª—å–∫–æ –ø–æ –≤—ã–∑–æ–≤—É |

| API | docling-api | –ü—Ä–æ–∫—Å–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ |

| –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á | redis | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ pipeline |



---



## 5Ô∏è‚É£ –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AI / LLM



- **Docling CPU-–º–æ–¥–µ–ª–∏** ‚Äî Layout, Table, Vision (CPU, –ª–µ–≥–∫–∏–µ –º–æ–¥–µ–ª–∏)

- **LLM** ‚Äî AI-fallback, —Å–ª–æ–∂–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

- **REGEX / heuristics** ‚Äî –Ω–µ AI, –Ω–æ —á–∞—Å—Ç—å –ø–∞–π–ø–ª–∞–π–Ω–∞



---



## 6Ô∏è‚É£ DigitalOcean vs GPU Server



| –°—Ü–µ–Ω–∞—Ä–∏–π | –°–µ—Ä–≤–µ—Ä | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –ü–æ—è—Å–Ω–µ–Ω–∏–µ |

| --- | --- | --- | --- |

| –û—Å–Ω–æ–≤–Ω–æ–π –±–∞—Ç—á | DigitalOcean CPU | docling-api + docling-worker | –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º 3000‚Äì5000 PDF, –±–µ–∑ GPU |

| AI fallback | GPU —Å–µ—Ä–≤–µ—Ä | ai-worker | –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ REGEX/CPU extraction –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ |



---



üí° –ò—Ç–æ–≥: –ø–∞–π–ø–ª–∞–π–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–µ–Ω –Ω–∞ DigitalOcean –¥–ª—è 80‚Äì90% –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, GPU –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É, —ç–∫–æ–Ω–æ–º–∏–º —Ä–µ—Å—É—Ä—Å—ã –∏ –±—é–¥–∂–µ—Ç.



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –ø—Ä—è–º–æ **—Å–µ–π—á–∞—Å –Ω–∞–ø–∏—Å–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã–π docker-compose**, —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º `DigitalOcean CPU` –∏ `GPU AI`, —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, –æ—á–µ—Ä–µ–¥—å—é –∏ restart policy, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –Ω–∞ Droplet + GPU-–∏–Ω—Å—Ç–∞–Ω—Å–µ.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?



---



–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º, –Ω–∞—Å–∫–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º –≤ –Ω–∞—à–µ–º —Å—Ç–µ–∫–µ Docker Compose –∫–æ–º–ø–æ–Ω–µ–Ω—Ç RADIS, —Ç–∞–∫ –∫–∞–∫ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π pipeline –¥–ª—è 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ù—É–∂–µ–Ω –ª–∏ RADIS –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏, –∏–ª–∏ –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ –Ω–µ–≥–æ? –ù–∞—Å–∫–æ–ª—å–∫–æ —É–ø—Ä–æ—â–∞–µ—Ç—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞ —Å—á–µ—Ç –µ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è?–ï—Å–ª–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–∞–µ—Ç—Å—è –Ω–µ—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ, –∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π –±–æ–ª—å—à–∏—Ö –Ω–µ –Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–¥–∏—Å–∞, –ø—Ä–∏ —ç—Ç–æ–º –µ–≥–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –≤–∞–∂–Ω–∞ –¥–ª—è –Ω–∞—Å, –æ—Å—Ç–∞–≤–ª—è–µ–º



---



–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–¥—Ä–æ–±–Ω–æ.



---



## 1Ô∏è‚É£ –†–æ–ª—å Redis –≤ –Ω–∞—à–µ–º –ø–∞–π–ø–ª–∞–π–Ω–µ



–í —Ç–µ–∫—É—â–µ–º `docker-compose` Redis –≤—ã–ø–æ–ª–Ω—è–µ—Ç **—Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∑–∞–¥–∞—á—É**:



- **–æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á** –º–µ–∂–¥—É `docling-api` –∏ `docling-worker`.

- API —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å, worker –∑–∞–±–∏—Ä–∞–µ—Ç –∏—Ö –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç: OCR ‚Üí Layout ‚Üí Tables ‚Üí JSON/MD ‚Üí metadata.

- Redis –Ω—É–∂–µ–Ω –¥–ª—è **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ, –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–µ—á–Ω–æ–≥–æ –∏–ª–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**.



–ï—Å–ª–∏ –º—ã –≥–æ–≤–æ—Ä–∏–º –æ **—Ç–µ—Å—Ç–æ–≤–æ–º –ø—Ä–æ–≥–æ–Ω–µ 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**, —Ç–æ:



- –ó–∞–¥–∞—á–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è **–æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –Ω–∞ CPU-–∏–Ω—Å—Ç–∞–Ω—Å–µ** (2 vCPU, 8 GB RAM).

- –û—á–µ—Ä–µ–¥—å –Ω–µ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, worker –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ **—Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è**.

- Redis –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ/—Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ ‚Äî –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã**, worker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–º –∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, —á—Ç–æ –∏ API, –∏–ª–∏ API —Å—Ä–∞–∑—É –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ docling –Ω–∞–ø—Ä—è–º—É—é.



---



## 2Ô∏è‚É£ –£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–µ–∑ Redis



| –ë–µ–∑ Redis | –° Redis |

| --- | --- |

| –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ ‚Üí –º–µ–Ω—å—à–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ | +1 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |

| –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å URL, –ø–æ—Ä—Ç—ã, retry policy –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ | –ù—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ worker ‚Üí Redis |

| Worker –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é ‚Üí –º–µ–Ω—å—à–µ latency –∏ –ø—Ä–æ—â–µ –ª–æ–∫–∞–ª—å–Ω–æ | –û—á–µ—Ä–µ–¥—å ‚Üí –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–∞—Ç—á–µ–π 1000+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |

| –ú–µ–Ω—å—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ç–µ—Å—Ç–µ –∏–ª–∏ –æ—Ç–ª–∞–¥–∫–µ | –ë–æ–ª–µ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ, —É—Å—Ç–æ–π—á–∏–≤–æ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ |



**–í—ã–≤–æ–¥:** –¥–ª—è **—Ç–µ—Å—Ç–∞ 100 PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ Redis –º–æ–∂–Ω–æ —Å–º–µ–ª–æ —É–±—Ä–∞—Ç—å**, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–∞–µ—Ç—Å—è –∑–∞–º–µ—Ç–Ω–æ (–Ω–∞ 1 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –º–µ–Ω—å—à–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –º–µ–Ω—å—à–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π).



---



## 3Ô∏è‚É£ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å



- Redis –Ω–µ —Å–ª–æ–∂–µ–Ω –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.

- –î–ª—è –æ–ø—ã—Ç–Ω–æ–≥–æ DevOps-–∫–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äî —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å.

- –î–ª—è —Ç–µ—Å—Ç–∞ –æ–Ω —Å–∫–æ—Ä–µ–µ **—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ–≤–µ—Ä—Ö–µ–¥**, –∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ ‚Äî –ø–æ—á—Ç–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π.



---



## 4Ô∏è‚É£ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è



- **–¢–µ—Å—Ç–æ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** ‚Üí –∏—Å–∫–ª—é—á–∞–µ–º Redis, –∑–∞–ø—É—Å–∫–∞–µ–º worker —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

- **–ü—Ä–æ–¥–∞–∫—à–Ω / –±–∞—Ç—á–∏ 3000‚Äì5000 PDF** ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Redis –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.



–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º: **–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–∞–µ—Ç—Å—è –∑–∞–º–µ—Ç–Ω–æ**, –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π –º–∏–Ω–∏–º—É–º —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å Redis –¥–ª—è –º–∞—Å—à—Ç–∞–±–∞ –æ—Å—Ç–∞—ë—Ç—Å—è.



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å **—É–ø—Ä–æ—â—ë–Ω–Ω—É—é docker-compose –≤–µ—Ä—Å–∏—é –±–µ–∑ Redis**, –≥–¥–µ API –∏ worker —Ä–∞–±–æ—Ç–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?



---



–ü—Ä–∏ —ç—Ç–æ–º –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Docklink –ø–æ IP –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Ubuntu. –ù—É–∂–µ–Ω –ª–∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤ –ø–æ IP. –¢–∞–∫–∂–µ –º—ã –ø–ª–∞–Ω–∏—Ä—É–µ–º —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É Docklink –¥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è.doc –∏ Microsoft.docs —Ñ–∞–π–ª–æ–≤. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ pipeline –∏–ª–∏ –¥–æ–±–∞–≤—è—Ç—Å—è –µ—â–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Dockling



---



–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ –ø–æ—Ä—è–¥–∫—É, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Ç–≤–æ–∏—Ö –Ω–æ–≤—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö.



---



## 1Ô∏è‚É£ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ IP –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–∏ Ubuntu



–ï—Å–ª–∏ —Ç—ã –ø–ª–∞–Ω–∏—Ä—É–µ—à—å, —á—Ç–æ **Dockling / Docling API –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å PDF (–∏–ª–∏ –¥—Ä—É–≥–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã) –Ω–∞–ø—Ä—è–º—É—é –ø–æ –ø—É—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**, —Ç–æ:



- **–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤ –ø–æ IP –Ω–µ –Ω—É–∂–µ–Ω**, –ø–æ—Ç–æ–º—É —á—Ç–æ API –∏ worker —É–∂–µ –∏–º–µ—é—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.

- –í `docker-compose` —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ **volume**:

- –¢–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–¥–∏—Ç `/app/input` –∏ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–∏.

- –°–µ—Ç—å / IP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å —Å –¥—Ä—É–≥–æ–≥–æ —Ö–æ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ HTTP –∏–ª–∏ SMB), —á—Ç–æ –≤ —Ç–≤–æ—ë–º —Å–ª—É—á–∞–µ **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è**, –ø–æ–∫–∞ –≤—Å—ë –ª–æ–∫–∞–ª—å–Ω–æ.



**–í—ã–≤–æ–¥:** –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–∏ Docker –∏–º–ø–æ—Ä—Ç –ø–æ IP –º–æ–∂–Ω–æ –Ω–µ –¥–µ–ª–∞—Ç—å ‚Äî —ç—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç pipeline.



---



## 2Ô∏è‚É£ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã Dockling –Ω–∞.doc –∏.docx



–ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å **Microsoft Word —Ñ–∞–π–ª—ã**, pipeline –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:



| –≠—Ç–∞–ø | –ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è |

| --- | --- |

| 0\. –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –î–æ–∫—É–º–µ–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å `.pdf`, `.doc`, `.docx` |

| 1\. Preprocessing | –î–ª—è Word —Ñ–∞–π–ª–æ–≤ –Ω—É–∂–µ–Ω **–∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤ PDF –∏–ª–∏ —Ç–µ–∫—Å—Ç**. Dockling —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–µ —É–º–µ–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å DOC/DOCX. –ü—Ä–∏–¥—ë—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:   ‚Ä¢ `python-docx` –¥–ª—è.docx   ‚Ä¢ LibreOffice CLI (`soffice --convert-to pdf`) –¥–ª—è —Å—Ç–∞—Ä—ã—Ö.doc |

| 2\. OCR | OCR –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è PDF —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏. –î–ª—è.doc/.docx —Ç–µ–∫—Å—Ç –æ–±—ã—á–Ω–æ —É–∂–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é. |

| 3\. Layout / Tables | –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –∏–∑–≤–ª–µ—á—ë–Ω –≤ —Ñ–æ—Ä–º–∞—Ç, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å Docling (–Ω–∞–ø—Ä–∏–º–µ—Ä, PDF ‚Üí internal representation –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é Markdown/JSON). |

| 4\. JSON/Markdown export | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |

| 5\. Metadata extraction | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, REGEX –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —Ç–µ–∫—Å—Ç—É. |

| 6\. AI fallback | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ Word —Ñ–∞–π–ª–æ–≤. |



**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Dockling**:



- **–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä DOC/DOCX ‚Üí —Ç–µ–∫—Å—Ç/PDF**.

- –í –¥–æ–∫–µ—Ä-–∫–æ–º–ø–æ–∑–µ –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ worker, –∫–æ—Ç–æ—Ä—ã–π **–ø–µ—Ä–µ–¥–∞–µ—Ç Word-—Ñ–∞–π–ª—ã –≤ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä**, –∞ –∑–∞—Ç–µ–º –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π pipeline.



–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏:



---



## 3Ô∏è‚É£ –í—ã–≤–æ–¥—ã



1. **–ò–º–ø–æ—Ä—Ç –ø–æ IP –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω**, –µ—Å–ª–∏ Dockling –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–µ —á–µ—Ä–µ–∑ volume.

2. –î–ª—è `.doc` –∏ `.docx` **pipeline —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è**, –Ω–æ –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è:

- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç **–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ Word ‚Üí —Ç–µ–∫—Å—Ç/PDF**.

- OCR –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö Word-—Ñ–∞–π–ª–æ–≤.

- –û—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è: Layout ‚Üí Tables ‚Üí JSON ‚Üí Metadata.

1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ–º–Ω–æ–≥–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è (–∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä Word), –Ω–æ **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç GPU –∏–ª–∏ LLM**, –ø–æ–∫–∞ –º—ã —Ç–æ–ª—å–∫–æ –∏–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç.



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É —Å—Ä–∞–∑—É **–ø–æ–∫–∞–∑–∞—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π docker-compose —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π DOC/DOCX**, –≤–∫–ª—é—á–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –∏ —É—Å–ª–æ–≤–Ω—ã–π workflow –±–µ–∑ OCR –¥–ª—è Word.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —Å–¥–µ–ª–∞–ª —ç—Ç–æ?



---



–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ö–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–æ—Ä–¥–æ–≤—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ü–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å—Å–∫–∞–∂–∏, –∫–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ, –≤ –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω–∞ –∫–∞–∫–æ–º —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã—Ö. –¢–∞–∫–∂–µ –æ–±–æ–∑–Ω–∞—á—å, –≥–¥–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Ia, –∏ –¥–ª—è —á–µ–≥–æ –Ω–∞–º –Ω–∞ –∫–∞–∂–¥–æ–º –∏–∑ —ç—Ç–∞–ø–æ–≤ —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π JSON. –ó–∞—á–µ–º –Ω–∞–º JSON –≤ —ç—Ç–æ–º –ø–∞–π–ø–ª–∞–π–Ω–µ? –¢–∞–∫–∂–µ –∑–∞—á–µ–º –Ω–∞–º JSON –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ Docs, TextExtraction, DocklinkPipeline, SkipOCR, LayoutTable.json? –î–ª—è —á–µ–≥–æ –Ω–∞–º JSON –Ω–µ–æ–±—Ö–æ–¥–∏–º –≤ —ç—Ç–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏? –†–∞—Å–ø–∏—à–∏ –ø–æ–¥—Ä–æ–±–Ω–æ, –∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ Docklink, –∫–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ, –∏–ª–∏ –≤ –∫–∞–∫–æ–º –≤–∏–¥–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±–µ—Ä–µ—Ç –Ω–∞ –≤—Ö–æ–¥–µ, –∏ –≤ –∫–∞–∫–æ–º –≤–∏–¥–µ —á—Ç–æ –æ—Ç–¥–∞–µ—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É–∑–ª—É.



2/2



---



–û—Ç–ª–∏—á–Ω–æ, –¥–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º **–ø–æ–ª–Ω—ã–π –∏ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ø–∞–π–ø–ª–∞–π–Ω–∞**, –≤–∫–ª—é—á–∞—é—â–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∫—É Word-—Ñ–∞–π–ª–æ–≤ (`.doc` / `.docx`) –≤–º–µ—Å—Ç–µ —Å PDF, —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–æ–ª–∏ JSON. –Ø –±—É–¥—É —Å—Ç—Ä–æ–≥–æ –ø–æ —à–∞–≥–∞–º, —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI –∏ —Å–º—ã—Å–ª–∞ JSON –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ.



---



## üü¶ –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ Docklink –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Word



---



## 1Ô∏è‚É£ DocsLoader (Input Stage)



**–ó–∞–¥–∞—á–∞:**



- –ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–∏ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ API.

- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —Ñ–∞–π–ª–∞: PDF –∏–ª–∏ Word.



**–í—Ö–æ–¥:**



- `.pdf`, `.doc`, `.docx` (—Ñ–∞–π–ª—ã –Ω–∞ –¥–∏—Å–∫–µ, —á–µ—Ä–µ–∑ volume –≤ Docker).



**–í—ã—Ö–æ–¥:**



- –î–ª—è PDF ‚Üí –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π PDF –≤ pipeline

- –î–ª—è Word ‚Üí DOCX –æ–±—ä–µ–∫—Ç (Python `docx.Document`)



**JSON –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ:**



- **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π JSON –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**, –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã.



---



## 2Ô∏è‚É£ TextExtraction / Word2Text



**–ó–∞–¥–∞—á–∞:**



- –ò–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç –∏–∑ —Ñ–∞–π–ª–æ–≤:



| –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ö–∞–∫ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OCR? |

| --- | --- | --- |

| PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º | –Ω–∞–ø—Ä—è–º—É—é —á–∏—Ç–∞–µ–º —Ç–µ–∫—Å—Ç | –ù–µ—Ç |

| PDF —Å–∫–∞–Ω | Tesseract OCR (CPU) | –î–∞ |

| DOCX / DOC | `python-docx` –∏–ª–∏ LibreOffice CLI ‚Üí —Ç–µ–∫—Å—Ç | –ù–µ—Ç |



**–í—Ö–æ–¥:**



- PDF / DOCX –æ–±—ä–µ–∫—Ç—ã



**–í—ã—Ö–æ–¥:**



- –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞

- –î–ª—è PDF —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ ‚Üí –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí OCR ‚Üí —Ç–µ–∫—Å—Ç



**JSON:**



- –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±—ä–µ–∫—Ç:



**–ó–∞—á–µ–º JSON –∑–¥–µ—Å—å:**



- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —ç—Ç–∞–ø–æ–≤ –ø–∞–π–ø–ª–∞–π–Ω–∞, —á—Ç–æ–±—ã **DocklinkPipeline –º–æ–≥ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –µ–¥–∏–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º** –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞.



**AI:**



- OCR –Ω–∞ CPU ‚Äî –Ω–µ LLM, –Ω–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ Docling.



---



## 3Ô∏è‚É£ DocklinkPipeline



–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã:



- SkipOCR ‚Üí Layout ‚Üí Table Extraction ‚Üí JSON/Markdown export



**–í—Ö–æ–¥:**



- JSON —Å —Ç–µ–∫—Å—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞, –ª–∏–±–æ OCR-—Ä–µ–∑—É–ª—å—Ç–∞—Ç.



---



### 3.1 SkipOCR (–¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö DOC/DOCX)



**–ó–∞–¥–∞—á–∞:**



- –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å OCR, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —É–∂–µ –∏–∑–≤–ª–µ—á—ë–Ω.

- –≠–∫–æ–Ω–æ–º–∏–º —Ä–µ—Å—É—Ä—Å—ã CPU.



**–í—Ö–æ–¥:** JSON —Å –ø–æ–ª–µ–º `text`  

**–í—ã—Ö–æ–¥:** JSON —Å —Ç–µ–º –∂–µ —Ç–µ–∫—Å—Ç–æ–º, –ø–æ–º–µ—á–µ–Ω–Ω—ã–π –∫–∞–∫ `ocr_skipped: true`



**AI:** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è



**JSON:**



- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤.



---



### 3.2 OCR (–¥–ª—è PDF —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏)



**–ó–∞–¥–∞—á–∞:**



- –ü—Ä–∏–º–µ–Ω—è–µ–º Tesseract CPU –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü PDF.



**–í—Ö–æ–¥:** PDF —Å—Ç—Ä–∞–Ω–∏—Ü—ã (image layer)  

**–í—ã—Ö–æ–¥:** JSON —Å —Ç–µ–∫—Å—Ç–æ–º –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã



**AI:** CPU OCR (–Ω–µ LLM)  

**JSON:**



- –£–¥–æ–±–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å **—Ç–µ–∫—Å—Ç –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º**, —á—Ç–æ–±—ã Layout –∏ TableExtraction –∑–Ω–∞–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.



---



### 3.3 Layout Analysis



**–ó–∞–¥–∞—á–∞:**



- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏, reading order, –ø–æ–∑–∏—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü.



**–í—Ö–æ–¥:** JSON —Å —Ç–µ–∫—Å—Ç–æ–º (OCR/TextExtraction)  

**–í—ã—Ö–æ–¥:** JSON —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –±–ª–æ–∫–æ–≤ –∏ –±–ª–æ–∫–∞–º–∏ —Ç–µ–∫—Å—Ç–∞



**AI:** Docling Vision CPU-–º–æ–¥–µ–ª—å  

**–ó–∞—á–µ–º JSON:**



- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ–º –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ –±–ª–æ–∫–∞–º, —á—Ç–æ–±—ã **—Ç–∞–±–ª–∏—Ü—ã –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–Ω–∞–ª–∏, –≥–¥–µ –∏—Å–∫–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é**.



---



### 3.4 Table Extraction



**–ó–∞–¥–∞—á–∞:**



- –ù–∞–π—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã, —Ä–∞–∑–±–∏—Ç—å –Ω–∞ —Å—Ç—Ä–æ–∫–∏/—Å—Ç–æ–ª–±—Ü—ã, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ç–∫—É.



**–í—Ö–æ–¥:** JSON —Å Layout –±–ª–æ–∫–∞–º–∏  

**–í—ã—Ö–æ–¥:** JSON —Ç–∞–±–ª–∏—Ü



**AI:** TableFormer CPU-–º–æ–¥–µ–ª—å  

**JSON:**



- –¢–∞–±–ª–∏—Ü—ã —É–¥–æ–±–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–ª—é—á–µ JSON –¥–ª—è **—Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –∏ AI –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**.



---



### 3.5 JSON / Markdown Export



**–ó–∞–¥–∞—á–∞:**



- –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å **–µ–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞**, –≤–∫–ª—é—á–∞—é—â–∏–π —Ç–µ–∫—Å—Ç, —Ç–∞–±–ª–∏—Ü—ã, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.



**–í—Ö–æ–¥:** JSON —Å Layout –∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏  

**–í—ã—Ö–æ–¥:**



- `full_document.json` (–≤—Å–µ –±–ª–æ–∫–∏ + —Ç–∞–±–ª–∏—Ü—ã)

- `document.md` (—á–∏—Ç–∞–µ–º—ã–π Markdown)



**AI:** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è  

**–ó–∞—á–µ–º JSON:**



- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —ç—Ç–∞–ø–æ–≤**, –ª–µ–≥–∫–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å, –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –ø–æ API, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–∫–∞–º–∏ –∏–ª–∏ LLM.



---



## 4Ô∏è‚É£ Metadata Extraction (Regex / Heuristics)



**–ó–∞–¥–∞—á–∞:**



- –ò–∑–≤–ª–µ—á—å –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è (–ò–ù–ù, —Å—É–º–º—ã, –ø–æ–±–µ–¥–∏—Ç–µ–ª—å, –¥–∞—Ç—ã, –ø—Ä–µ–¥–º–µ—Ç –∑–∞–∫—É–ø–∫–∏)



**–í—Ö–æ–¥:** JSON –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞ (`full_document.json`)  

**–í—ã—Ö–æ–¥:** JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏



**AI:** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø–æ–∫–∞ —Ä–µ–≥—É–ª—è—Ä–∫–∏ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –ø–æ–ª—è  

**–ó–∞—á–µ–º JSON:**



- –õ–µ–≥–∫–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–ª—å—à–µ, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –±–∞–∑–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è AI fallback.



---



## 5Ô∏è‚É£ Optional AI/LLM Extraction



**–ó–∞–¥–∞—á–∞:**



- –ï—Å–ª–∏ —Ä–µ–≥—É–ª—è—Ä–∫–∏ –Ω–µ –Ω–∞—à–ª–∏ –ø–æ–ª—è ‚Üí –≤—ã–∑—ã–≤–∞–µ–º LLM



**–í—Ö–æ–¥:** JSON —Å –ø–æ–ª–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –∏ –±–ª–æ–∫–∞–º–∏  

**–í—ã—Ö–æ–¥:** JSON —Å –¥–æ–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏



**AI:** –¥–∞, GPU + LLM



**–ó–∞—á–µ–º JSON:**



- LLM —É–¥–æ–±–Ω–æ –æ—Ç–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º–æ–º —Å –æ—Å—Ç–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π.



---



## 6Ô∏è‚É£ –ò—Ç–æ–≥–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –ø–∞–π–ø–ª–∞–π–Ω–∞



- –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ **JSON**:



**–ó–∞—á–µ–º JSON –≤–æ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö:**



1. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Üí –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

2. **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Üí –º–æ–∂–Ω–æ –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –ø–∞–π–ø–ª–∞–π–Ω —Å –ª—é–±–æ–≥–æ —à–∞–≥–∞.

3. **API-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Üí —É–¥–æ–±–Ω–æ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

4. **–ê–Ω–∞–ª–∏–∑ –∏ LLM** ‚Üí JSON –¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è AI.



**–û—Ç–¥–µ–ª—å–Ω—ã–µ JSON –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ:**



| JSON | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |

| --- | --- |

| Docs / TextExtraction JSON | –•—Ä–∞–Ω–∏—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ |

| DocklinkPipeline JSON | –ë–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞ –∏ Layout (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞) |

| SkipOCR JSON | –§–ª–∞–≥ bypass OCR –¥–ª—è Word —Ñ–∞–π–ª–æ–≤ |

| LayoutTable JSON | –¢–∞–±–ª–∏—Ü—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ LLM |



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å **–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é —Å—Ö–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ JSON**, –≥–¥–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ, –∫–∞–∫–æ–π JSON –∫—É–¥–∞ –∏–¥–µ—Ç, –∫–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∏ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AI.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?



---



–†–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ –ø–æ–¥—Ä–æ–±–Ω–æ, —è –Ω–µ –ø–æ–Ω–∏–º–∞—é, —á–∞—Å—Ç—å DocsLoader ‚Äì —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å Docklink, –∏–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –ø–µ—Ä–µ–¥–∞—á–µ –≤ Docklink? 1Ô∏è‚É£ DocsLoader (Input Stage) –ó–∞–¥–∞—á–∞: –ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –¥–æ–º–∞—à–Ω–µ–π –ø–∞–ø–∫–∏ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ API. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —Ñ–∞–π–ª–∞: PDF –∏–ª–∏ Word. –í—Ö–æ–¥:.pdf,.doc,.docx (—Ñ–∞–π–ª—ã –Ω–∞ –¥–∏—Å–∫–µ, —á–µ—Ä–µ–∑ volume –≤ Docker). –í—ã—Ö–æ–¥: –î–ª—è PDF ‚Üí –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π PDF –≤ pipeline –î–ª—è Word ‚Üí DOCX –æ–±—ä–µ–∫—Ç (Python docx.Document) JSON –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ: –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π JSON –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã.



---



–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ, —á—Ç–æ–±—ã —Å—Ç–∞–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Ç–∞–∫–æ–µ **DocsLoader** –∏ –Ω—É–∂–Ω–æ –ª–∏ –ø–∏—Å–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–¥.



---



## 1Ô∏è‚É£ –ß—Ç–æ —Ç–∞–∫–æ–µ DocsLoader



- **DocsLoader** ‚Äî —ç—Ç–æ —Ç–µ—Ä–º–∏–Ω –∏–∑ –ø–∞–π–ø–ª–∞–π–Ω–∞ Docklink, –æ–±–æ–∑–Ω–∞—á–∞—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **–ø—Ä–∏—ë–º –∏ –ø–µ—Ä–≤–∏—á–Ω—É—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**.

- **–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Docklink** –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ DocsLoader –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ (PDF + Word) **–Ω–µ—Ç**. –û–±—ã—á–Ω–æ Docklink –æ–∂–∏–¥–∞–µ—Ç **PDF**, –∞ —Ç–µ–∫—Å—Ç —É–∂–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö OCR / Layout / Table –º–æ–¥—É–ª–µ–π.

- –¢–æ –µ—Å—Ç—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `.doc` / `.docx` –Ω—É–∂–Ω–æ –ø–æ–¥—É–º–∞—Ç—å, –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å –∏—Ö –≤ pipeline.



---



## 2Ô∏è‚É£ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª Docklink



- Docklink —É–º–µ–µ—Ç:

	1. –ü–æ–ª—É—á–∞—Ç—å PDF (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ API).

	2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å PDF: OCR, Layout, Tables, JSON/Markdown.

	3. –í—ã–∑–æ–≤ LLM –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è.

- **–ù–µ —É–º–µ–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**

	- –ü–µ—Ä–µ–±–∏—Ä–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ Ubuntu.

	- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å DOC / DOCX –≤ —Ç–µ–∫—Å—Ç –∏–ª–∏ PDF.

	- –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ —Ç–∏–ø—É –∏ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –≤ —Ä–∞–∑–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ (SkipOCR –¥–ª—è Word, OCR –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö PDF).



---



## 3Ô∏è‚É£ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è DocsLoader



–î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ PDF + Word –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å **–∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç**:



1. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/home/username/documents`) –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞: PDF, DOC, DOCX.

1. **–î–ª—è PDF:**

- –ü–µ—Ä–µ–¥–∞–µ–º –Ω–∞–ø—Ä—è–º—É—é –≤ DocklinkPipeline.

- –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π –µ—Å—Ç—å ‚Üí SkipOCR.

- –ï—Å–ª–∏ —Å–∫–∞–Ω ‚Üí OCR.

1. **–î–ª—è DOC / DOCX:**

- –ù—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç:

- –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å JSON —Å –ø–æ–ª–µ–º `text` –∏ –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π (`file_name`, `type`, `num_pages`).

- –ü–µ—Ä–µ–¥–∞—Ç—å —ç—Ç–æ—Ç JSON –≤ DocklinkPipeline **–∫–∞–∫ SkipOCR**, —á—Ç–æ–±—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å OCR –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.



---



## 4Ô∏è‚É£ JSON –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ



- –ù–∞ —É—Ä–æ–≤–Ω–µ DocsLoader JSON **–º–æ–∂–µ—Ç –±—ã—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º**, –ø—Ä–æ—Å—Ç–æ –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

- JSON –∑–¥–µ—Å—å –Ω—É–∂–µ–Ω –¥–ª—è:

	1. –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞: DocklinkPipeline —Ä–∞–±–æ—Ç–∞–µ—Ç **—Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º JSON**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

	2. –ü–µ—Ä–µ–¥–∞—á–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–∏–º—è —Ñ–∞–π–ª–∞, —Ç–∏–ø) –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏.

	3. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è: worker –∏–ª–∏ LLM –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å JSON —á–µ—Ä–µ–∑ API.



---



## 5Ô∏è‚É£ –ò—Ç–æ–≥ –ø–æ DocsLoader



| –í–æ–ø—Ä–æ—Å | –û—Ç–≤–µ—Ç |

| --- | --- |

| DocsLoader –≤—Å—Ç—Ä–æ–µ–Ω –≤ Docklink? | –ß–∞—Å—Ç–∏—á–Ω–æ –¥–ª—è PDF, –Ω–æ **–Ω–µ –¥–ª—è Word / –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–∞–ø–æ–∫** |

| –ù—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–∞—Å—Ç–æ–º? | –î–∞, –µ—Å–ª–∏:   ‚Ä¢ –µ—Å—Ç—å Word —Ñ–∞–π–ª—ã   ‚Ä¢ –Ω—É–∂–Ω–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–∞—à–Ω—é—é –ø–∞–ø–∫—É   ‚Ä¢ –Ω—É–∂–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å JSON –¥–ª—è DocklinkPipeline |

| –†–æ–ª—å JSON | –ü–µ—Ä–µ–¥–∞—á–∞ —Ç–µ–∫—Å—Ç–∞ –∏ –±–∞–∑–æ–≤–æ–π –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø–∞–π–ø–ª–∞–π–Ω–∞ |



---



üí° **–í—ã–≤–æ–¥:** –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–∞ PDF –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DocsLoader Docklink.  

–î–ª—è Word (.doc/.docx) **–Ω—É–∂–µ–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç**, –∫–æ—Ç–æ—Ä—ã–π:



1. –°–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–∞–ø–∫—É,

2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Ñ–∞–π–ª–∞,

3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç,

4. –§–æ—Ä–º–∏—Ä—É–µ—Ç JSON –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ DocklinkPipeline —Å —Ñ–ª–∞–≥–æ–º `SkipOCR=true`.



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –ø—Ä—è–º–æ –Ω–∞–ø–∏—Å–∞—Ç—å **–ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ DocsLoader**, –∫–æ—Ç–æ—Ä—ã–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç PDF + DOCX –∏ —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å DocklinkPipeline.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?



---



–ö–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º DockLink —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ —Ñ–∞–π–ª–æ–≤, –ø–∞—Ä—Å–∏–Ω–≥–æ–º –∏ –ø–µ—Ä–µ–≤–æ–¥–æ–º –≤ –∏—Ö —Ñ–æ—Ä–º–∞—Ç.md,.json –∏.html?



---



–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–¥—Ä–æ–±–Ω–æ, –∫–∞–∫ Docklink —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∫–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–≤–æ–∏ –≤—ã—Ö–æ–¥–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (`.md`, `.json`, `.html`). –ë—É–¥—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∏ –ø–æ —à–∞–≥–∞–º.



---



## 1Ô∏è‚É£ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤



Docklink **–∏–∑ –∫–æ—Ä–æ–±–∫–∏** —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å:



| –§–æ—Ä–º–∞—Ç | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è |

| --- | --- | --- |

| PDF | –î–∞ | \- –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π –µ—Å—Ç—å ‚Üí —á–∏—Ç–∞–µ–º –Ω–∞–ø—Ä—è–º—É—é   \- –ï—Å–ª–∏ —Å–∫–∞–Ω ‚Üí OCR (Tesseract / CPU Vision) |

| DOC / DOCX | –ß–∞—Å—Ç–∏—á–Ω–æ (–æ–±—ã—á–Ω–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é / –∫–∞—Å—Ç–æ–º) | –ù—É–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ç–µ–∫—Å—Ç —Å –ø–æ–º–æ—â—å—é `python-docx` –∏–ª–∏ LibreOffice CLI ‚Üí Docklink –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç |

| TXT | –î–∞ | –ü—Ä–æ—Å—Ç–æ —Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Ç–µ–∫—Å—Ç |

| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG, PNG) | –î–∞ | OCR –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ |



**–í—ã–≤–æ–¥:** Docklink **–Ω–µ —É–º–µ–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å Word**, –ø–æ—ç—Ç–æ–º—É –¥–ª—è Word-—Ñ–∞–π–ª–æ–≤ –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ª–æ–π **TextExtraction / –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä**, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞—ë—Ç —Ç–µ–∫—Å—Ç –≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç JSON –¥–ª—è –ø–∞–π–ø–ª–∞–π–Ω–∞.



---



## 2Ô∏è‚É£ –ü–∞—Ä—Å–∏–Ω–≥ –≤–Ω—É—Ç—Ä–∏ Docklink



Docklink —Ä–∞–∑–±–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π:



1. **Text Extraction**

- –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç: –Ω–∞–ø—Ä—è–º—É—é (PDF, TXT) –∏–ª–∏ —á–µ—Ä–µ–∑ OCR/Word-–∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä.

- –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π JSON:

1. **Layout Analysis**

- –í—ã–¥–µ–ª—è—é—Ç—Å—è –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏, –∞–±–∑–∞—Ü—ã, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

- JSON –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ:

1. **Table Extraction**

- –¢–∞–±–ª–∏—Ü—ã –≤—ã—è–≤–ª—è—é—Ç—Å—è –∏ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–æ–∫–∏/—Å—Ç–æ–ª–±—Ü—ã.

- JSON:



---



## 3Ô∏è‚É£ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤



Docklink –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞:



| –§–æ—Ä–º–∞—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è |

| --- | --- | --- |

| `.json` | –ú–∞—à–∏–Ω–Ω–æ-—á–∏—Ç–∞–µ–º—ã–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç | –ë–µ—Ä—ë—Ç **–≤—Å—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞**: —Ç–µ–∫—Å—Ç, –±–ª–æ–∫–∏, —Ç–∞–±–ª–∏—Ü—ã, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è API, –ø–µ—Ä–µ–¥–∞—á–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª—è AI/LLM. |

| `.md` | –ß–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞ | –ë–µ—Ä—ë—Ç —Ç–µ–∫—Å—Ç –∏ –±–ª–æ–∫–∏, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤ Markdown: –∑–∞–≥–æ–ª–æ–≤–∫–∏ (`#`), –∞–±–∑–∞—Ü—ã, —Ç–∞–±–ª–∏—Ü—ã (\` |

| `.html` | –î–ª—è –≤–µ–±-–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ | –ë–µ—Ä—ë—Ç JSON ‚Üí —Ä–µ–Ω–¥–µ—Ä–∏—Ç HTML: `<h1>`, `<p>`, `<table>`. –ú–æ–∂–Ω–æ –≤—Å—Ç—Ä–æ–∏—Ç—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Markdown ‚Üí HTML. |



**–ü—Ä–∏–Ω—Ü–∏–ø:** Docklink –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–µ–¥–∏–Ω—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π JSON –∫–∞–∫ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**, –∞ –ø–æ—Ç–æ–º –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –≤ –Ω—É–∂–Ω—ã–π –∫–æ–Ω–µ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (`.md`, `.html`).



---



## 4Ô∏è‚É£ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö



- **JSON** –Ω—É–∂–µ–Ω –∫–∞–∫ **–µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –≤—Å–µ—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π** ‚Üí `.md` –∏ `.html` –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ –Ω–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

- –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤: PDF, DOCX, TXT, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.



---



## 5Ô∏è‚É£ –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AI



- OCR –¥–ª—è —Å–∫–∞–Ω–æ–≤ PDF –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (CPU)

- Layout –∏ TableFormer ‚Äî CPU Vision AI

- Optional LLM ‚Äî –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (fallback, —Ç–æ–ª—å–∫–æ JSON –Ω–∞ –≤—Ö–æ–¥/–≤—ã—Ö–æ–¥)



–í—Å–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ `.md` –∏ `.html` ‚Äî **—á–∏—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞, AI –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è**.



---



üí° **–ò—Ç–æ–≥:**



- Docklink –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞.

- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π JSON ‚Äî —Å–µ—Ä–¥—Ü–µ –ø–∞–π–ø–ª–∞–π–Ω–∞**, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –≤—Å–µ—Ö –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫.

- `.md` –∏ `.html` —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ JSON, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –≤—Ö–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Word).



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å **—Å—Ö–µ–º—É –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö Docklink** —Å PDF + Word, –≥–¥–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ **JSON –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —É–∑–µ–ª**, –∏ –∫–∞–∫ –∏–∑ –Ω–µ–≥–æ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è `.md` –∏ `.html`.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?



---



–û—Ç–ª–∏—á–Ω–æ, —Ç–µ–ø–µ—Ä—å –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ç—ã —ç—Ç–æ –ø–æ–∫–∞–∑–∞–ª –≤—ã—à–µ, –Ω–∞–ø–∏—à–∏ –º–Ω–µ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–ª–æ—É –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å PDF, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å PDF, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π PDF —Å–ª–æ–π, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å DOC –∏ DOC —Å Microsoft —Ñ–∞–π–ª–∞–º–∏. –ö–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–∞–∫–∏–µ —ç—Ç–∞–ø—ã –±—É–¥—É—Ç –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã –∏–ª–∏ –Ω–µ –±—É–¥—É—Ç –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Ç–æ–≥–æ –∏–ª–∏ –∏–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞. –í –∫–∞–∫–∏—Ö –∏–∑ —ç—Ç–∏—Ö —ç—Ç–∞–ø–æ–≤ –±—É–¥–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å AI –æ—Ç Doclin, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –Ω–∞ DigitalOcean, –Ω–µ –Ω–∞ –≤–Ω–µ—à–Ω–µ–º –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–µ.



---



–û—Ç–ª–∏—á–Ω–æ, –¥–∞–≤–∞–π —Ä–∞–∑–ª–æ–∂–∏–º –≤—Å—ë –ø–æ —Ñ–æ—Ä–º–∞—Ç—É **–¥–µ–∫–æ–º–ø–æ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å —á—ë—Ç–∫–∏–º —É–∫–∞–∑–∞–Ω–∏–µ–º: –∫–∞–∫–∏–µ —ç—Ç–∞–ø—ã –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã, –∫–∞–∫–∏–µ –Ω–µ—Ç, –∏ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Docling AI –Ω–∞ CPU (DigitalOcean)**. –Ø –±—É–¥—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω—ã–º.



---



## üü¶ 1Ô∏è‚É£ PDF —Å –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏



**–û–ø–∏—Å–∞–Ω–∏–µ:** PDF –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è, —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.



### –ü–∞–π–ø–ª–∞–π–Ω:



| –≠—Ç–∞–ø | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –í—Ö–æ–¥ / –í—ã—Ö–æ–¥ | AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è? |

| --- | --- | --- | --- |

| DocsLoader | –°–∫–∞–Ω–∏—Ä—É–µ–º –ø–∞–ø–∫—É / API, –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–∞–∫ PDF | PDF –æ–±—ä–µ–∫—Ç | –ù–µ—Ç |

| TextExtraction / OCR | Tesseract CPU OCR ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | JSON —Å —Ç–µ–∫—Å—Ç–æ–º –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º | **–î–∞ (Docling Vision CPU)** |

| SkipOCR | –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (OCR –Ω—É–∂–µ–Ω) | ‚Äî | –ù–µ—Ç |

| Layout Analysis | –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏, reading order | JSON —Å –±–ª–æ–∫–∞–º–∏ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ | **–î–∞ (Docling Vision CPU)** |

| Table Extraction | –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—ã, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º rows/cols | JSON —Ç–∞–±–ª–∏—Ü | **–î–∞ (Docling Table CPU)** |

| JSON/Markdown/HTML Export | –°–æ–∑–¥–∞—ë–º `full_document.json`, `document.md`, `document.html` | JSON / Markdown / HTML | –ù–µ—Ç |

| Metadata Extraction | Regex/heuristics ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è | JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ | –ù–µ—Ç |

| Optional LLM | –¢–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–ª–µ–π | JSON | –í–Ω–µ—à–Ω–∏–π, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –¥–ª—è DigitalOcean |



**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**



- **Docling AI –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU**, –≤—Å–µ Vision –∏ Table –º–æ–¥—É–ª–∏.

- OCR –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ PDF ‚Üí image.



---



## üü¶ 2Ô∏è‚É£ PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º



**–û–ø–∏—Å–∞–Ω–∏–µ:** PDF —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç, OCR –Ω–µ –Ω—É–∂–µ–Ω.



### –ü–∞–π–ø–ª–∞–π–Ω:



| –≠—Ç–∞–ø | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –í—Ö–æ–¥ / –í—ã—Ö–æ–¥ | AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è? |

| --- | --- | --- | --- |

| DocsLoader | –°–∫–∞–Ω–∏—Ä—É–µ–º –ø–∞–ø–∫—É / API, –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–∞–∫ PDF | PDF –æ–±—ä–µ–∫—Ç | –ù–µ—Ç |

| TextExtraction | –ß–∏—Ç–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞–ø—Ä—è–º—É—é | JSON —Å —Ç–µ–∫—Å—Ç–æ–º –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º | –ù–µ—Ç |

| SkipOCR | –í–∫–ª—é—á–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º OCR | JSON —Å —Ç–µ–∫—Å—Ç–æ–º | –ù–µ—Ç |

| Layout Analysis | –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏, reading order | JSON —Å –±–ª–æ–∫–∞–º–∏ | **–î–∞ (Docling Vision CPU)** |

| Table Extraction | –ù–∞—Ö–æ–¥–∏–º —Ç–∞–±–ª–∏—Ü—ã –∏ —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ rows/cols | JSON —Ç–∞–±–ª–∏—Ü | **–î–∞ (Docling Table CPU)** |

| JSON/Markdown/HTML Export | `full_document.json`, `document.md`, `document.html` | JSON / Markdown / HTML | –ù–µ—Ç |

| Metadata Extraction | Regex / heuristics | JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ | –ù–µ—Ç |

| Optional LLM | –¢–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ | JSON | –í–Ω–µ—à–Ω–∏–π, –ø–æ –∑–∞–ø—Ä–æ—Å—É |



**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**



- OCR –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è (`SkipOCR=true`)

- –í—Å–µ CPU AI –æ—Ç Docling –æ—Å—Ç–∞—é—Ç—Å—è –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã –¥–ª—è **Layout –∏ Table**



---



## üü¶ 3Ô∏è‚É£ DOC / DOCX (Microsoft Word)



**–û–ø–∏—Å–∞–Ω–∏–µ:** Word-—Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π, –æ–±—ã—á–Ω–æ –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.



### –ü–∞–π–ø–ª–∞–π–Ω:



| –≠—Ç–∞–ø | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –í—Ö–æ–¥ / –í—ã—Ö–æ–¥ | AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è? |

| --- | --- | --- | --- |

| DocsLoader (–∫–∞—Å—Ç–æ–º) | –°–∫–∞–Ω–∏—Ä—É–µ–º –ø–∞–ø–∫—É / API, –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–∞–∫ DOCX/DOC | DOCX –æ–±—ä–µ–∫—Ç | –ù–µ—Ç |

| TextExtraction / Word2Text | –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç —Å –ø–æ–º–æ—â—å—é python-docx / LibreOffice | JSON —Å —Ç–µ–∫—Å—Ç–æ–º | –ù–µ—Ç |

| SkipOCR | –í–∫–ª—é—á–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º OCR | JSON —Å —Ç–µ–∫—Å—Ç–æ–º | –ù–µ—Ç |

| Layout Analysis | –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏ | JSON —Å –±–ª–æ–∫–∞–º–∏ | **–î–∞ (Docling Vision CPU)** |

| Table Extraction | –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—ã –≤ —Ç–µ–∫—Å—Ç–µ | JSON —Ç–∞–±–ª–∏—Ü | **–î–∞ (Docling Table CPU)** |

| JSON/Markdown/HTML Export | `full_document.json`, `document.md`, `document.html` | JSON / Markdown / HTML | –ù–µ—Ç |

| Metadata Extraction | Regex / heuristics | JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ | –ù–µ—Ç |

| Optional LLM | –¢–æ–ª—å–∫–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ | JSON | –í–Ω–µ—à–Ω–∏–π, –ø–æ –∑–∞–ø—Ä–æ—Å—É |



**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**



- OCR –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è

- Docling AI CPU –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –¥–ª—è Layout –∏ Table**, –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ DigitalOcean

- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–µ–≥–æ GPU –∏–ª–∏ LLM, –µ—Å–ª–∏ —Ä–µ–≥—É–ª—è—Ä–∫–∏ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –ø–æ–ª—è



---



## üü¶ –û–±—â–∏–µ –≤—ã–≤–æ–¥—ã –ø–æ AI –∏ DigitalOcean



1. **Docling AI CPU (DigitalOcean)** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è:

- **Layout Analysis** ‚Äì Vision Transformer –Ω–∞ CPU

- **Table Extraction** ‚Äì TableFormer CPU

1. **OCR CPU (Tesseract / Docling)** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è:

- PDF —Å –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

1. **LLM / AI GPU** –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á:

- –¢–æ–ª—å–∫–æ –¥–ª—è fallback –Ω–∞ —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º

1. **JSON –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ**:

- –£–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

- –°–ª—É–∂–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (TextExtraction ‚Üí Layout ‚Üí Table ‚Üí Metadata ‚Üí LLM)

- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å `.md` –∏ `.html` –∏–∑ –æ–¥–Ω–æ–≥–æ JSON



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å **–Ω–∞–≥–ª—è–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É/—Å—Ö–µ–º—É –≤—Å–µ—Ö —Ç—Ä—ë—Ö –ø–∞–π–ø–ª–∞–π–Ω–æ–≤**, –≥–¥–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ, –∫–∞–∫–∏–µ —ç—Ç–∞–ø—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∏ –≥–¥–µ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω AI –Ω–∞ CPU.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?



---



–†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, –∫–∞–∫ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ DockLink –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —ç—Ç–∞–ø–∞—Ö –¥–µ—Ç–∞–ª—å–Ω–µ–µ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º. –ú–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞, –≤ –∫–∞–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö –ø—Ä–∏–Ω–∏–º–∞—é—Ç –¥–∞–Ω–Ω—ã–µ —ç—Ç–∏ —É–∑–ª—ã –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (Layout Analysis –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏, reading order JSON —Å –±–ª–æ–∫–∞–º–∏ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –î–∞ (Docling Vision CPU) Table Extraction –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—ã, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º rows/cols JSON —Ç–∞–±–ª–∏—Ü –î–∞ (Docling Table CPU))? –¢–∞–∫–∂–µ, –¥–∞–ª–µ–µ —Ä–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ –ø—Ä–æ —Ä–∞–±–æ—Ç—É OCR CPU (Tesseract / Docling) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è: PDF —Å –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ Docklink –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ? –Ø–≤–ª—è—é—Ç—Å—è –ª–∏ —ç—Ç–æ –æ–±–µ AI-–º–æ–¥–µ–ª—è–º–∏? –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –≤ Docklink LLM? –ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç? –ò —á—Ç–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ, –µ—Å–ª–∏ –º—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É –∏–∑ –Ω–∏—Ö? –¢–∞–∫–∂–µ –º–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏.docs –∏.docs Microsoft Word, –∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç —ç–∫—Å—Ç—Ä–∞–∫—à–Ω —Å –ø–æ–º–æ—â—å—é Python.docs –∏ LibreOffice, –Ω–µ—Ç –ª–∏ –ø—Ä–æ–±–ª–µ–º –∏ –±—É–¥–µ—Ç –ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤.docs –≤.docs. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —è –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —è—á–µ–π–∫–∏.iout –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, –∫–∞–∫ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ PDF —Ñ–∞–π–ª–æ–≤. –¢–∞–∫–∂–µ –æ–±—ä—è—Å–Ω–∏ –º–Ω–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ —ç—Ç–∞–ø –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ñ–∞–π–ª—ã –æ—Ç–ø–∞—Ä—â–µ–Ω—ã —Ç–µ–∫—Å—Ç-—ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–æ–º –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤, –≤ —á—ë–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π —ç—Ç–∞–ø—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ OSR, OCR, –∏–ª–∏ –∫ Layout Analytics, –∏–ª–∏ –∫ Table Extraction, –≤ –∫–∞–∫–æ–º –≤–∏–¥–µ –ø–æ–¥–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏, –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ, –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–º–µ—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü, —Ç–∞–±–ª–∏—Ü, –±–ª–æ–∫–æ–≤ —Ç–µ–∫—Å—Ç–∞, –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–º –∏–∑ —ç—Ç–∞–ø–æ–≤, –∏ –≤ –∫–∞–∫–æ–º –≤–∏–¥–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–æ–Ω–µ—á–Ω—ã–π —Ñ–∞–π–ª, –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –ø—Ä–µ–∂–¥–µ —á–µ–º –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω —ç–∫—Å–ø–æ—Ä—Ç –≤ JSON, Markdown –∏–ª–∏ HTML.



---



–û—Ç–ª–∏—á–Ω–æ, –¥–∞–≤–∞–π —Ä–∞–∑–ª–æ–∂–∏–º –≤—Å—ë **–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º**, —Å –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–æ–π –ø–æ –≤—Ö–æ–¥–∞–º/–≤—ã—Ö–æ–¥–∞–º, —Ñ–æ—Ä–º–∞—Ç–∞–º –∏ –ª–æ–≥–∏–∫–µ —Ä–∞–±–æ—Ç—ã Docklink –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ. –Ø —Ä–∞–∑–¥–µ–ª—é –æ—Ç–≤–µ—Ç –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏, —á—Ç–æ–±—ã –±—ã–ª–æ —è—Å–Ω–æ, –∫–∞–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è, –∫–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç AI-–º–æ–¥—É–ª–∏, –∏ –∫–∞–∫ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–Ω–µ—á–Ω—ã–π JSON/Markdown/HTML.



---



## üü¶ 1Ô∏è‚É£ –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ Docklink



Docklink —Å—Ç—Ä–æ–∏—Ç **–µ–¥–∏–Ω—É—é –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç–∞** –≤ –≤–∏–¥–µ JSON, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞.



### –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö:



| –≠—Ç–∞–ø | –í—Ö–æ–¥ | –í—ã—Ö–æ–¥ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |

| --- | --- | --- | --- |

| **TextExtraction / OCR** | PDF (image), DOC/DOCX, TXT | JSON —Å —Ç–µ–∫—Å—Ç–æ–º (`text`), —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ (`pages`) | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON –¥–ª—è –≤—Å–µ—Ö —Å–ª–µ–¥—É—é—â–∏—Ö —É–∑–ª–æ–≤ |

| **SkipOCR** | JSON —Å —Ç–µ–∫—Å—Ç–æ–º | JSON —Å —Ñ–ª–∞–≥–æ–º `ocr_skipped` | –ü—Ä–æ–ø—É—Å–∫ OCR –¥–ª—è PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º –∏–ª–∏ Word —Ñ–∞–π–ª–æ–≤ |

| **Layout Analysis** | JSON —Å —Ç–µ–∫—Å—Ç–æ–º | JSON —Å –±–ª–æ–∫–∞–º–∏ —Ç–µ–∫—Å—Ç–∞, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏, reading order | –í—Ö–æ–¥ ‚Äî —Ç–µ–∫—Å—Ç –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º, –≤—ã—Ö–æ–¥ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ |

| **Table Extraction** | JSON —Å Layout –±–ª–æ–∫–∞–º–∏ | JSON —Ç–∞–±–ª–∏—Ü (rows, columns, coords) | –í—Ö–æ–¥ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –≤—ã—Ö–æ–¥ ‚Äî —Ç–∞–±–ª–∏—Ü—ã, –≥–æ—Ç–æ–≤—ã–µ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–ª–∏ –∞–Ω–∞–ª–∏–∑–∞ |



**–§–æ—Ä–º–∞—Ç JSON –Ω–∞ —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ** ‚Äî –∫–ª—é—á–µ–≤–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ—Å—ë—Ç:



- `pages` ‚Üí –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–∞–Ω–∏—Ü —Å —Ç–µ–∫—Å—Ç–æ–º

- `blocks` ‚Üí —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

- `tables` ‚Üí —Ç–∞–±–ª–∏—Ü—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏ —Å—Ç—Ä–æ–∫ –∏ —Å—Ç–æ–ª–±—Ü–æ–≤

- `metadata` ‚Üí –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–∏–º—è —Ñ–∞–π–ª–∞, —Ç–∏–ø, OCR-—Å—Ç–∞—Ç—É—Å)



–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—Å–µ —É–∑–ª—ã **–æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JSON**, –∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞: PDF, DOCX, TXT.



---



## üü¶ 2Ô∏è‚É£ OCR CPU (Tesseract / Docling) –¥–ª—è PDF —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏



**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**



- –¢–æ–ª—å–∫–æ –¥–ª—è PDF, —É –∫–æ—Ç–æ—Ä—ã—Ö **–Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è** (—Å–∫–∞–Ω—ã).



**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**



1. PDF ‚Üí —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Üí –∫–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ **–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** (PNG/JPEG)

2. OCR CPU (Tesseract –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Docling Vision OCR) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–∫–∞—Ä—Ç–∏–Ω–∫—É ‚Üí —Ç–µ–∫—Å—Ç**

3. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ JSON:



**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ AI:**



- **Tesseract** ‚Üí –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π OCR, –Ω–µ –æ–±—É—á–∞–µ–º—ã–π AI, –±—ã—Å—Ç—Ä—ã–π, –Ω–∞–¥—ë–∂–µ–Ω –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö, —Ç–æ—á–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∫–∞–Ω–∞.

- **Docling OCR** ‚Üí Vision-–º–æ–¥–µ–ª—å CPU, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ Docklink, –º–æ–∂–µ—Ç –±—ã—Ç—å —á—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –ª—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–µ–∏–¥–µ–∞–ª—å–Ω—ã–º–∏ —Å–∫–∞–Ω–∞–º–∏ (–∏—Å–∫—Ä–∏–≤–ª–µ–Ω–∏–µ, —à—É–º, —Ç–∞–±–ª–∏—Ü—ã).

- **–ù–µ —è–≤–ª—è—é—Ç—Å—è LLM**; —ç—Ç–æ CPU Vision-–º–æ–¥–µ–ª–∏ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞.



**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**



- –ï—Å–ª–∏ –Ω—É–∂–µ–Ω **–º–∞–∫—Å–∏–º—É–º –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è –ø–ª–æ—Ö–∏—Ö —Å–∫–∞–Ω–æ–≤** ‚Üí Docling OCR

- –ï—Å–ª–∏ –Ω—É–∂–Ω—ã **—Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Å–∫–∞–Ω–∞—Ö** ‚Üí Tesseract



Docklink –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–¥–Ω—É –∏–∑ –Ω–∏—Ö**, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥.



---



## üü¶ 3Ô∏è‚É£ Text Extraction –¥–ª—è DOC / DOCX Microsoft Word



**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**



- **Python-docx** (–¥–ª—è.docx):

- **LibreOffice CLI** (–¥–ª—è —Å—Ç–∞—Ä—ã—Ö.doc):

- –ó–∞—Ç–µ–º –∏–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç —Ç–∞–∫ –∂–µ, –∫–∞–∫ –¥–ª—è.docx.



**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**



- **–ù–µ –Ω—É–∂–µ–Ω OCR**, —Ç–µ–∫—Å—Ç —É–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω.

- –¢–∞–±–ª–∏—Ü—ã –≤ Word ‚Üí –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `table.rows` –∏ `table.cells` API Python-docx.

- JSON —Ç–∞–±–ª–∏—Ü—ã —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ PDF: `rows` –∏ `columns`, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω—è—Ç—å –ª–∏–±–æ –Ω—É–ª—è–º–∏ (–µ—Å–ª–∏ –Ω–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ), –ª–∏–±–æ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ Layout Analysis (–Ω–∞–ø—Ä–∏–º–µ—Ä, BoundingBox –¥–ª—è –±–ª–æ–∫–æ–≤ —Ç–∞–±–ª–∏—Ü—ã).



**–ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:**



- –î–ª—è.doc ‚Üí.docx ‚Üí Python-docx

- –î–ª—è.docx ‚Üí –Ω–∞–ø—Ä—è–º—É—é Python-docx

- –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, **–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è.doc –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞**, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–∫—Å—Ç–∞/—Ç–∞–±–ª–∏—Ü —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.



---



## üü¶ 4Ô∏è‚É£ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ Layout / Table Extraction



–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ç–µ–∫—Å—Ç –∏–∑–≤–ª–µ—á—ë–Ω (OCR –∏–ª–∏ Word2Text), Docklink —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç **JSON –æ–±—ä–µ–∫—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞**, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç:



- **–≠—Ç–æ—Ç JSON —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º**, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —É–∑–ª–æ–≤: Layout, Table, Metadata Extraction.

- –í PDF —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ **—Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ image** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ OCR ‚Üí —Ç–µ–∫—Å—Ç, –¥–∞–ª–µ–µ JSON –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫ Layout.

- –î–ª—è Word ‚Üí —Ç–µ–∫—Å—Ç —Å—Ä–∞–∑—É —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ JSON, –ø—Ä–æ–ø—É—Å–∫–∞—è OCR.



---



## üü¶ 5Ô∏è‚É£ Layout Analysis



**–í—Ö–æ–¥:** JSON —Å —Ç–µ–∫—Å—Ç–æ–º –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º  

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:**



- –í—ã–¥–µ–ª—è–µ—Ç **—Ç–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏**, –∑–∞–≥–æ–ª–æ–≤–∫–∏, –∞–±–∑–∞—Ü—ã

- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–ø–æ—Ä—è–¥–æ–∫ —á—Ç–µ–Ω–∏—è** (reading order)

- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç **BoundingBox –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ (x1,y1,x2,y2)



**–í—ã—Ö–æ–¥:** JSON —Å –±–ª–æ–∫–∞–º–∏:



**AI:** Docling Vision CPU ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å, –Ω–µ LLM, —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ DigitalOcean.



---



## üü¶ 6Ô∏è‚É£ Table Extraction



**–í—Ö–æ–¥:** JSON —Å Layout –±–ª–æ–∫–∞–º–∏  

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**



- –ù–∞—Ö–æ–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—ã —Å—Ä–µ–¥–∏ –±–ª–æ–∫–æ–≤

- –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏ / —Å—Ç–æ–ª–±—Ü—ã

- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ç–∫—É —Ç–∞–±–ª–∏—Ü—ã



**–í—ã—Ö–æ–¥:** JSON —Ç–∞–±–ª–∏—Ü:



**AI:** Docling Table CPU ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ DigitalOcean



**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è Word —Ç–∞–±–ª–∏—Ü—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ø–æ—á—Ç–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —á–µ—Ä–µ–∑ Python-docx, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã —á–µ—Ä–µ–∑ Layout.



---



## üü¶ 7Ô∏è‚É£ –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON / Markdown / HTML



–ü–æ—Å–ª–µ Layout + Table:



- Docklink —Å–æ–±–∏—Ä–∞–µ—Ç **–µ–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞**:

- **Markdown** —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ –±–ª–æ–∫–æ–≤ —Ç–µ–∫—Å—Ç–∞ + —Ç–∞–±–ª–∏—Ü:

- **HTML** —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —á–µ—Ä–µ–∑ —Ä–µ–Ω–¥–µ—Ä JSON –≤ `<h1>`, `<p>`, `<table>`



**–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ JSON –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –ø–æ–∑–≤–æ–ª—è—é—Ç:**



1. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å PDF, DOCX, TXT

2. –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞

3. –ü–æ–∑–≤–æ–ª—è—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é LLM –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —É–∑–ª–æ–≤



---



üí° **–ò—Ç–æ–≥ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:**



1. **OCR (Tesseract / Docling)** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è PDF-—Å–∫–∞–Ω–æ–≤, Vision CPU, –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ Docklink, –Ω–µ LLM

2. **Layout Analysis / Table Extraction** ‚Äî AI CPU Dockling, –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ DigitalOcean

3. **Text Extraction Word** ‚Äî Python-docx / LibreOffice CLI, —Ç–µ–∫—Å—Ç –∏ —Ç–∞–±–ª–∏—Ü—ã ‚Üí JSON

4. **JSON** ‚Äî –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö, —É–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è Markdown / HTML / Metadata Extraction

5. **–ö–æ–Ω–µ—á–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç** ‚Äî Markdown, HTML, JSON —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ –±–∞–∑–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ JSON



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å **–Ω–∞–≥–ª—è–¥–Ω—É—é —Å—Ö–µ–º—É Docklink pipeline —Å PDF –∏ DOCX**, –≥–¥–µ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã **–≤—Å–µ –≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã, JSON, OCR, Layout, Table, AI**, —á—Ç–æ–±—ã –≤–∏–∑—É–∞–ª—å–Ω–æ –≤–∏–¥–µ—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Ñ–æ—Ä–º–∞—Ç—ã.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?



---



–î–∞–ª–µ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å Docker Compose —Å –¥–æ–∫–ª–∏–Ω–≥ –∏ –≤—Å–µ–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –¥–æ–∫–ª–∏–Ω–≥ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–∫ –∏ –¥–æ–∫—Å. –î–∞–≤–∞–π –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–µ–º pipeline –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –¥–æ–∫ –≤ –¥–æ–∫—Å.



---



–ù–∏–∂–µ ‚Äî **–ø–æ–ª–Ω—ã–π, –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –∏ —Ä–∞–±–æ—á–∏–π –ø–∞–π–ø–ª–∞–π–Ω –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏.doc ‚Üí.docx** –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ Dockling, –∞ —Ç–∞–∫–∂–µ **—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker Compose**, –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–µ—Ç:



- Dockling (API + Worker)

- LibreOffice (–¥–ª—è.doc ‚Üí.docx)

- Python environment (docx parser)

- –í—Å–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Dockling –¥–ª—è PDF/DOC/DOCX



–≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –≤–∞—à–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã DigitalOcean, **–≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ CPU-—Ä–µ–∂–∏–º–µ**, GPU –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.



---



## üü¶ 1. –ü–ê–ô–ü–õ–ê–ô–ù –ö–û–ù–í–ï–†–¢–ê–¶–ò–ò DOC ‚Üí DOCX –ü–ï–†–ï–î DOCKLING



## üìå –ü–æ—á–µ–º—É –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞?



Dockling **–Ω–µ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å.doc –Ω–∞–ø—Ä—è–º—É—é** ‚Äî —ç—Ç–æ —Å—Ç–∞—Ä—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç MSOffice.  

–í—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ (python-docx, docx2python) —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å **.docx**.



üëâ –ø–æ—ç—Ç–æ–º—É –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∞–µ–º LibreOffice headless –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏.



---



## üü© 2. –ü–û–õ–ù–´–ô PIPELINE: DOC ‚Üí DOCX ‚Üí TEXT ‚Üí JSON ‚Üí LAYOUT ‚Üí TABLE ‚Üí EXPORT



–í–æ—Ç –ø–æ–ª–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è:



---



## üü¶ 3. –î–ï–¢–ê–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê –ü–û–î –ö–ê–ü–û–¢–û–ú



## üîµ –≠—Ç–∞–ø 1. LibreOffice Headless (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è)



–ö–æ–º–∞–Ω–¥–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:



**–í—Ö–æ–¥**: –±–∏–Ω–∞—Ä–Ω—ã–π.doc  

**–í—ã—Ö–æ–¥**: file.docx



LibreOffice –¥–µ–ª–∞–µ—Ç:



- –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é —Å—Ç–∏–ª–µ–π

- –ø–µ—Ä–µ–Ω–æ—Å —Ç–∞–±–ª–∏—Ü

- –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ OOXML



–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å.



---



## üîµ –≠—Ç–∞–ø 2. Python-docx (Text Extraction)



–ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:



–ò–∑–≤–ª–µ–∫–∞–µ–º:



- –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã ‚Üí –∫–∞–∫ plain text

- —Ç–∞–±–ª–∏—Ü—ã ‚Üí cells\[row\]\[col\]

- —Å—Ç–∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (h1..h6)

- —Å–ø–∏—Å–∫–∏ (bullet/numbered)

- –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

- –Ω–∏–∂–Ω–∏–µ/–≤–µ—Ä—Ö–Ω–∏–µ –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)



**–í—ã—Ö–æ–¥** ‚Äî Dockling Input JSON (pre-layout):



---



## üîµ –≠—Ç–∞–ø 3. Dockling Layout Analysis (AI CPU)



–≠—Ç–∞ –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–ª—è PDF, –∏ –¥–ª—è Word-—Ç–µ–∫—Å—Ç–∞.



–û–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:



- –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞ (`blocks`)

- –∏–µ—Ä–∞—Ä—Ö–∏—é –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

- reading order

- bounding boxes (–µ—Å–ª–∏ –º–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏)

- –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∞–±–∑–∞—Ü—ã



**–í—Ö–æ–¥:** JSON —Å —Ç–µ–∫—Å—Ç–æ–º  

**–í—ã—Ö–æ–¥:** Layout JSON



---



## üîµ –≠—Ç–∞–ø 4. Dockling Table AI



–í—ã–ø–æ–ª–Ω—è–µ—Ç:



- –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏ —Ç–∞–±–ª–∏—Ü

- —Å–ª–∏—è–Ω–∏–µ/—Ä–∞–∑–±–∏–µ–Ω–∏–µ —è—á–µ–µ–∫

- –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ rows/cols

- –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç–∞–±–ª–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ JSON



**–í—ã—Ö–æ–¥:**



---



## üîµ –≠—Ç–∞–ø 5. –≠–∫—Å–ø–æ—Ä—Ç (JSON/Markdown/HTML)



Dockling –∏–º–µ–µ—Ç —à—Ç–∞—Ç–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ë—Ä—ã:



### Markdown:



### HTML:



---



## üü¶ 4. DOCKER COMPOSE: Dockling + LibreOffice + Worker



–ù–∏–∂–µ ‚Äî **–≥–æ—Ç–æ–≤—ã–π docker-compose**, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ DigitalOcean.



## üì¶ docker-compose.yml



---



## üü¶ –ü–û–Ø–°–ù–ï–ù–ò–ï, –ö–ê–ö –í–°–Å –í–ú–ï–°–¢–ï –†–ê–ë–û–¢–ê–ï–¢



## 1\. –í—ã –∫–ª–∞–¥—ë—Ç–µ —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É:



## 2\. LibreOffice container –¥–µ–ª–∞–µ—Ç:



## 3\. Dockling API –∑–∞–±–∏—Ä–∞–µ—Ç DOCX ‚Üí —Å–æ–∑–¥–∞—ë—Ç JSON —É—Ä–æ–≤–Ω—è —Ç–µ–∫—Å—Ç–∞



## 4\. Dockling Worker –¥–µ–ª–∞–µ—Ç Layout Analysis ‚Üí Table Extraction



## 5\. Dockling API —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤:



---



## üü¶ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –¢–ê–ö–û–ô –ö–û–ù–°–¢–†–£–ö–¶–ò–ò



### ‚úî –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ PDF, DOC, DOCX



### ‚úî –ü–æ–ª–Ω–æ—Å—Ç—å—é CPU-—Ä–µ–∂–∏–º (DigitalOcean-friendly)



### ‚úî –ù–µ—Ç LLM, –≤—Å—ë –ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API



### ‚úî –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: API ‚Üî Worker



### ‚úî –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON-–ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤



### ‚úî –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω–∏—Ç—å Tesseract ‚Üí Docling OCR



---



## üü¶ –ì–û–¢–û–í –î–ê–õ–¨–®–ï –î–ï–õ–ê–¢–¨:



üëâ docker ignore  

üëâ Dockerfile –¥–ª—è –∫–∞—Å—Ç–æ–º-API —Å DOCX-–ø–∞—Ä—Å–µ—Ä–æ–º  

üëâ REST API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤–º–µ—Å—Ç–æ volume  

üëâ Worker-–æ—á–µ—Ä–µ–¥—å –±–µ–∑ Redis (–∫–∞–∫ –≤—ã —Ö–æ—Ç–∏—Ç–µ)  

üëâ –∏–ª–∏ Worker —á–µ—Ä–µ–∑ Redis –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞



–•–æ—á–µ—à—å ‚Äî —Å–æ–±–µ—Ä—É –ø–æ–ª–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∑–∞–ø—É—Å–∫–∞?



---



—á—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏.doc ‚Üí.docx —è —Ç–µ–±—è –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è Microsoft –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.DOC –≤ —Ñ–æ—Ä–º–∞—Ç.DOCX –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –¥–ª—è –Ω–∞—Å —è–≤–ª—è–µ—Ç—Å—è LibreOffice, —Ç–∞–∫ –∫–∞–∫ Python.DOCX –Ω–µ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º Microsoft Office.DOC –∏ –Ω–µ —É–º–µ–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞.DOC –≤.DOCX?



---



–î–∞, –≤—ã –≤—Å—ë –ø–æ–Ω–∏–º–∞–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º **–ø–æ–¥—Ä–æ–±–Ω–æ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Ç–æ—á–Ω–æ**, –ø–æ—á–µ–º—É **LibreOffice ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç** –¥–ª—è `.doc ‚Üí .docx`, –∫–∞–∫–∏–µ –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –ø–æ—á–µ–º—É –æ–Ω–∏ —Ö—É–∂–µ.



---



## ‚úÖ 1. –ú–æ–∂–Ω–æ –ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å.doc –≤.docx —á–µ—Ä–µ–∑ python-docx?



**–ù–µ—Ç.**



–ü—Ä–∏—á–∏–Ω—ã:



### ‚ùå python-docx –ù–ï —É–º–µ–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç.doc



`python-docx` —Ä–∞–±–æ—Ç–∞–µ—Ç **–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Å OOXML** ‚Äî —Ç–æ –µ—Å—Ç—å —Å `.docx`.  

–§–æ—Ä–º–∞—Ç `.doc` ‚Äî —ç—Ç–æ —Å—Ç–∞—Ä—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Microsoft Word 97‚Äì2003.



- –û–Ω –∑–∞–∫—Ä—ã—Ç—ã–π.

- –û–Ω –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è python-docx.

- –û–Ω –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ –Ω–∞ Python –∫—Ä–æ–º–µ —Ç–µ—Ö, —á—Ç–æ –≤—ã–∑—ã–≤–∞—é—Ç –≤–Ω–µ—à–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã (LibreOffice, unoconv).



–ü–æ—ç—Ç–æ–º—É **python-docx –Ω–µ –º–æ–∂–µ—Ç –Ω–∏ –æ—Ç–∫—Ä—ã—Ç—å, –Ω–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `.doc` ‚Üí `.docx`**.



---



## ‚úÖ 2. –ß–µ–º –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å.DOC ‚Üí.DOCX?



## ü•á –õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî LibreOffice (headless mode)



–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ:



–ü–ª—é—Å—ã:



‚úî –ø–∞–∫–µ—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è  

‚úî —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Linux + Docker  

‚úî —á–∏—Ç–∞–µ—Ç –ª—é–±—ã–µ —Å—Ç–∞—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã MS Office  

‚úî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É: —Ç–∞–±–ª–∏—Ü—ã, —Å–ø–∏—Å–∫–∏, —Å—Ç–∏–ª–∏  

‚úî —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ–Ω–≤–µ–π–µ—Ä–∞ Dockling



–ú–∏–Ω—É—Å—ã:



‚Äì —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ LibreOffice (~300‚Äì350 MB)  

‚Äì –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º —á–∏—Å—Ç—ã–µ Python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–Ω–æ —É –Ω–∞—Å —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ)



---



## üöÄ 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –ø–æ—á–µ–º—É –æ–Ω–∏ —Ö—É–∂–µ



## ‚ùå 3.1. unoconv



–≠—Ç–æ –ø–æ —Å—É—Ç–∏ **—Ç–æ–Ω–∫–∞—è –æ–±–æ–ª–æ—á–∫–∞ –Ω–∞–¥ LibreOffice** ‚Üí –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ–≥–æ.



–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:



‚Äì –Ω—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π LibreOffice  

‚Äì —á–∞—Å—Ç–æ –Ω–µ—Å—Ç–∞–±–∏–ª–µ–Ω –≤ Docker  

‚Äì –ø—Ä–æ–µ–∫—Ç –ø–æ—á—Ç–∏ –Ω–µ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è



–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ **–Ω–µ—Ç —Å–º—ã—Å–ª–∞**, –ª—É—á—à–µ –¥–µ—Ä–≥–∞—Ç—å LibreOffice –Ω–∞–ø—Ä—è–º—É—é.



---



## ‚ùå 3.2. Pandoc



Pandoc –º–æ–∂–µ—Ç:  

`.docx ‚Üí md/html/etc`



–ù–æ **–ù–ï —É–º–µ–µ—Ç** —á–∏—Ç–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–µ `.doc`.



–ü–æ—ç—Ç–æ–º—É –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è `.doc`.



---



## ‚ùå 3.3. Antiword / catdoc



–≠—Ç–∏ —Å—Ç–∞—Ä—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–∞—é—Ç —Ç–æ–ª—å–∫–æ **—Å—ã—Ä–æ–π —Ç–µ–∫—Å—Ç**, –±–µ–∑ —Ç–∞–±–ª–∏—Ü, –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.  

Dockling –Ω–µ —Å–º–æ–∂–µ—Ç:



‚Äì —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã  

‚Äì —Å–¥–µ–ª–∞—Ç—å layout analysis  

‚Äì –≤—ã–¥–µ–ª–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏



–ü–æ—ç—Ç–æ–º—É **–Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞**.



---



## üß© 4. –ü–æ—á–µ–º—É LibreOffice ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è Dockling-–ø–∞–π–ø–ª–∞–π–Ω–∞



Dockling –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å:



- **PDF**

- **DOCX**

- **HTML**

- **TXT**

- **Images (JPEG/PNG)**



Dockling **–Ω–µ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é —Å.DOC**.



–ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ `.docx`, —Ç–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞.



---



## üîÅ 5. –ì–æ—Ç–æ–≤—ã–π pipeline –¥–ª—è DOC ‚Üí DOCX –≤ –≤–∞—à–µ–º Dockling-–ø–æ—Ç–æ–∫–µ



### –≠—Ç–∞–ø—ã:



### 1) DocsLoader



–§–∞–π–ª –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–∫ `.doc` ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø.



### 2) DOC Converter



–ü—Ä–æ–≤–µ—Ä—è–µ–º:



–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ LibreOffice (headless):



### 3) –ü–µ—Ä–µ–¥–∞—ë–º –≤ Docling



Docling –ø–æ–ª—É—á–∞–µ—Ç —É–∂–µ **.docx**:



‚Üí TextExtraction  

‚Üí Layout Analysis  

‚Üí Table Detection  

‚Üí Markdown/JSON/HTML export



---



## üí° 6. –ö–∞–∫ –∑–∞–≤–µ—Ä–Ω—É—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤ Docker Compose



–í—ã –ø–æ–¥–Ω–∏–º–∞–µ—Ç–µ —Å–µ—Ä–≤–∏—Å:



- `libreoffice` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

- python-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é

- volume –¥–ª—è `/input` –∏ `/output`



–ü—Ä–æ—Å—Ç–æ–π Dockerfile:



---



## üéâ –ò—Ç–æ–≥



| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `.doc` ‚Üí `.docx` | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–∞–±–ª–∏—Ü—ã | –†–∞–±–æ—Ç–∞–µ—Ç –≤ Docker | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Dockling |

| --- | --- | --- | --- | --- |

| LibreOffice | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |

| unoconv | –∑–∞–≤–∏—Å–∏—Ç –æ—Ç LibreOffice | –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ | ‚ùå | ‚ùå |

| python-docx | ‚ùå | ‚Äî | ‚Äî | ‚Äî |

| Pandoc | ‚ùå | ‚Äî | ‚Äî | ‚ùå |

| antiword / catdoc | —Ç–µ–∫—Å—Ç —Ç–æ–ª—å–∫–æ | ‚ùå | ‚ùå | ‚ùå |



üëâ **–í—ã–≤–æ–¥: LibreOffice ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–±.**



---



–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî —Å–æ—Å—Ç–∞–≤–ª—é **–≥–æ—Ç–æ–≤—ã–π Docker Compose**, Python-–∫–æ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤ –≤–∞—à Dockling-–ø–∞–π–ø–ª–∞–π–Ω –∏ —Å—Ö–µ–º—É –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.



---



–û—Ç–ª–∏—á–Ω–æ, –¥–∞–≤–∞–π —Å–æ–±–µ—Ä–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π Docker Compose —Å–æ –≤—Å–µ–º–∏ –∫–æ–Ω—Ñ–∏–≥–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º –≤ pipeline –æ–±—Ä–∞–±–æ—Ç–∫—É Doc –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é —á–µ—Ä–µ–∑ LibreOffice. –ú–æ–∂–Ω–æ –ª–∏ –º—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –±—Ä–∞–ª–∏—Å—å –∏–∑ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, PDF-—Ñ–∞–π–ª—ã —Å –æ—Ç—Å–∫–∞–Ω–µ–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç, –∏–ª–∏ PDF-—Ñ–∞–π–ª—ã —Å–æ —Å–ª–æ–µ–º —Ç–µ–∫—Å—Ç–∞ –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç OCR –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ò–ª–∏ –∂–µ –±–æ–ª–µ–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –≤ –ø–∞—Ä–∞–¥–∏–≥–º–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–∫–ª–∏–Ω–≥–∞ –ø–æ–¥–∞–≤–∞—Ç—å –µ–º—É —Å–º–µ—à–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –Ω–∞ –≤—Ö–æ–¥–µ, —Ç–∞–∫ —á—Ç–æ–±—ã –¥–æ–∫–ª–∏–Ω–≥ –≤ —Å–≤–æ–µ–º –ø–æ–ø–ª–∞–π–Ω–µ –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª, –≤–æ–∑–º–æ–∂–Ω–æ, –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ —Å–≤–æ–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ù–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –≤–∞–∂–Ω–æ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ –≤—Ö–æ–¥–µ –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∞—Ç—å –∫–∞–∫ –¥–æ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç—ã Microsoft Word, —Ç–∞–∫ –∏ –¥–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ LibreOffice, –∏ PDF-—Ñ–∞–π–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Ç–∞–∫ –∏ PDF-—Ñ–∞–π–ª—ã —Å–æ —Å–ª–æ–µ–º —Ç–µ–∫—Å—Ç–∞. –î–ª—è —ç—Ç–æ–≥–æ –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ä–∞–∑–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞, –ø–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ª—É—á—à–µ –ø–æ–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏ –Ω—É–∂–Ω–æ –ª–∏ –∏—Ö –ø—Ä–µ–ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—Ç—å –¥–æ –ø–æ–¥–∞—á–∏ –≤ –¥–æ–∫–ª–∏–Ω–≥. –î–∞–≤–∞–π —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã –æ–±–æ–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤.



---



–ù–∏–∂–µ ‚Äî **–ø–æ–ª–Ω—ã–π, —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ä–∞–∑–±–æ—Ä**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç —Ç–µ–±–µ –ø—Ä–∏–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ *–¥–æ* —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∞ –∑–∞—Ç–µ–º ‚Äî –ø–æ–ª—É—á–∏—Ç—å **—Ñ–∏–Ω–∞–ª—å–Ω—ã–π Docker Compose**, –≤–∫–ª—é—á–∞—é—â–∏–π:



- Docling

- LibreOffice (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `.doc ‚Üí .docx`)

- OCR (Tesseract / Docling OCR)

- –î–æ–∫—É–º–µ–Ω—Ç-—Ä–æ—É—Ç–µ—Ä (DocsLoader + FileClassifier)

- –ï–¥–∏–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ pipeline



---



## üî• –ß–∞—Å—Ç—å 1. –ö–∞–∫ –ø–æ–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã: –∏–∑ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏–ª–∏ –≤ –æ–¥–Ω—É –æ–±—â—É—é?



–¢—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—à—å 2 –ø–æ–¥—Ö–æ–¥–∞:



---



## ‚úÖ –ü–æ–¥—Ö–æ–¥ –ê ‚Äî –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ —Ç–∏–ø–∞–º



**–ü—Ä–∏–º–µ—Ä:**



## ‚úî –ü–ª—é—Å—ã:



### 1\. –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π routing



–¢—ã –∑–∞—Ä–∞–Ω–µ–µ –∑–Ω–∞–µ—à—å, —á—Ç–æ:



- `pdf_scan` ‚Üí OCR

- `pdf_text` ‚Üí skip OCR

- `doc` ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è

- `docx` ‚Üí —Å—Ä–∞–∑—É —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—è



–≠—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤ –∫–æ–¥–µ —Ä–æ—É—Ç–µ—Ä–∞.



### 2\. –ü—Ä–æ—â–µ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å



–ú–µ–Ω—å—à–µ –ª–æ–≥–∏–∫–∏: –ø—Ä–æ—Å—Ç–æ –æ–±—Ö–æ–¥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.



### 3\. –ü—Ä–æ—â–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥



Grafana, Filebeat ‚Äî —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ª–µ–≥—á–µ.



---



## ‚ùå –ú–∏–Ω—É—Å—ã:



### 1\. –ù—É–∂–Ω–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤



–¢–æ –µ—Å—Ç—å –≤–∞—à upstream-—Å–µ—Ä–≤–∏—Å (–ø–æ–ª—É—á–∞—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç—ã) **–æ–±—è–∑–∞–Ω –∑–Ω–∞—Ç—å**, —á—Ç–æ —É –Ω–µ–≥–æ PDF-—Å–∫–∞–Ω, –∞ —á—Ç–æ PDF-—Ç–µ–∫—Å—Ç.



–ù–æ –∏–Ω–æ–≥–¥–∞ —ç—Ç–æ **–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ**.



### 2\. –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–≥—É—Ç –±—ã—Ç—å —Ç–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏



–ù–∞–ø—Ä–∏–º–µ—Ä:



- PDF —Å–æ —Å–ª–æ–µ–º —Ç–µ–∫—Å—Ç–∞ —Å–ª—É—á–∞–π–Ω–æ —É–ª–æ–∂–∏–ª–∏ –≤ `pdf_scan`

- DOCX –ø–æ–ª–æ–∂–∏–ª–∏ –≤ `doc`



–ò pipeline –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ.



---



## ‚úÖ –ü–æ–¥—Ö–æ–¥ –ë ‚Äî –ï–¥–∏–Ω—ã–π –≤—Ö–æ–¥–Ω–æ–π –∫–∞—Ç–∞–ª–æ–≥ + –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞



–í—Å–µ —Ñ–∞–π–ª—ã –ø–∞–¥–∞—é—Ç –≤ `/input`, –∞ —É–∂–µ **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π DocsLoader** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:



- —Ñ–æ—Ä–º–∞—Ç

- –µ—Å—Ç—å –ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π

- –Ω—É–∂–µ–Ω –ª–∏ OCR

- –Ω—É–∂–Ω–æ –ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `.doc`



## ‚úî –ü–ª—é—Å—ã:



### 1\. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è Docling



Docling –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ —Ç–æ, —á—Ç–æ:



1. –í—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç

2. –û–Ω —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å



–¢–æ –µ—Å—Ç—å **—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π**.



### 2\. –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π ‚Äî –≤—Ö–æ–¥ –µ–¥–∏–Ω—ã–π



–ü—Ä–æ—Å—Ç–æ –ø–æ–ª–æ–∂–∏–ª–∏ —Ñ–∞–π–ª ‚Üí pipeline —Å–∞–º —Ä–µ—à–∞–µ—Ç.



### 3\. –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤



–ö–æ–≥–¥–∞ API / –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ / –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–¥–∞—é—Ç —Å–º–µ—à–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã.



### 4\. –°–Ω–∏–∂–∞–µ—Ç –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è



–°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç.



---



## ‚ùå –ú–∏–Ω—É—Å—ã:



### 1\. –ù—É–∂–µ–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å–ª–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤



–ü—Ä–∏–º–µ—Ä–Ω—ã–π –ø—Å–µ–≤–¥–æ–∫–æ–¥:



### 2\. –ß—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏



–ù–æ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç—Å—è –º–æ–¥—É–ª—å–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏.



---



## üß† –ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ª—É—á—à–µ –¥–ª—è –≤–∞—à–µ–≥–æ use-case?



### –£—á–∏—Ç—ã–≤–∞—è:



- –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å–º–µ—à–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–ª–∏ API –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É

- —É –≤–∞—Å –µ—Å—Ç—å DOC, DOCX, PDF scan, PDF text

- pipeline –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º



üëâ **–†–µ–∫–æ–º–µ–Ω–¥—É—é –ü–æ–¥—Ö–æ–¥ –ë ‚Äî –µ–¥–∏–Ω–∞—è –ø–∞–ø–∫–∞ + –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**



–≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–∞—è, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∏ –≥–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.



–ò–º–µ–Ω–Ω–æ —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç **ABBYY FlexiCapture**, **Rossum**, **Google Document AI**, **Azure Form Recognizer**.



---



## üî• –ß–∞—Å—Ç—å 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ pipeline



---



## üîß –ß–∞—Å—Ç—å 3. –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å PDF: —Ç–µ–∫—Å—Ç –∏–ª–∏ —Å–∫–∞–Ω?



–ò—Å–ø–æ–ª—å–∑—É–µ–º PyPDF2 –∏–ª–∏ pdfminer:



–ï—Å–ª–∏ `False` ‚Üí PDF-SCAN ‚Üí OCR –≤–∫–ª—é—á–∞–µ—Ç—Å—è.



---



## üèó –ß–∞—Å—Ç—å 4. –§–∏–Ω–∞–ª—å–Ω—ã–π Docker Compose



–ù–∏–∂–µ ‚Äî —Å–æ–∑–¥–∞—é **–ø—Ä–æ–¥—É–∫—Ü–∏–æ–Ω–Ω—ã–π docker-compose**, –≤ –∫–æ—Ç–æ—Ä–æ–º:



- Docling backend

- LibreOffice converter

- OCR (tesseract)

- FileRouter

- –û–±—â–∏–µ volume

- –ï–¥–∏–Ω—ã–π input/output



---



## üì¶ docker-compose.yml (–≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)



---



## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞



---



## üêç router/main.py ‚Äî –≥–ª–∞–≤–Ω—ã–π file-classifier + pipeline handler



---



## üß© –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ Docling



Docling –ø–æ–ª—É—á–∞–µ—Ç:



- PDF (raw)

- DOCX (–ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)

- OCR‚Äôd images (–µ—Å–ª–∏ —Å–∫–∞–Ω PDF)



–û–Ω —Å–∞–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:



- `layout.json`

- `tables.json`

- `text.json`

- –∏—Ç–æ–≥–æ–≤—ã–π `combined.json`

- markdown

- html



---



## üß† –ò—Ç–æ–≥–æ–≤—ã–µ –≤—ã–≤–æ–¥—ã



| –í–∞—Ä–∏–∞–Ω—Ç | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |

| --- | --- | --- |

| **–†–∞–∑–¥–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏** | –ø—Ä–æ—â–µ –ª–æ–≥–∏–∫–∞, –º–µ–Ω—å—à–µ –∫–æ–¥–∞ | —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ |

| **–ï–¥–∏–Ω—ã–π –≤—Ö–æ–¥ + –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** | —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ, –∫–∞–∫ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö | —á—É—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π —Ä–æ—É—Ç–µ—Ä |



üëâ –í –≤–∞—à–µ–º —Å–ª—É—á–∞–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ: **–µ–¥–∏–Ω—ã–π –≤—Ö–æ–¥ + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**.



---



## –•–æ—á–µ—à—å, –º–æ–≥—É —Å–æ–±—Ä–∞—Ç—å:



- –∫–æ–Ω–µ—á–Ω—ã–π **—Ä–∞–±–æ—á–∏–π GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞**

- CI/CD –¥–ª—è DigitalOcean

- –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ pipeline –ø–æ cron / webhook

- API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤



–ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å.



---



–î–∞–≤–∞–π –∑–∞–º–µ–Ω–∏–º –≤ –¥–æ–∫–µ—Ä–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ Tesseract –¥–æ–∫–ª–∏–Ω–≥, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–¥–∞—Ç—å –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–ø—Ä–æ–≤–µ—Ä—å —ç—Ç–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏). –ù–∞–º —Ç–æ—á–Ω–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ pipeline –ø–æ cron / webhook –∏ API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞, —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ –ø–æ–∑–∂–µ!



---



–û—Ç–ª–∏—á–Ω–æ ‚Äî —Å–¥–µ–ª–∞–µ–º –∑–∞–º–µ–Ω—É Tesseract –Ω–∞ **Docling OCR** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≤ Docker-compose, –¥–æ–±–∞–≤–∏–º **API (webhook / upload)** –∏ **–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ pipeline** (cron-like scheduler). –ù–∏–∂–µ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∑–∞–º–µ–Ω—ã –ø–ª—é—Å —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –Ω–∞ –≤–∞—à–µ–º DigitalOcean (2 vCPU / 8 GB).



–ö—Ä–∞—Ç–∫–æ: –¥–∞ ‚Äî Docling OCR —á–∞—Å—Ç–æ –¥–∞—ë—Ç **–ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ** –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö/—à—É–º–Ω—ã—Ö/–∏—Å–∫—Ä–∏–≤–ª—ë–Ω–Ω—ã—Ö —Å–∫–∞–Ω–∞—Ö –∏ –ø—Ä–∏ —Å–ª–æ–∂–Ω–æ–π –≤—ë—Ä—Å—Ç–∫–µ/—Ç–∞–±–ª–∏—Ü–∞—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–π vision-–º–æ–¥—É–ª—å, —Ç–æ–≥–¥–∞ –∫–∞–∫ Tesseract ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π OCR (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π, –Ω–æ —Ö—É–∂–µ –Ω–∞ ¬´–≥—Ä—è–∑–Ω—ã—Ö¬ª —Å–∫–∞–Ω–∞—Ö). –û–¥–Ω–∞–∫–æ Docling –æ–±—ã—á–Ω–æ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ CPU –∏ –ø–∞–º—è—Ç–∏, –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –∏ –µ–≥–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ñ–∞–π–ª–∏—Ç—å –Ω–∞ –≤–∞—à–µ–π –≤—ã–±–æ—Ä–∫–µ. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docling OCR –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π** –∏ –æ—Å—Ç–∞–≤–∏—Ç—å Tesseract –∫–∞–∫ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π fallback (–∫–æ–Ω—Ñ–∏–≥–∏—Ä—É–µ–º–æ) ‚Äî —ç—Ç–æ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –¥–∞—ë—Ç –Ω–∞–∏–ª—É—á—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞/–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.



---



## 1) –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞: Docling OCR vs Tesseract



**Docling OCR (–Ω–µ–π—Ä–æ—Å–µ—Ç—å, CPU-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ –≤–∞—à–µ–º –¥–∏–∑–∞–π–Ω–µ)**



- –ü–ª—é—Å—ã:

	- –õ—É—á—à–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–µ/—à—É–º–Ω—ã–µ —Å–∫–∞–Ω—ã, —Å–ª–æ–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –º–Ω–æ–≥–æ—Ñ–æ—Ä–º–∞—Ç–Ω—ã–π layout.

	- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Layout / Table AI Docling (–º–µ–Ω—å—à–µ —Ä–∞–∑–Ω–æ—á—Ç–µ–Ω–∏–π –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü –∏ –±–ª–æ–∫–æ–≤).

	- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—ã—Å–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å downstream (–º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –¥–ª—è regex/LLM).

- –ú–∏–Ω—É—Å—ã:

	- –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ CPU/RAM, –º–µ–¥–ª–µ–Ω–Ω–µ–µ –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ.

	- –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞.

	- M–∞–ª–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –±–æ–ª—å—à–∏—Ö –±–∞—Ç—á–µ–π –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–∞—Ö (–Ω—É–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å).



**Tesseract (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π OCR)**



- –ü–ª—é—Å—ã:

	- –õ—ë–≥–∫–∏–π, –±—ã—Å—Ç—Ä—ã–π, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –≤ –ø—Ä–æ–¥–µ, –º–∞–ª–æ —Ä–µ—Å—É—Ä—Å–æ–≤.

	- –•–æ—Ä–æ—à –Ω–∞ —á–∏—Å—Ç—ã—Ö —Å–∫–∞–Ω–∞—Ö/—Ñ–æ—Ç–æ —Ö–æ—Ä–æ—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞.

- –ú–∏–Ω—É—Å—ã:

	- –ü–ª–æ—Ö –Ω–∞ —à—É–º–µ, —Å–ª–æ–∂–Ω–æ–π –≤–µ—Ä—Å—Ç–∫–µ, —Ç–∞–±–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö.

	- –ß–∞—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥- –∏ –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∏ (binarization, deskew, denoise).



**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** Docling OCR ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π; Tesseract ‚Äî fallback (–µ—Å–ª–∏ Docling –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫–∏ –∏–ª–∏ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É —Ö–æ—Ç–∏–º —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã). –ù–∞ 2 vCPU/8GB –¥–ª—è —Ç–µ—Å—Ç–∞ 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ Docling CPU-–≤–µ—Ä—Å–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –Ω–∞–≥—Ä—É–∑–∫–∞ –∏ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ—Ä—è—Ç—å.



---



## 2) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ–∞–ª–∏–∑—É–µ–º (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è)



- `input/` ‚Äî –µ–¥–∏–Ω–∞—è –ø–∞–ø–∫–∞ –≤—Ö–æ–¥–∞ (–ª—é–±—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã).

- `router` (FastAPI) ‚Äî API upload, webhook, file classifier, –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç/–º–∞—Ä–∫–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã.

- `libreoffice` ‚Äî headless –¥–ª—è `.doc ‚Üí .docx` (–Ω–∞–±–ª—é–¥–∞–µ—Ç /input –∏–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è router).

- `docling` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (API + OCR + Layout + Table + exporter). Docling OCR –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ Tesseract.

- `scheduler` ‚Äî cron-like (APScheduler) –≤—ã–∑—ã–≤–∞–µ—Ç endpoint router/process –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ batch.

- `output/` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (json/md/html).

- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `tesseract-fallback` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å Tesseract, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —Ñ–ª–∞–≥—É/–ø—Ä–∏ –æ—à–∏–±–∫–µ.



–ú—ã **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º Redis** –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ç–µ—Å—Ç–∞; –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —á–µ—Ä–µ–∑ HTTP-–≤—ã–∑–æ–≤—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.



---



## 3) docker-compose.yml (–≥–æ—Ç–æ–≤—ã–π, —Å Docling –≤–º–µ—Å—Ç–æ Tesseract)



–°–Ω–∏–∑—É ‚Äî –ø–æ–ª–Ω—ã–π `docker-compose.yml`. –ü–æ—Å–ª–µ –Ω–µ–≥–æ —è –¥–∞—é –∫—Ä–∞—Ç–∫–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–ª—è router + scheduler.



```yaml

yamlversion: "3.9"

services:



  # –û—Å–Ω–æ–≤–Ω–æ–π Dockling API + OCR (–∏—Å–ø–æ–ª—å–∑—É–µ–º Docling OCR –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π)

  docling:

    image: ghcr.io/yourorg/docling:latest   # –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑

    container_name: docling

    restart: unless-stopped

    environment:

      - DOC_PATH=/data/input

      - OUT_PATH=/data/output

      - OCR_ENGINE=docling   # –∫–ª—é—á: docling (–≤–º–µ—Å—Ç–æ tesseract)

      - OCR_THREADS=2

      - LAYOUT_ENABLED=true

      - TABLE_ENABLED=true

    volumes:

      - ./input:/data/input

      - ./output:/data/output

      - ./temp:/data/temp

    ports:

      - "8000:8000"

    healthcheck:

      test: ["CMD", "curl", "-f", "http://localhost:8000/health" ]

      interval: 30s

      timeout: 5s

      retries: 3



  # LibreOffice headless –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ .doc -> .docx

  libreoffice:

    image: libreoffice/docknative:latest   # –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ: –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –∏–∑ ubuntu+libreoffice

    container_name: libreoffice

    restart: unless-stopped

    volumes:

      - ./input:/data/input

      - ./temp:/data/temp

    command: >

      bash -c "while true; do inotifywait -e close_write -m /data/input --format '%f' |

        while read file; do

          ext=${file##*.};

          if [ \"${ext,,}\" = \"doc\" ]; then

            soffice --headless --convert-to docx --outdir /data/input /data/input/$file || echo 'convert-fail' ;

          fi;

        done;

      done"

    healthcheck:

      test: ["CMD", "ls", "/data/input" ]

      interval: 60s

      timeout: 5s

      retries: 3



  # Router ‚Äî –ø—Ä–∏–µ–º —Ñ–∞–π–ª–æ–≤, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç—Ä–∏–≥–≥–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ (FastAPI)

  router:

    build:

      context: ./router

      dockerfile: Dockerfile

    container_name: router

    restart: unless-stopped

    depends_on:

      - docling

      - libreoffice

    environment:

      - INPUT_DIR=/app/input

      - TEMP_DIR=/app/temp

      - DOCILING_API=http://docling:8000/process

      - WEBHOOK_SECRET=add-your-secret-here

    volumes:

      - ./input:/app/input

      - ./temp:/app/temp

      - ./output:/app/output

    ports:

      - "8080:8080"

    healthcheck:

      test: ["CMD", "curl", "-f", "http://localhost:8080/health" ]

      interval: 30s

      timeout: 5s

      retries: 3



  # Scheduler ‚Äî cron-like (APScheduler) –≤—ã–∑—ã–≤–∞–µ—Ç router/process (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫)

  scheduler:

    build:

      context: ./scheduler

      dockerfile: Dockerfile

    container_name: scheduler

    restart: unless-stopped

    depends_on:

      - router

    environment:

      - ROUTER_API=http://router:8080/process_now

      - SCHEDULE_CRON=*/15 * * * *   # –ø—Ä–∏–º–µ—Ä: –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç

    volumes:

      - ./temp:/app/temp



  # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Tesseract fallback, –µ—Å–ª–∏ —Ö–æ—Ç–∏–º –∏–º–µ—Ç—å –µ–≥–æ

  tesseract:

    image: tesseractshadow/tesseract4re:latest

    container_name: tesseract

    restart: "no"

    volumes:

      - ./temp:/data

    # –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏; router —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ–≥–æ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

```



---



## 4) router ‚Äî FastAPI: upload/webhook –∏ –ª–æ–≥–∏–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏



`router` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏, –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∏ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç Docling. –ù–∏–∂–µ ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä (`router/main.py`) ‚Äî –ø–æ–ª–æ–∂–∏ –≤./router:



```python

python# router/main.py

import os, shutil, requests, hashlib, hmac, time

from fastapi import FastAPI, File, UploadFile, Header, HTTPException

from pathlib import Path

from subprocess import run



app = FastAPI()

INPUT = os.environ.get("INPUT_DIR", "/app/input")

TEMP = os.environ.get("TEMP_DIR", "/app/temp")

DOCILING_API = os.environ.get("DOCILING_API", "http://docling:8000/process")

WEBHOOK_SECRET = os.environ.get("WEBHOOK_SECRET", "secret")



os.makedirs(INPUT, exist_ok=True)

os.makedirs(TEMP, exist_ok=True)



def save_upload(file: UploadFile, dest_folder: str = INPUT):

    dest = Path(dest_folder) / file.filename

    with open(dest, "wb") as f:

        f.write(file.file.read())

    return str(dest)



def has_pdf_text_layer(path):

    # –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ pypdf (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ requirements)

    from pypdf import PdfReader

    try:

        r = PdfReader(path)

        for p in r.pages:

            if p.extract_text():

                return True

        return False

    except:

        return False



@app.post("/upload")

async def upload(file: UploadFile = File(...)):

    path = save_upload(file)

    return {"status": "saved", "path": path}



@app.post("/webhook")

async def webhook(payload: dict, x_signature: str = Header(None)):

    # –ø—Ä–æ—Å—Ç–∞—è HMAC –ø—Ä–æ–≤–µ—Ä–∫–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

    if WEBHOOK_SECRET:

        sig = x_signature or ""

        expected = hmac.new(WEBHOOK_SECRET.encode(), str(payload).encode(), "sha256").hexdigest()

        if not hmac.compare_digest(sig, expected):

            raise HTTPException(status_code=403, detail="Invalid signature")

    # assume payload contains file path or URL, we only support local path for now

    file_path = payload.get("file_path")

    if not file_path or not Path(file_path).exists():

        raise HTTPException(status_code=400, detail="file_path missing or not found")

    # trigger processing

    return process_file(file_path)



def trigger_docling_process(file_path, ocr=True):

    data = {"path": file_path, "ocr": ocr}

    resp = requests.post(DOCILING_API, json=data, timeout=120)

    return resp.json()



def classify_and_route(path):

    ext = Path(path).suffix.lower()

    if ext == ".doc":

        # LibreOffice running in container will convert .doc to .docx automatically

        # Wait for conversion to appear as file.docx (simple poll)

        base = Path(path).stem

        converted = Path(path).with_suffix(".docx")

        # give libreoffice some time (or let it run async)

        for i in range(12):

            if converted.exists():

                return str(converted)

            time.sleep(1)

        # if not converted ‚Äî force call soffice (local fallback)

        try:

            run(["soffice", "--headless", "--convert-to", "docx", str(path), "--outdir", str(Path(path).parent)])

            return str(converted)

        except Exception:

            return str(path)

    if ext == ".pdf":

        if has_pdf_text_layer(path):

            return path, False

        else:

            return path, True

    return path, False



@app.post("/process")

def process_now():

    # process all files in INPUT

    processed = []

    for f in os.listdir(INPUT):

        full = str(Path(INPUT)/f)

        result = process_file(full)

        processed.append(result)

    return {"processed": processed}



def process_file(fullpath):

    # classify

    ext = Path(fullpath).suffix.lower()

    if ext == ".doc":

        converted = classify_and_route(fullpath)

        # converted may be (path, ocrflag) if pdf, but for .doc we get path

        return trigger_docling_process(converted, ocr=False)

    if ext == ".docx":

        return trigger_docling_process(fullpath, ocr=False)

    if ext == ".pdf":

        path, need_ocr = classify_and_route(fullpath)

        return trigger_docling_process(path, ocr=need_ocr)

    # fallback: send as text file

    return {"status":"skipped", "path": fullpath}

```



`router/requirements.txt` –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å `fastapi`, `uvicorn`, `requests`, `pypdf`.



`router/Dockerfile` –ø—Ä–æ—Å—Ç–æ–π:



---



## 5) scheduler ‚Äî cron-like (APScheduler) ‚Äî –ø—Ä–∏–º–µ—Ä—ã



–í–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º `cron` —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é `APScheduler` –≤ Python ‚Äî –≥–∏–±—á–µ –∏ –ª–µ–≥—á–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑—É–µ—Ç—Å—è. –ü–æ–ª–æ–∂–∏—Ç–µ –≤ `./scheduler`:



`scheduler/main.py`:



`scheduler/Dockerfile`:



(–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ç–æ—á–Ω—É—é cron-—Å—Ç—Ä–æ–∫—É ‚Äî –º–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª; –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª 15 –º–∏–Ω—É—Ç)



---



## 6) Docling API: –∫–∞–∫ –æ–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è



–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ `docling` —Ä–µ–∞–ª–∏–∑—É–µ—Ç HTTP endpoint:



`POST /process` body `{"path": "/data/input/file.pdf", "ocr": true}`



‚Äî Docling –±–µ—Ä–µ—Ç —Ñ–∞–π–ª, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω—É–∂–Ω—ã–µ —à–∞–≥–∏ (OCR –µ—Å–ª–∏ `ocr=true`, layout, tables, export) –∏ –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `/data/output/<file>.json` –∏ `.md`.



–ï—Å–ª–∏ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π Docling API –¥—Ä—É–≥–æ–π ‚Äî –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ `router` –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç. –í–∞–∂–Ω–æ: **docling –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docling OCR** (env `OCR_ENGINE=docling` –≤ compose).



---



## 7) –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏



- –õ–æ–≥–∏: –º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ `./logs` –∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ stdout –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

- –ú–µ—Ç—Ä–∏–∫–∏: –≤—ã–Ω–µ—Å—Ç–∏ `/metrics` –≤ docling –∏ router, —Å–æ–±—Ä–∞—Ç—å –≤ Prometheus+Grafana.

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏: CPU usage –Ω–∞ Docling ‚Äî –µ—Å–ª–∏ –ø–∏–∫–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ > 80% —É–≤–µ–ª–∏—á—å—Ç–µ worker/–∏–Ω—Å—Ç–∞–Ω—Å—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ burst GPU-—Å–µ—Ä–≤–µ—Ä –¥–ª—è LLM.

- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –≤–∞—à–µ–π —Ä–µ–∞–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ: –≤–æ–∑—å–º–∏—Ç–µ 50‚Äì100 —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–æ–≤ –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ Docling OCR vs Tesseract –ø–æ —Ç–æ—á–Ω–æ—Å—Ç–∏ (–ø—Ä–∏–º–µ—Ä: –ø—Ä–æ—Ü–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ò–ù–ù / —Å—É–º–º).



---



## 8) –§–∞–π–ª–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ / –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏



- –ü—Ä–∞–≤–∞: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å non-root –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ (–æ—Å–æ–±–µ–Ω–Ω–æ router).

- Webhook: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HMAC –ø–æ–¥–ø–∏—Å—å (–≤ –ø—Ä–∏–º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞).

- –û—á–∏—Å—Ç–∫–∞: scheduler –º–æ–∂–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `./archive` –∏ —É–¥–∞–ª—è—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.



---



## 9) –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç—É



1. **–ó–∞–º–µ–Ω—è–µ–º Tesseract –Ω–∞ Docling OCR**: —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö/—à—É–º–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Äî –≤–µ—Ä–Ω–æ–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–∞–≥—Ä—É–∑–∫—É.

2. **–û—Å—Ç–∞–≤—å—Ç–µ Tesseract –∫–∞–∫ fallback** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —É—Å–∫–æ—Ä—ë–Ω–Ω—ã–µ –ø—Ä–æ–≥–æ–Ω–∫–∏ –Ω–∞ —á–∏—Å—Ç—ã—Ö —Å–∫–∞–Ω–∞—Ö.

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω—ã–π –≤—Ö–æ–¥ `/input` + router** (auto-classify) ‚Äî —ç—Ç–æ –≥–∏–±–∫–æ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ.

4. **Scheduler (APScheduler)** —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É cron-like –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –ª–µ–≥–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è.

5. **API –¥–ª—è upload/webhook** ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `router` (FastAPI).

6. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ** ‚Äî —Å–æ–±–µ—Ä–∏—Ç–µ –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—Ä—Ç–∏—é —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–æ–≤ –∏ –∑–∞–º–µ—Ä—å—Ç–µ precision/recall –¥–ª—è key-fields (–ò–ù–ù/—Å—É–º–º—ã/–¥–∞—Ç—ã).



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:



- –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å **–∑–∞–ø—É—Å–∫-—Å–∫—Ä–∏–ø—Ç** `deploy.sh` –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É `docker-compose up -d` –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ.

- —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `router` + `scheduler` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –≤–∏–¥–µ zip/–∞—Ä—Ö–∏–≤–∞ (–∫–æ–¥ –≥–æ—Ç–æ–≤).

- –¥–æ–±–∞–≤–∏—Ç—å **fallback Tesseract switch** –≤ router (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ENV).



–ß—Ç–æ –¥–µ–ª–∞–µ–º –¥–∞–ª—å—à–µ ‚Äî –ø–æ–¥—Å–∫–∞–∂–∏: –≥–µ–Ω–µ—Ä–∏—Ä—É—é `deploy.sh` –∏ —Ñ–æ—Ä–º–∏—Ä—É—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ Dockerfile'—ã –¥–ª—è libreoffice / docling (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ), –∏–ª–∏ —Å—Ä–∞–∑—É –ø—Ä–∏—Å—ã–ª–∞—é –∞—Ä—Ö–∏–≤ —Å –∫–æ–¥–æ–º?



---



–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–±–µ—Ä–µ–º –ø–∞–π–ø–ª–∞–π–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –¥–æ–∫–ª–∏–Ω–≥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∞—à–∏—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –¥–ª—è –≤—ã–∑–æ–≤–∞ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ Webhook. –ö–∞–∫–∏–µ —ç—Ç–∞–ø—ã –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –∫–∞–∫ –¥–æ–∫–ª–∏–Ω–≥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–ª—è —Å–µ–±—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã? –ö–∞–∫–æ–π —Ñ–∞–π–ª —Å –∫–∞–∫–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏, –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞–º–∏, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏? –°–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ –æ–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π –∏–ª–∏ –æ–Ω —Ç—Ä–µ–±—É–µ—Ç OSR –æ–±—Ä–∞–±–æ—Ç–∫–∏? –ö–∞–∫–∏–µ Doc —Ñ–∞–π–ª—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏, –∞ –∫–∞–∫–∏–µ Doc Microsoft —Ñ–∞–π–ª—ã —Ç—Ä–µ–±—É—é—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ Docx? –ü–æ–º–∏–º–æ —ç—Ç–æ–≥–æ, –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –æ–¥–Ω—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ DOC, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ DOC, –∞ RAR –∞—Ä—Ö–∏–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤ —Å–µ–±–µ Word –¥–æ–∫—É–º–µ–Ω—Ç —Ñ–æ—Ä–º–∞—Ç–∞ DOCx –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ SCAN. –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –¥–≤—É–º—è —Ñ–∞–π–ª–∞–º–∏ –≤ —Ç–æ–º, —á—Ç–æ –æ–¥–∏–Ω —ç—Ç–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ DOCx –¥–æ–∫—É–º–µ–Ω—Ç –±–µ–∑ –ø–æ–¥–ø–∏—Å–µ–π, –∞ –≤—Ç–æ—Ä–æ–π —ç—Ç–æ —É–∂–µ —Ä–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–π, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π –∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π JPEG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π—Å—è –≤ —Ç–æ–º –∂–µ –∞—Ä—Ö–∏–≤–µ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞ DOC, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è Word –¥–æ–∫—É–º–µ–Ω—Ç DOCx —Ä—è–¥–æ–º —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º.



---



–ù–∏–∂–µ ‚Äî **–¥–µ—Ç–∞–ª—å–Ω—ã–π, –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–µ–∫–æ–º–ø–æ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ø–∞–π–ø–ª–∞–π–Ω–∞**, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Ç–≤–æ–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö:



- –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

- Webhook/cron –∑–∞–ø—É—Å–∫

- Dockling –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫

- —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∞ **DOC, –∫–æ—Ç–æ—Ä—ã–π –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —è–≤–ª—è–µ—Ç—Å—è RAR-–∞—Ä—Ö–∏–≤–æ–º**

- –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ OCR —Ç–æ–ª—å–∫–æ Docling-OCR (–Ω–µ Tesseract)

- –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, JSON-—Å–ª–æ–∏

- —É—Å–ª–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏



---



## üî• –§–ò–ù–ê–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–ê–ô–ü–õ–ê–ô–ù–ê (—Å Dockling + –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞)



–ü–∞–π–ø–ª–∞–π–Ω –¥–µ–ª–∏—Ç—Å—è –Ω–∞ **4 –æ—Å–Ω–æ–≤–Ω—ã—Ö –±–ª–æ–∫–∞**:



1. **PRE-INGESTION BLOCK** (–¥–æ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ Dockling)

2. **INGESTION BLOCK (Dockling core)** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ—Ç–æ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏

3. **POST-PROCESSING BLOCK** (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)

4. **EXPORT & WEBHOOK BLOCK**



---



## üß© 1. PRE-INGESTION BLOCK ‚Äî –î–û–ö–£–ú–ï–ù–¢ –ü–û–°–¢–£–ü–ê–ï–¢ –í –°–ò–°–¢–ï–ú–£



## üëâ 1.1. –ö–ê–°–¢–û–ú–ù–ê–Ø –°–û–†–¢–ò–†–û–í–ö–ê (–Ω–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)



–≠—Ç–æ—Ç –±–ª–æ–∫ **–Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ Dockling**, —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—à —Å–ª–æ–π.



### –ù–∞ –≤—Ö–æ–¥–µ:



–§–∞–π–ª—ã –≤ –ª—é–±–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏:



- PDF (—Å–∫–∞–Ω)

- PDF (—Ç–µ–∫—Å—Ç–æ–≤—ã–π)

- DOCX

- DOC (—Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç MS Word)

- DOC (–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ RAR-–∞—Ä—Ö–∏–≤)

- RAR, ZIP



### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤—â–∏–∫:



### –†–µ–∑—É–ª—å—Ç–∞—Ç:



–§–∞–π–ª –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ–¥–Ω—É –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:



| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ó–Ω–∞—á–µ–Ω–∏–µ |

| --- | --- |

| `text_pdf` | PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º |

| `scan_pdf` | PDF-—Å–∫–∞–Ω ‚Üí —Ç—Ä–µ–±—É–µ—Ç—Å—è OCR |

| `docx` | –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Dockling –∫–∞–∫ –µ—Å—Ç—å |

| `old_doc` | –Ω—É–∂–µ–Ω LibreOffice ‚Üí DOCX |

| `doc_archive_variant_A` | DOC –≤–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–∞ = —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π DOC ‚Üí DOCX inside RAR |

| `doc_archive_variant_B` | JPEG —Ñ–æ—Ç–æ + DOCX –≤–Ω—É—Ç—Ä–∏ RAR |

| `image_only` | JPEG ‚Üí OCR |



–ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤–ª–∏—è–µ—Ç –Ω–∞ **–≤–µ—Ç–∫—É Dockling**.



---



## üëâ 1.2. –ö–û–ù–í–ï–†–¢–ê–¶–ò–Ø.DOC ‚Üí.DOCX



–¢–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç DOC (`CFB` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).



–ò—Å–ø–æ–ª—å–∑—É–µ–º **LibreOffice headless**:



Dockling –ù–ï —É–º–µ–µ—Ç –ø–∞—Ä—Å–∏—Ç—å `.doc`. Python-docx —Ç–æ–∂–µ –ù–ï —É–º–µ–µ—Ç –ø–∞—Ä—Å–∏—Ç—å.



‚úî –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è  

‚úî –ù–∏–∫–∞–∫–∏—Ö –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –ª—É—á—à–µ –Ω–µ—Ç



---



## üëâ 1.3. –û–ë–†–ê–ë–û–¢–ö–ê ‚ÄúDOC = RAR‚Äù –§–û–†–ú–ê–¢–ê



–ï—Å—Ç—å 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞:



### –í–∞—Ä–∏–∞–Ω—Ç A ‚Äî –∞—Ä—Ö–∏–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç DOCX



### –í–∞—Ä–∏–∞–Ω—Ç B ‚Äî –∞—Ä—Ö–∏–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç:



- –ø–æ–¥–ø–∏—Å–∏/–ø–µ—á–∞—Ç–∏ –≤ –≤–∏–¥–µ JPEG

- DOCX –¥–æ–∫—É–º–µ–Ω—Ç



–¢–æ–≥–¥–∞:



–ü–æ—Ç–æ–º –æ–±–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è:



### Dockling —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ —Ñ–∞–π–ª–∞–º PDF/IMG/DOCX



–ü–æ—ç—Ç–æ–º—É –º—ã:



- DOCX ‚Üí Dockling TextExtractor

- JPEG ‚Üí Dockling OCR ‚Üí Layout ‚Üí TableExtractor

- –æ–±—ä–µ–¥–∏–Ω—è–µ–º JSON output



---



## üß© 2. DOCKLING INGESTION BLOCK ‚Äî –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢ –ü–û–î –ö–ê–ü–û–¢–û–ú



Dockling –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ **—Ç—Ä—ë–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∞–º**:



| –≠—Ç–∞–ø | –í—Ö–æ–¥ | –í—ã—Ö–æ–¥ |

| --- | --- | --- |

| Text Extraction | PDF/DOCX | JSON + internal tokens |

| OCR (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) | Image/PDF-image | OCR tokens JSON |

| Layout Analysis | tokens | layout.json |

| Table Extraction | layout.json | tables.json |

| Semantic/A.I. | text + tables | metadata.json |



Dockling —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç **–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ:



---



## üîç 2.1. Text Extraction Stage



### –í—Ö–æ–¥:



- DOCX

- PDF text

- OCR JSON (–µ—Å–ª–∏ –±—ã–ª OCR)



### –í—ã—Ö–æ–¥:



`text.json`



–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:



---



## üîç 2.2. OCR Stage (Dockling OCR)



Dockling OCR = **AI –º–æ–¥–µ–ª—å –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞** (–Ω–µ Tesseract).



### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞–¥ Tesseract:



- –ª—É—á—à–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã

- —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–º –ø–∞–π–ø–ª–∞–π–Ω–µ

- –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å skew/rotation

- –ª—É—á—à–µ –¥–ª—è –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö PDF



Dockling OCR ‚Äî —ç—Ç–æ **AI –º–æ–¥–µ–ª—å** –≤–Ω—É—Ç—Ä–∏ –ø–∞–∫–µ—Ç–∞ (CPU), –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–µ–≥–æ inference.



---



## üîç 2.3. Layout Analysis



### –í—Ö–æ–¥:



- text.json

- OCR tokens (–µ—Å–ª–∏ –±—ã–ª–∏)

- —Å—Ç—Ä–∞–Ω–∏—Ü—ã PDF (–≤ –≤–∏–¥–µ image tiles)



### –í—ã—Ö–æ–¥:



`layout.json`



---



## üîç 2.4. Table Extraction



–ò—Å–ø–æ–ª—å–∑—É–µ—Ç layout.json –∏ image/text layers.



### –í—ã—Ö–æ–¥:



`tables.json`



---



## üîç 2.5. Semantic AI Stage (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)



–ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ CPU.



–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:



- text.json

- layout.json

- tables.json



–í—ã–¥–∞—ë—Ç:



`semantic.json`



–ü—Ä–∏–º–µ—Ä—ã:



- –ò–ù–ù

- –¥–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

- –Ω–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞

- –§–ò–û

- –∞–¥—Ä–µ—Å–∞

- —Å—É–º–º—ã

- –ø–æ–¥–ø–∏—Å–∏



---



## üß© 3. POST-PROCESSING BLOCK



Dockling –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —Å–ª–æ–∏:



–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤:



- output.json

- output.md

- output.html



---



## üß© 4. WEBHOOK / CRON BLOCK



### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:



- cron launched ingestion

- HTTP webhook to start pipeline

- async queue (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)



---



## ‚öñÔ∏è –ò—Ç–æ–≥ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ç–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã



### ‚ùì –ö–∞–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç —É–∑–ª—ã Layout –∏ Table Extraction?



–û–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å:



- tokens (text)

- OCR tokens (–µ—Å–ª–∏ –µ—Å—Ç—å)

- rasterized PDF pages



–í—ã–¥–∞—é—Ç JSON.



---



### ‚ùì Dockling OCR vs Tesseract ‚Äî —á—Ç–æ –ª—É—á—à–µ?



**Dockling OCR –ª—É—á—à–µ**, –ø–æ—Ç–æ–º—É —á—Ç–æ:



- –≤—Å—Ç—Ä–æ–µ–Ω –≤ –ø–∞–π–ø–ª–∞–π–Ω

- –ø–æ–Ω–∏–º–∞–µ—Ç layout

- —É–ª—É—á—à–µ–Ω–Ω—ã–π table extraction

- —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –º–æ–¥–µ–ª—å –ò–ò (–∞ –Ω–µ –∞–ª–≥–æ—Ä–∏—Ç–º)

- –¥–∞—ë—Ç –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ



–ò—Å–ø–æ–ª—å–∑—É–µ–º **Dockling OCR**.



---



### ‚ùì DOC –∏ DOCX ‚Äì –∫–∞–∫ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç?



- `.docx` ‚Üí python-docx ‚Üí —Ö–æ—Ä–æ—à–æ

- `.doc` ‚Üí LibreOffice ‚Üí `.docx` ‚Üí python-docx

- ‚ÄúDOC-RAR‚Äù ‚Üí extract ‚Üí `.docx` + jpeg ‚Üí OCR



### –¢–∞–±–ª–∏—Ü—ã



–¢–∞–±–ª–∏—Ü—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –≤ `.docx` —Ç–∞–∫ –∂–µ, –∫–∞–∫ PDF-—Ç–∞–±–ª–∏—Ü—ã, –Ω–æ:



- —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ Word –ª–µ–≥—á–µ

- –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∞–º–Ω–æ–≥–æ –≤—ã—à–µ

- –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è OCR



---



### ‚ùì –í –∫–∞–∫–æ–º –≤–∏–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?



Dockling —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç:



---



## –•–æ—á–µ—à—å ‚Äî —Å–æ–±–µ—Ä—É —Ñ–∏–Ω–∞–ª—å–Ω—ã–π Docker Compose, –≤–∫–ª—é—á–∞—è:



- Dockling Core

- LibreOffice headless

- Python worker

- Sorter service

- Webhook API

- Cron runner

- Shared volumes

- Multi-format pipeline routing



‚ùì –î–µ–ª–∞—Ç—å —Ç–µ–ø–µ—Ä—å compose?



---



Layout –∏ Table Extraction –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ª–∏ —è –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —ç—Ç–∏ —É–∑–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Å –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ OCR-—Ç–æ–∫–µ–Ω–∞–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å. –Ω–æ —Ç–∞–∫–∂–µ –∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –≤ —Ä–∞—Å—Ç—Ä–æ–≤—ã–π –≤–∏–¥ PDF —Å–∫–∞–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –≤ —É–∑–ª–µ Layout, –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —Ç–∞–∫–∂–µ –≤ Table Extraction, —Å —É—á–µ—Ç–æ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —ç—Ç–∞–ø–∞—Ö –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ OSR —Ç–æ–∫–µ–Ω–æ–≤. –ö–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã —Ñ–æ—Ä–º–∏—Ä—É–µ–º?–í –∫–∞–∫–æ–π –º–æ–º–µ–Ω—Ç –ø–∞–π–ø–ª–∞–π–Ω–∞ –∏ –ø–æ—á–µ–º—É OSR —Ç–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∏ –º–æ–≥—É—Ç –Ω–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å? –ö—Å—Ç–∞—Ç–∏, –≤ –∫–∞–∫–æ–º —Å–ª—É—á–∞–µ OCR-—Ç–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å, –µ—Å–ª–∏ –º—ã –Ω–∞ –≤—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.



---



–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ**, –∫–∞–∫ —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —É–∑–ª—ã  

**Layout Analysis** –∏ **Table Extraction** –≤ Dockling, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç, –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è OCR-—Ç–æ–∫–µ–Ω—ã, –ø–æ—á–µ–º—É –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–ª–∏ –Ω–µ –±—ã—Ç—å, –∏ –∫–∞–∫—É—é —Ä–æ–ª—å –∏–≥—Ä–∞—é—Ç —Ä–∞—Å—Ç—Ä–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü PDF.



---



## ‚úÖ 1. –î–∞ ‚Äî Layout –∏ Table Extraction –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤—Å–µ —Ç—Ä–∏ –≤–∏–¥–∞ –¥–∞–Ω–Ω—ã—Ö



Dockling –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ **—Ç—Ä—ë–º —É—Ä–æ–≤–Ω—è–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**:



### 1\. –¢–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π (Text Layer)



–ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç (PDF text layer, DOCX text, DOC ‚Üí DOCX ‚Üí text extraction):



- Dockling –∏–º–µ–µ—Ç *–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã* ‚Üí bounding boxes —Ç–µ–∫—Å—Ç–∞.



### 2\. OCR —Ç–æ–∫–µ–Ω—ã (–µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω OCR)



–ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç **—Å–∫–∞–Ω**, —Ç–æ —Ç–µ–∫—Å—Ç–∞ –Ω–µ—Ç ‚Üí –¥–µ–ª–∞–µ—Ç—Å—è OCR:



- Dockling OCR —Å–æ–∑–¥–∞—ë—Ç –Ω–∞–±–æ—Ä OCR-—Ç–æ–∫–µ–Ω–æ–≤:



### 3\. –†–∞—Å—Ç—Ä–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Page Images)



Dockling –í–°–ï–ì–î–ê –ø–æ–¥–Ω–∏–º–∞–µ—Ç PDF-—Å—Ç—Ä–∞–Ω–∏—Ü—ã **–≤ —Ä–∞—Å—Ç—Ä**, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–∞–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π.



–ü—Ä–∏–º–µ—Ä:  

PDF ‚Üí rasterize ‚Üí image.png (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞)



---



## ‚öôÔ∏è 2. –ö–∞–∫ –∏–º–µ–Ω–Ω–æ Layout –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–µ–∫—Å—Ç –∏ OCR



### üëâ Layout = –º—É–ª—å—Ç–∏-–∏—Å—Ç–æ—á–Ω–∏–∫ –∞–Ω–∞–ª–∏–∑–∞



Layout –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É, –∏—Å–ø–æ–ª—å–∑—É—è:



| –ò—Å—Ç–æ—á–Ω–∏–∫ | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è? | –î–ª—è —á–µ–≥–æ |

| --- | --- | --- |

| –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã | Yes | –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏, –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã |

| OCR —Ç–æ–∫–µ–Ω—ã | If exist | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç, –µ—Å–ª–∏ PDF —Å–∫–∞–Ω |

| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | ALWAYS | –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏, —Ç–∞–±–ª–∏—Ü—ã, –≥—Ä–∞–Ω–∏—Ü—ã, –ª–∏–Ω–∏–∏, –ø–æ–¥–ø–∏—Å–∏ |



–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:



> **Layout —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≥–∏–±—Ä–∏–¥: –æ–Ω —Å–º–æ—Ç—Ä–∏—Ç –≤ —Ç–µ–∫—Å—Ç, –∏ –≤ –∫–∞—Ä—Ç–∏–Ω–∫—É, –∏ –≤ OCR –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.**



–≠—Ç–æ –∫—Ä–∞–π–Ω–µ –≤–∞–∂–Ω–æ –¥–ª—è —Ç–∞–±–ª–∏—Ü, –ø–æ–¥–ø–∏—Å–µ–π, –ø–µ—á–∞—Ç–µ–π –∏ —à—Ç–∞–º–ø–æ–≤.



---



## üîç 3. –ö–æ–≥–¥–∞ OCR —Ç–æ–∫–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –∞ –∫–æ–≥–¥–∞ ‚Äî –Ω–µ—Ç



### üìå –°–ª—É—á–∞–π 1 ‚Äî PDF —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π



–ü—Ä–∏–º–µ—Ä: –¥–æ–∫—É–º–µ–Ω—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏–∑ Word/Google Docs.



- OCR –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

- OCR-—Ç–æ–∫–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

- Layout –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ**



### üìå –°–ª—É—á–∞–π 2 ‚Äî PDF-—Å–∫–∞–Ω –∏–ª–∏ JPEG



–ü—Ä–∏–º–µ—Ä: –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–∫—Ç, –¥–æ–≥–æ–≤–æ—Ä, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.



- OCR –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è Dockling OCR

- OCR —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

- Layout –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

	- OCR tokens

	- raster image

	- –Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è



### üìå –°–ª—É—á–∞–π 3 ‚Äî DOCX



–¢–µ–∫—Å—Ç –±–µ—Ä—ë—Ç—Å—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é:



- OCR –Ω–µ—Ç

- OCR tokens –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

- Layout –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ text tokens + layout hints



–ó–∞–º–µ—á–∞–Ω–∏–µ: DOCX —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤, –Ω–æ **–Ω–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**.  

Dockling —Å–∞–º —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç page layout.



### üìå –°–ª—É—á–∞–π 4 ‚Äî DOC ‚Üí –∞—Ä—Ö–∏–≤ ‚Üí JPEG-—Å–∫–∞–Ω



(—Ç–≤–æ–π –æ—Å–æ–±—ã–π –∫–µ–π—Å)



- JPEG ‚Üí OCR ‚Üí OCR tokens

- DOCX ‚Üí text tokens

- Layout –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç **–æ–±–∞ —Å–ª–æ—è**



---



## üîÄ 4. –ö–∞–∫ Layout —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã



Layout –ø–æ–ª—É—á–∞–µ—Ç:



–ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ:



1. –í—ã–ø–æ–ª–Ω—è–µ—Ç **–¥–µ—Ç–µ–∫—Ü–∏—é –±–ª–æ–∫–æ–≤** (vision model):

	- —Ç–∞–±–ª–∏—Ü—ã

	- –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã

	- –∫–∞—Ä—Ç–∏–Ω–∫–∏

	- –ø–æ–¥–ø–∏—Å–∏/–ø–µ—á–∞—Ç–∏

	- –≥—Ä–∞—Ñ–∏–∫–∞

2. –í—ã–ø–æ–ª–Ω—è–µ—Ç **text region alignment**:

	- —Ä–∞–∑–º–µ—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

	- –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç reading order

	- —Å–≤—è–∑—ã–≤–∞–µ—Ç OCR —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –±–ª–æ–∫–∞–º–∏ —Ç–∞–±–ª–∏—Ü

3. –°–æ–∑–¥–∞—ë—Ç `layout.json`:



---



## üßÆ 5. –ö–∞–∫ Table Extraction –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ



Table Extraction ‚Äî —ç—Ç–æ –Ω–µ OCR.  

–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-–¥—Ä—É–≥–æ–º—É.



–û–Ω –±–µ—Ä—ë—Ç:



- **layout.json (bounding boxes —Ç–∞–±–ª–∏—Ü)**

- **OCR tokens** (–µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Å–∫–∞–Ω)

- **text tokens** (–µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç PDF-—Ç–µ–∫—Å—Ç –∏–ª–∏ DOCX)

- **page image** (–¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –ª–∏–Ω–∏–π)



### Table Extraction –≤—ã–ø–æ–ª–Ω—è–µ—Ç:



1. –ü–æ–∏—Å–∫ —Ç–∞–±–ª–∏—Ü—ã –ø–æ bbox –∏–∑ Layout

2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫/–∫–æ–ª–æ–Ω–æ–∫

3. –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—é —è—á–µ–µ–∫

4. –í—Å—Ç–∞–≤–∫—É —Ç–µ–∫—Å—Ç–∞ –≤ —è—á–µ–π–∫—É:



### –í –∏—Ç–æ–≥–µ:



`tables.json`:



---



## üéØ 6. –ü–æ—á–µ–º—É OCR —Ç–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å, –∞ –º–æ–≥—É—Ç –Ω–µ –±—ã—Ç—å?



### OCR —Ç–æ–∫–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç:



- –µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç **–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ** (PDF-—Å–∫–∞–Ω –∏–ª–∏ JPEG)

- –µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≥—Ä–∞—Ñ–∏–∫—É —Ç–µ–∫—Å—Ç–∞ (—Ñ–∞–∫—Å, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è)



### OCR —Ç–æ–∫–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:



- –µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç **—Ä–µ–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π**

	- PDF export

	- DOCX

	- DOC‚ÜíDOCX



OCR –Ω–µ –Ω—É–∂–µ–Ω ‚Üí Dockling –µ–≥–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç.



---



## üéûÔ∏è 7. –ö–æ–≥–¥–∞ –º—ã –ø–æ–¥–∞—ë–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Dockling?



Dockling –í–°–ï–ì–î–ê –¥–µ–ª–∞–µ—Ç —Ä–∞—Å—Ç—Ä —Å—Ç—Ä–∞–Ω–∏—Ü PDF:



–ò –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ OCR:



---



## üß† –ò—Ç–æ–≥–∏



### –î–∞ ‚Äî Layout –∏ Table Extraction –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.



### –î–∞ ‚Äî –æ–Ω–∏ –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç —Ç–µ–∫—Å—Ç, OCR –∏ vision-–º–æ–¥–µ–ª–∏.



### OCR –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö, –≥–¥–µ –Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è



(—Å–∫–∞–Ω—ã, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, JPEG –≤–Ω—É—Ç—Ä–∏ DOC-–∞—Ä—Ö–∏–≤–æ–≤).



### OCR —Ç–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞.



### Table Extraction —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –≥–∏–±—Ä–∏–¥–Ω–æ–π —Å—Ö–µ–º–µ:



- layout bounding boxes + OCR —Ç–µ–∫—Å—Ç + —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.



---



–•–æ—á–µ—à—å ‚Äî —Ä–∞–∑–±–µ—Ä—ë–º **–ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π Dockling –ø–æ –≤—Ä–µ–º–µ–Ω–∏**,  

–∏–ª–∏ —è –º–æ–≥—É –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å **—Å—Ö–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ —Ç–æ—á–∫–∞–º–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π**.



---



–Ø —Ö–æ—á—É —É—Ç–æ—á–Ω–∏—Ç—å –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç. –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, –≥–¥–µ –Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è, —Ç–æ –µ—Å—Ç—å PDF Scan, JPEG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –Ω—É–∂–Ω–æ –ª–∏ –Ω–∞–º –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç —ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∞, —Ç–µ–∫—Å—Ç —Ç–æ–∫–µ–Ω–æ–≤, –∏–ª–∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã –æ–±—Ö–æ–¥–∏–º—Å—è —Ç–æ–ª—å–∫–æ OcR —Ç–æ–∫–µ–Ω–∞–º–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏ OcR –ø—Ä–æ—Ü–µ—Å—Å–µ? –ö–ª—é—á–µ–≤–æ–π –≤–æ–ø—Ä–æ—Å, –Ω—É–∂–Ω–æ –ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å text extraction –¥–ª—è —Ñ–∞–π–ª–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –±—ã–ª–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–æ OCR –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —Ç–æ –µ—Å—Ç—å —Ñ–∞–π–ª –ø–æ–ª—É—á–∏–ª OCR —Ç–æ–∫–µ–Ω—ã –∏ –±—ã–ª –∏–∑–≤–ª–µ—á–µ–Ω —Ç–µ–∫—Å—Ç. –ò –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —è –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ TextExtraction –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç, —Ç–∞–∫–æ–π –∫–∞–∫ PDF Text Layer, DOXText, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–∏ —Ñ–∞–π–ª—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç OSR –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —É –Ω–∏—Ö –Ω–µ –±—É–¥–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤, –Ω–æ –º—ã –¥–æ–ª–∂–Ω—ã –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ TextExtraction –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç —Ç–æ–∫–µ–Ω—ã.



---



–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–∏, **–∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω Text Extraction**, –∞ –∫–æ–≥–¥–∞ **OCR –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω—è–µ—Ç –µ–≥–æ**.



–î–∞–≤–∞–π —Ä–∞–∑–ª–æ–∂–∏–º **—Ç–æ—á–Ω–æ –∏ –±–µ–∑ –ø—É—Ç–∞–Ω–∏—Ü—ã**, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Dockling –≤ —ç—Ç–∏—Ö –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö.



---



## üü¶ 1. –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è (PDF scan, JPEG, —Ñ–æ—Ç–æ)



## ‚úî –¢–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π = –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç



PDF –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚Üí Dockling –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `/Contents` –∏ `/Font` —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Üí **—Ç–µ–∫—Å—Ç–∞ –Ω–µ—Ç**.



## ‚úî –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è OCR



–ù–∞–ø—Ä–∏–º–µ—Ä Docling OCR –∏–ª–∏ Tesseract.



–†–µ–∑—É–ª—å—Ç–∞—Ç OCR –¥–∞—ë—Ç:



### üìå OCR tokens



### üìå OCR text (plain text rebuild)



Dockling —Å–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –≤ —Å—Ç—Ä–æ–∫–∏ –∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã:



–¢–æ –µ—Å—Ç—å OCR = —Ç–µ–∫—Å—Ç + —Ç–æ–∫–µ–Ω—ã.



## ‚ùå Text Extraction –ù–ï –Ω—É–∂–µ–Ω



**–ú—ã –ù–ï –∑–∞–ø—É—Å–∫–∞–µ–º TextExtraction –¥–ª—è —Å–∫–∞–Ω–æ–≤.**



–ü–æ—á–µ–º—É:  

TextExtraction —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞ (PDF structure, DOCX XML).  

–ö–æ–≥–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ PDF-—Ç–µ–∫—Å—Ç–∞ –Ω–µ—Ç ‚Äî TextExtraction –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞.



## –ò—Ç–æ–≥ –¥–ª—è —Å–∫–∞–Ω–æ–≤:



| –ß—Ç–æ | –ò—Å—Ç–æ—á–Ω–∏–∫ |

| --- | --- |

| Text content | —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏–∑ OCR tokens |

| Tokens | OCR tokens |

| Layout | –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OCR tokens + raster |

| Tables | –∏—Å–ø–æ–ª—å–∑—É—é—Ç OCR tokens |



üìå **TextExtraction –¥–ª—è —Å–∫–∞–Ω–æ–≤ –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.**  

OCR –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Å–ª–æ–µ.



---



## üü© 2. –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –°–û–î–ï–†–ñ–ò–¢ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π (PDF text layer, DOCX)



–ó–¥–µ—Å—å –Ω–∞–æ–±–æ—Ä–æ—Ç:



## ‚úî Text Layer –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç



PDF —Å–æ–¥–µ—Ä–∂–∏—Ç operator streams (`TJ`, `Tj`, fonts), –∏–ª–∏ DOCX —Å–æ–¥–µ—Ä–∂–∏—Ç XML.



## ‚úî –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è Text Extraction



–≠—Ç–æ –ù–ï OCR.  

–≠—Ç–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑:



### PDF



- —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞

- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à—Ä–∏—Ñ—Ç–∞—Ö

- —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ—Ç–æ–∫



### DOCX



- XML –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã

- —Å–ø–∏—Å–∫–∏

- —Ç–∞–±–ª–∏—Ü—ã

- —Å—Ç–∏–ª–µ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã



## ‚ùå OCR –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è



–ü–æ—Ç–æ–º—É —á—Ç–æ Dockling –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π.



## –ò—Ç–æ–≥ –¥–ª—è PDF text/DOCX:



| –ß—Ç–æ | –ò—Å—Ç–æ—á–Ω–∏–∫ |

| --- | --- |

| Text content | PDF text layer / DOCX |

| Tokens | text tokens (coordinate tokens) |

| Layout | text tokens + raster (PDF raster only) |

| Tables | text tokens |



üìå **OCR –ù–ï –Ω—É–∂–µ–Ω, –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ OCR —Ç–æ–∫–µ–Ω–æ–≤ –Ω–µ—Ç.**



---



## üü® 3. –Ø–¥—Ä–æ –≤–∞—à–µ–π –ª–æ–≥–∏–∫–∏ ‚Äî –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ TextExtraction –∏ OCR ‚Äî —ç—Ç–æ –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞



### ‚úî TextExtraction = –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –≤ —Ñ–∞–π–ª–µ



### ‚úî OCR = –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –≤ —Ñ–∞–π–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç



### ‚õî –û–±–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ù–ï –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è



Dockling pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∞–≤–∏–ª—É:



---



## üüß 4. –ö–ª—é—á–µ–≤–æ–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å



### ‚ùó–ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Å–∫–∞–Ω ‚Äî —Ç–µ–∫—Å—Ç extraction –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è



OCR –¥–∞—ë—Ç –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ:



- OCR-Text (–∫–∞–∫ plain text)

- OCR tokens

- bounding boxes



TextExtraction *–ø—É—Å—Ç–æ–π*, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–∫—Å—Ç–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –Ω–µ—Ç.



### ‚ùóTextExtraction –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π —É–∂–µ –µ—Å—Ç—å



PDF text layer  

–∏–ª–∏  

DOCX (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ XML)



---



## üü© 5. –ü—Ä–∏–º–µ—Ä –¥–≤—É—Ö –ø–∞–π–ø–ª–∞–π–Ω–æ–≤



## üìå A. PDF scan / JPEG



–ù–µ—Ç TextExtraction.



## üìå B. PDF with text layer / DOCX



–ù–µ—Ç OCR.



---



## üü¶ 6. –í–µ—Ä–Ω–æ –ª–∏ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ? ‚Äî –î–ê



–í–∞—à–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:



### ‚úî TextExtraction –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö (PDF with text layer, DOCX)



### ‚úî OCR –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–∫–∞–Ω–∞—Ö –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö



### ‚úî –û–Ω–∏ –ù–ï —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ



### ‚úî OCR-—Ç–æ–∫–µ–Ω—ã = —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ text tokens –¥–ª—è —Å–∫–∞–Ω–æ–≤



### ‚úî Layout –∏ Table Extraction —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —Å —Ç–µ–º–∏, –∏ —Å —Ç–µ–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏



---



## üü© –ì–æ—Ç–æ–≤ –¥–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –¥–µ—Ç–∞–ª—å:



–•–æ—á–µ—à—å, —è —Å–æ–±–µ—Ä—É **–µ–¥–∏–Ω—ã–π decision tree**, –∫–æ—Ç–æ—Ä—ã–π Dockling –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:



- –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–∏ OCR

- –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–∏ TextExtraction

- –∫–∞–∫–∏–µ —Ç–æ–∫–µ–Ω—ã –ø–æ–ø–∞–¥—É—Ç –≤ layout/table

- –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã —Ç—Ä–µ–±—É—é—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏.doc ‚Üí.docx

- –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å doc+JPEG –≤–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–∞



–ò–ª–∏ —Ç–µ–±–µ –Ω—É–∂–µ–Ω **–ø–æ—à–∞–≥–æ–≤—ã–π –¥–µ—Ç–∞–ª—å–Ω—ã–π pipeline** (2‚Äì3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã), –≥–¥–µ –ø–æ–∫–∞–∑–∞–Ω–æ, –≥–¥–µ –∫–∞–∫–æ–π JSON —Å–æ–∑–¥–∞—ë—Ç—Å—è?



---



–¢–µ–ø–µ—Ä—å, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã —É—Ç–æ—á–Ω–∏–ª–∏ –≤—Å–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –Ω–∞—Å –∞—Å–ø–µ–∫—Ç—ã, —è –±—ã —Ö–æ—Ç–µ–ª –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É. –í–æ–ø—Ä–æ—Å –≤ —Ç–æ–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ª–∏ –Ω–∞–º –≤—ã–Ω–æ—Å–∏—Ç—å –≤ –∫–∞—Å—Ç–æ–º–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π —Å–ª–æ–π –∏–∑ –¥–æ–∫–ª–∏–Ω–∞ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏–ª–∏ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–æ –∫–∞–∫ —á–∞—Å—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –¥–æ–∫–ª–∏–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –µ—Å–ª–∏ –º—ã –Ω–∞ –≤—Ö–æ–¥–µ –±—É–¥–µ–º –ø–æ–¥–∞–≤–∞—Ç—å –Ω–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –Ω–∞–±–æ—Ä–æ–º —Ñ–∞–π–ª–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –¥–æ–∫–ª–∏–Ω, –ø—É—Å—Ç—å –¥–∞–∂–µ –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏, –∏–ª–∏ –∂–µ –Ω–∞–º –±—É–¥–µ—Ç –ª—É—á—à–µ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –¥–æ–∫–ª–∏–Ω–≥, —Ç–∞–∫ –∫–∞–∫ —É –Ω–∞—Å –±—É–¥—É—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–∞–∫–µ—Ç–Ω–æ. Context: –û—Ç–ª–∏—á–Ω–æ ‚Äî —Å–¥–µ–ª–∞–µ–º –∑–∞–º–µ–Ω—É Tesseract –Ω–∞ \*\*Docling OCR\*\* –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≤ Docker-compose, –¥–æ–±–∞–≤–∏–º \*\*API (webhook / upload)\*\* –∏ \*\*–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ pipeline\*\* (cron-like scheduler). –ù–∏–∂–µ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∑–∞–º–µ–Ω—ã –ø–ª—é—Å —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –Ω–∞ –≤–∞—à–µ–º DigitalOcean (2 vCPU / 8 GB). –ö—Ä–∞—Ç–∫–æ: –¥–∞ ‚Äî Docling OCR —á–∞—Å—Ç–æ –¥–∞—ë—Ç \*\*–ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ\*\* –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö/—à—É–º–Ω—ã—Ö/–∏—Å–∫—Ä–∏–≤–ª—ë–Ω–Ω—ã—Ö —Å–∫–∞–Ω–∞—Ö –∏ –ø—Ä–∏ —Å–ª–æ–∂–Ω–æ–π –≤—ë—Ä—Å—Ç–∫–µ/—Ç–∞–±–ª–∏—Ü–∞—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–π vision-–º–æ–¥—É–ª—å, —Ç–æ–≥–¥–∞ –∫–∞–∫ Tesseract ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π OCR (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π, –Ω–æ —Ö—É–∂–µ –Ω–∞ ¬´–≥—Ä—è–∑–Ω—ã—Ö¬ª —Å–∫–∞–Ω–∞—Ö). –û–¥–Ω–∞–∫–æ Docling –æ–±—ã—á–Ω–æ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ CPU –∏ –ø–∞–º—è—Ç–∏, –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –∏ –µ–≥–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ñ–∞–π–ª–∏—Ç—å –Ω–∞ –≤–∞—à–µ–π –≤—ã–±–æ—Ä–∫–µ. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: \*\*–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docling OCR –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π\*\* –∏ –æ—Å—Ç–∞–≤–∏—Ç—å Tesseract –∫–∞–∫ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π fallback (–∫–æ–Ω—Ñ–∏–≥–∏—Ä—É–µ–º–æ) ‚Äî —ç—Ç–æ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –¥–∞—ë—Ç –Ω–∞–∏–ª—É—á—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞/–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏. --- # 1) –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞: Docling OCR vs Tesseract \*\*Docling OCR (–Ω–µ–π—Ä–æ—Å–µ—Ç—å, CPU-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ –≤–∞—à–µ–º –¥–∏–∑–∞–π–Ω–µ)\*\* \* –ü–ª—é—Å—ã: \* –õ—É—á—à–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–µ/—à—É–º–Ω—ã–µ —Å–∫–∞–Ω—ã, —Å–ª–æ–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –º–Ω–æ–≥–æ—Ñ–æ—Ä–º–∞—Ç–Ω—ã–π layout. \* –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Layout / Table AI Docling (–º–µ–Ω—å—à–µ —Ä–∞–∑–Ω–æ—á—Ç–µ–Ω–∏–π –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü –∏ –±–ª–æ–∫–æ–≤). \* –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—ã—Å–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å downstream (–º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –¥–ª—è regex/LLM). \* –ú–∏–Ω—É—Å—ã: \* –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ CPU/RAM, –º–µ–¥–ª–µ–Ω–Ω–µ–µ –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ. \* –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞. \* M–∞–ª–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –±–æ–ª—å—à–∏—Ö –±–∞—Ç—á–µ–π –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–∞—Ö (–Ω—É–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å). \*\*Tesseract (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π OCR)\*\* \* –ü–ª—é—Å—ã: \* –õ—ë–≥–∫–∏–π, –±—ã—Å—Ç—Ä—ã–π, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –≤ –ø—Ä–æ–¥–µ, –º–∞–ª–æ —Ä–µ—Å—É—Ä—Å–æ–≤. \* –•–æ—Ä–æ—à –Ω–∞ —á–∏—Å—Ç—ã—Ö —Å–∫–∞–Ω–∞—Ö/—Ñ–æ—Ç–æ —Ö–æ—Ä–æ—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞. \* –ú–∏–Ω—É—Å—ã: \* –ü–ª–æ—Ö –Ω–∞ —à—É–º–µ, —Å–ª–æ–∂–Ω–æ–π –≤–µ—Ä—Å—Ç–∫–µ, —Ç–∞–±–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö. \* –ß–∞—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥- –∏ –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∏ (binarization, deskew, denoise). \*\*–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ:\*\* Docling OCR ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π; Tesseract ‚Äî fallback (–µ—Å–ª–∏ Docling –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫–∏ –∏–ª–∏ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É —Ö–æ—Ç–∏–º —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã). –ù–∞ 2 vCPU/8GB –¥–ª—è —Ç–µ—Å—Ç–∞ 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ Docling CPU-–≤–µ—Ä—Å–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –Ω–∞–≥—Ä—É–∑–∫–∞ –∏ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ—Ä—è—Ç—å. --- # 2) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ–∞–ª–∏–∑—É–µ–º (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è) \* `input/` ‚Äî –µ–¥–∏–Ω–∞—è –ø–∞–ø–∫–∞ –≤—Ö–æ–¥–∞ (–ª—é–±—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã). \* `router` (FastAPI) ‚Äî API upload, webhook, file classifier, –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç/–º–∞—Ä–∫–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã. \* `libreoffice` ‚Äî headless –¥–ª—è `.doc ‚Üí .docx` (–Ω–∞–±–ª—é–¥–∞–µ—Ç /input –∏–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è router). \* `docling` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (API + OCR + Layout + Table + exporter). Docling OCR –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ Tesseract. \* `scheduler` ‚Äî cron-like (APScheduler) –≤—ã–∑—ã–≤–∞–µ—Ç endpoint router/process –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ batch. \* `output/` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (json/md/html). \* (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `tesseract-fallback` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å Tesseract, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —Ñ–ª–∞–≥—É/–ø—Ä–∏ –æ—à–∏–±–∫–µ. –ú—ã \*\*–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º Redis\*\* –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ç–µ—Å—Ç–∞; –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —á–µ—Ä–µ–∑ HTTP-–≤—ã–∑–æ–≤—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏. --- # 3) docker-compose.yml (–≥–æ—Ç–æ–≤—ã–π, —Å Docling –≤–º–µ—Å—Ç–æ Tesseract) –°–Ω–∏–∑—É ‚Äî –ø–æ–ª–Ω—ã–π `docker-compose.yml`. –ü–æ—Å–ª–µ –Ω–µ–≥–æ —è –¥–∞—é –∫—Ä–∞—Ç–∫–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–ª—è router + scheduler.

```

yaml

version: "3.9"

services:



  # –û—Å–Ω–æ–≤–Ω–æ–π Dockling API + OCR (–∏—Å–ø–æ–ª—å–∑—É–µ–º Docling OCR –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π)

  docling:

    image: ghcr.io/yourorg/docling:latest   # –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑

    container_name: docling

    restart: unless-stopped

    environment:

      - DOC_PATH=/data/input

      - OUT_PATH=/data/output

      - OCR_ENGINE=docling   # –∫–ª—é—á: docling (–≤–º–µ—Å—Ç–æ tesseract)

      - OCR_THREADS=2

      - LAYOUT_ENABLED=true

      - TABLE_ENABLED=true

    volumes:

      - ./input:/data/input

      - ./output:/data/output

      - ./temp:/data/temp

    ports:

      - "8000:8000"

    healthcheck:

      test: ["CMD", "curl", "-f", "http://localhost:8000/health" ]

      interval: 30s

      timeout: 5s

      retries: 3



  # LibreOffice headless –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ .doc -> .docx

  libreoffice:

    image: libreoffice/docknative:latest   # –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ: –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –∏–∑ ubuntu+libreoffice

    container_name: libreoffice

    restart: unless-stopped

    volumes:

      - ./input:/data/input

      - ./temp:/data/temp

    command: >

      bash -c "while true; do inotifywait -e close_write -m /data/input --format '%f' |

        while read file; do

          ext=${file##*.};

          if [ \"${ext,,}\" = \"doc\" ]; then

            soffice --headless --convert-to docx --outdir /data/input /data/input/$file || echo 'convert-fail' ;

          fi;

        done;

      done"

    healthcheck:

      test: ["CMD", "ls", "/data/input" ]

      interval: 60s

      timeout: 5s

      retries: 3



  # Router ‚Äî –ø—Ä–∏–µ–º —Ñ–∞–π–ª–æ–≤, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç—Ä–∏–≥–≥–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ (FastAPI)

  router:

    build:

      context: ./router

      dockerfile: Dockerfile

    container_name: router

    restart: unless-stopped

    depends_on:

      - docling

      - libreoffice

    environment:

      - INPUT_DIR=/app/input

      - TEMP_DIR=/app/temp

      - DOCILING_API=http://docling:8000/process

      - WEBHOOK_SECRET=add-your-secret-here

    volumes:

      - ./input:/app/input

      - ./temp:/app/temp

      - ./output:/app/output

    ports:

      - "8080:8080"

    healthcheck:

      test: ["CMD", "curl", "-f", "http://localhost:8080/health" ]

      interval: 30s

      timeout: 5s

      retries: 3



  # Scheduler ‚Äî cron-like (APScheduler) –≤—ã–∑—ã–≤–∞–µ—Ç router/process (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫)

  scheduler:

    build:

      context: ./scheduler

      dockerfile: Dockerfile

    container_name: scheduler

    restart: unless-stopped

    depends_on:

      - router

    environment:

      - ROUTER_API=http://router:8080/process_now

      - SCHEDULE_CRON=*/15 * * * *   # –ø—Ä–∏–º–µ—Ä: –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç

    volumes:

      - ./temp:/app/temp



  # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Tesseract fallback, –µ—Å–ª–∏ —Ö–æ—Ç–∏–º –∏–º–µ—Ç—å –µ–≥–æ

  tesseract:

    image: tesseractshadow/tesseract4re:latest

    container_name: tesseract

    restart: "no"

    volumes:

      - ./temp:/data

    # –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏; router —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ–≥–æ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

```

\--- # 4) router ‚Äî FastAPI: upload/webhook –∏ –ª–æ–≥–∏–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ `router` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏, –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∏ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç Docling. –ù–∏–∂–µ ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä (`router/main.py`) ‚Äî –ø–æ–ª–æ–∂–∏ –≤./router:

```

python

# router/main.py

import os, shutil, requests, hashlib, hmac, time

from fastapi import FastAPI, File, UploadFile, Header, HTTPException

from pathlib import Path

from subprocess import run



app = FastAPI()

INPUT = os.environ.get("INPUT_DIR", "/app/input")

TEMP = os.environ.get("TEMP_DIR", "/app/temp")

DOCILING_API = os.environ.get("DOCILING_API", "http://docling:8000/process")

WEBHOOK_SECRET = os.environ.get("WEBHOOK_SECRET", "secret")



os.makedirs(INPUT, exist_ok=True)

os.makedirs(TEMP, exist_ok=True)



def save_upload(file: UploadFile, dest_folder: str = INPUT):

    dest = Path(dest_folder) / file.filename

    with open(dest, "wb") as f:

        f.write(file.file.read())

    return str(dest)



def has_pdf_text_layer(path):

    # –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ pypdf (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ requirements)

    from pypdf import PdfReader

    try:

        r = PdfReader(path)

        for p in r.pages:

            if p.extract_text():

                return True

        return False

    except:

        return False



@app.post("/upload")

async def upload(file: UploadFile = File(...)):

    path = save_upload(file)

    return {"status": "saved", "path": path}



@app.post("/webhook")

async def webhook(payload: dict, x_signature: str = Header(None)):

    # –ø—Ä–æ—Å—Ç–∞—è HMAC –ø—Ä–æ–≤–µ—Ä–∫–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

    if WEBHOOK_SECRET:

        sig = x_signature or ""

        expected = hmac.new(WEBHOOK_SECRET.encode(), str(payload).encode(), "sha256").hexdigest()

        if not hmac.compare_digest(sig, expected):

            raise HTTPException(status_code=403, detail="Invalid signature")

    # assume payload contains file path or URL, we only support local path for now

    file_path = payload.get("file_path")

    if not file_path or not Path(file_path).exists():

        raise HTTPException(status_code=400, detail="file_path missing or not found")

    # trigger processing

    return process_file(file_path)



def trigger_docling_process(file_path, ocr=True):

    data = {"path": file_path, "ocr": ocr}

    resp = requests.post(DOCILING_API, json=data, timeout=120)

    return resp.json()



def classify_and_route(path):

    ext = Path(path).suffix.lower()

    if ext == ".doc":

        # LibreOffice running in container will convert .doc to .docx automatically

        # Wait for conversion to appear as file.docx (simple poll)

        base = Path(path).stem

        converted = Path(path).with_suffix(".docx")

        # give libreoffice some time (or let it run async)

        for i in range(12):

            if converted.exists():

                return str(converted)

            time.sleep(1)

        # if not converted ‚Äî force call soffice (local fallback)

        try:

            run(["soffice", "--headless", "--convert-to", "docx", str(path), "--outdir", str(Path(path).parent)])

            return str(converted)

        except Exception:

            return str(path)

    if ext == ".pdf":

        if has_pdf_text_layer(path):

            return path, False

        else:

            return path, True

    return path, False



@app.post("/process")

def process_now():

    # process all files in INPUT

    processed = []

    for f in os.listdir(INPUT):

        full = str(Path(INPUT)/f)

        result = process_file(full)

        processed.append(result)

    return {"processed": processed}



def process_file(fullpath):

    # classify

    ext = Path(fullpath).suffix.lower()

    if ext == ".doc":

        converted = classify_and_route(fullpath)

        # converted may be (path, ocrflag) if pdf, but for .doc we get path

        return trigger_docling_process(converted, ocr=False)

    if ext == ".docx":

        return trigger_docling_process(fullpath, ocr=False)

    if ext == ".pdf":

        path, need_ocr = classify_and_route(fullpath)

        return trigger_docling_process(path, ocr=need_ocr)

    # fallback: send as text file

    return {"status":"skipped", "path": fullpath}

```

`router/requirements.txt` –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å `fastapi`, `uvicorn`, `requests`, `pypdf`.`router/Dockerfile` –ø—Ä–æ—Å—Ç–æ–π:

```

dockerfile

FROM python:3.11-slim

WORKDIR /app

COPY ./main.py /app/main.py

COPY ./requirements.txt /app/requirements.txt

RUN pip install --no-cache-dir -r requirements.txt

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8080"]

```

\--- # 5) scheduler ‚Äî cron-like (APScheduler) ‚Äî –ø—Ä–∏–º–µ—Ä—ã –í–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º `cron` —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é `APScheduler` –≤ Python ‚Äî –≥–∏–±—á–µ –∏ –ª–µ–≥—á–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑—É–µ—Ç—Å—è. –ü–æ–ª–æ–∂–∏—Ç–µ –≤ `./scheduler`:`scheduler/main.py`:

```

python

import os, requests, time

from apscheduler.schedulers.blocking import BlockingScheduler



ROUTER_API = os.environ.get("ROUTER_API", "http://router:8080/process")

CRON = os.environ.get("SCHEDULE_CRON", "*/15 * * * *")



sched = BlockingScheduler()



# –ø—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ (–∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç)

@sched.scheduled_job('interval', minutes=15)

def do_batch():

    try:

        r = requests.post(ROUTER_API, timeout=300)

        print("Triggered router:", r.status_code, r.text)

    except Exception as e:

        print("Scheduler error", e)



if __name__ == "__main__":

    sched.start()

```

`scheduler/Dockerfile`:

```

dockerfile

FROM python:3.11-slim

WORKDIR /app

COPY main.py /app/main.py

RUN pip install apscheduler requests

CMD ["python", "main.py"]

```

(–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ç–æ—á–Ω—É—é cron-—Å—Ç—Ä–æ–∫—É ‚Äî –º–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª; –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª 15 –º–∏–Ω—É—Ç) --- # 6) Docling API: –∫–∞–∫ –æ–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ `docling` —Ä–µ–∞–ª–∏–∑—É–µ—Ç HTTP endpoint:`POST /process` body `{"path": "/data/input/file.pdf", "ocr": true}` ‚Äî Docling –±–µ—Ä–µ—Ç —Ñ–∞–π–ª, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω—É–∂–Ω—ã–µ —à–∞–≥–∏ (OCR –µ—Å–ª–∏ `ocr=true`, layout, tables, export) –∏ –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `/data/output/<file>.json` –∏ `.md`. –ï—Å–ª–∏ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π Docling API –¥—Ä—É–≥–æ–π ‚Äî –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ `router` –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç. –í–∞–∂–Ω–æ: \*\*docling –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docling OCR\*\* (env `OCR_ENGINE=docling` –≤ compose). --- # 7) –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ \* –õ–æ–≥–∏: –º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ `./logs` –∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ stdout –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. \* –ú–µ—Ç—Ä–∏–∫–∏: –≤—ã–Ω–µ—Å—Ç–∏ `/metrics` –≤ docling –∏ router, —Å–æ–±—Ä–∞—Ç—å –≤ Prometheus+Grafana. \* –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏: CPU usage –Ω–∞ Docling ‚Äî –µ—Å–ª–∏ –ø–∏–∫–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ > 80% —É–≤–µ–ª–∏—á—å—Ç–µ worker/–∏–Ω—Å—Ç–∞–Ω—Å—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ burst GPU-—Å–µ—Ä–≤–µ—Ä –¥–ª—è LLM. \* –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –≤–∞—à–µ–π —Ä–µ–∞–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ: –≤–æ–∑—å–º–∏—Ç–µ 50‚Äì100 —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–æ–≤ –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ Docling OCR vs Tesseract –ø–æ —Ç–æ—á–Ω–æ—Å—Ç–∏ (–ø—Ä–∏–º–µ—Ä: –ø—Ä–æ—Ü–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ò–ù–ù / —Å—É–º–º). --- # 8) –§–∞–π–ª–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ / –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ \* –ü—Ä–∞–≤–∞: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å non-root –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ (–æ—Å–æ–±–µ–Ω–Ω–æ router). \* Webhook: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HMAC –ø–æ–¥–ø–∏—Å—å (–≤ –ø—Ä–∏–º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞). \* –û—á–∏—Å—Ç–∫–∞: scheduler –º–æ–∂–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `./archive` –∏ —É–¥–∞–ª—è—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã. --- # 9) –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç—É 1. \*\*–ó–∞–º–µ–Ω—è–µ–º Tesseract –Ω–∞ Docling OCR\*\*: —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö/—à—É–º–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Äî –≤–µ—Ä–Ω–æ–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–∞–≥—Ä—É–∑–∫—É. 2. \*\*–û—Å—Ç–∞–≤—å—Ç–µ Tesseract –∫–∞–∫ fallback\*\* (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —É—Å–∫–æ—Ä—ë–Ω–Ω—ã–µ –ø—Ä–æ–≥–æ–Ω–∫–∏ –Ω–∞ —á–∏—Å—Ç—ã—Ö —Å–∫–∞–Ω–∞—Ö. 3. \*\*–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω—ã–π –≤—Ö–æ–¥ `/input` + router\*\* (auto-classify) ‚Äî —ç—Ç–æ –≥–∏–±–∫–æ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ. 4. \*\*Scheduler (APScheduler)\*\* —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É cron-like –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –ª–µ–≥–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è. 5. \*\*API –¥–ª—è upload/webhook\*\* ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `router` (FastAPI). 6. \*\*–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ\*\* ‚Äî —Å–æ–±–µ—Ä–∏—Ç–µ –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—Ä—Ç–∏—é —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∫–∞–Ω–æ–≤ –∏ –∑–∞–º–µ—Ä—å—Ç–µ precision/recall –¥–ª—è key-fields (–ò–ù–ù/—Å—É–º–º—ã/–¥–∞—Ç—ã). ---



---



–ù–∏–∂–µ ‚Äî **–¥–µ—Ç–∞–ª—å–Ω—ã–π, –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞–∑–±–æ—Ä**, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∏–º–µ–Ω–Ω–æ –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å:



> –ù—É–∂–Ω–æ –ª–∏ –≤—ã–Ω–æ—Å–∏—Ç—å –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∞–π–ª–æ–≤ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞/—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ/—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–∞–π–ø–ª–∞–π–Ω–∞–º) **–≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π —Å–ª–æ–π**, –∏–ª–∏ –∂–µ **–≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —ç—Ç–æ –≤–Ω—É—Ç—Ä—å Docling-–ø–∞–π–ø–ª–∞–π–Ω–∞** —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –Ω–æ–¥–∞–º–∏?



–ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º:



1. **–ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ª—É—á—à–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ**

2. **–ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞**

3. **–ö–∞–∫ –≤–ª–∏—è–µ—Ç –º–Ω–æ–≥–æ—Ñ–æ—Ä–º–∞—Ç–Ω–æ—Å—Ç—å (DOC, DOCX, ‚Äú–ª–æ–∂–Ω—ã–µ DOC‚Äù, PDF-—Ç–µ–∫—Å—Ç, PDF-—Å–∫–∞–Ω, JPG/PNG)**

4. **–ß—Ç–æ –º–æ–∂–Ω–æ –∏ —á—Ç–æ –Ω–µ–ª—å–∑—è/–Ω–µ—É–¥–æ–±–Ω–æ –¥–µ–ª–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ Docling**

5. **–ö–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**

6. **–§–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥: –∫–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ–ø—Ç–∏–º–∞–ª–µ–Ω –∏–º–µ–Ω–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**



---



## ‚úÖ 0. –í–∞–∂–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç



–í–∞—à –ø–æ—Ç–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ **–≥–µ—Ç–µ—Ä–æ–≥–µ–Ω–Ω—ã–π –∏ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π**:



üìå –§–æ—Ä–º–∞—Ç—ã –≤—Ö–æ–¥–∞:



- DOC (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π MS Word 97‚Äì2003)

- DOCX

- DOC-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–æ—Ä–º–∞—Ç–∞ RAR (–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–µ–π—Å)

- PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º

- PDF –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ (—Å–∫–∞–Ω)

- PDF –∏–∑ JPEG –±–µ–∑ EXIF

- JPEG/PNG —Å–∫–∞–Ω—ã (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü)

- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ ZIP/–∞—Ä—Ö–∏–≤—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

- –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∏ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã



üìå –ê –≤–∞—à –ø–∞–π–ø–ª–∞–π–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç:



- LibreOffice –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é (.doc ‚Üí.docx)

- –†–∞—Å–ø–∞–∫–æ–≤–∫—É ¬´–ª–æ–∂–Ω—ã—Ö DOC¬ª (rar ‚Üí docx + scan.jpg)

- OCR Docling (—Ü–µ–ª–∏–∫–æ–º –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –º–æ–¥–µ–ª—å)

- TextExtraction (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π)

- OCR tokens (–µ—Å–ª–∏ –Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è)

- Layout Analysis

- Table Extraction

- Metadata extraction

- Export JSON/Markdown

- Downstream LLM-–ø–∞–π–ø–ª–∞–π–Ω



–≠—Ç–æ **–Ω–µ –ø—Ä–æ—Å—Ç–æ OCR-–ø–∞–π–ø–ª–∞–π–Ω** ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π document intelligence system.



---



## ‚úÖ 1. –î–æ–ª–∂–Ω—ã –ª–∏ –º—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –î–û Docling?



### –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç



**–î–∞. –í –≤–∞—à–µ–º —Å–ª—É—á–∞–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞/–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –î–û Docling ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.**



Docling —Å–∞–º –ø–æ —Å–µ–±–µ:



- –Ω–µ —É–º–µ–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ª–∏—á–∏—Ç—å PDF-text –æ—Ç PDF-scan),

- –Ω–µ —É–º–µ–µ—Ç —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å.DOC –≤–Ω—É—Ç—Ä–∏ rar,

- –Ω–µ —É–º–µ–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å.doc ‚Üí.docx,

- –Ω–µ —É–º–µ–µ—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å Word DOC (OLE2) –∏ ¬´D–û–°-–∞—Ä—Ö–∏–≤¬ª,

- –Ω–µ —É–º–µ–µ—Ç –¥–µ–ª–∞—Ç—å multi-branch routing –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.



–¢–æ –µ—Å—Ç—å **–æ—á–µ–Ω—å –º–Ω–æ–≥–æ–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–∏–¥–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –î–û –∑–∞–ø—É—Å–∫–∞ Docling**.



---



## ‚õî –ï—Å–ª–∏ –ø—ã—Ç–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É –≤–Ω—É—Ç—Ä–∏ Docling



(–∫–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–æ–¥—ã ‚Üí –Ω–µ –ª—É—á—à–∞—è –∏–¥–µ—è)



–≠—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫:



- –Ω–µ—è–≤–Ω—ã–º –æ—à–∏–±–∫–∞–º –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ Docling –Ω–æ–¥—ã –æ–∂–∏–¥–∞—é—Ç —É–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

- —Å–ª–æ–∂–Ω–æ–º—É –æ—Ç–ª–∞–¥–æ—á–Ω–æ–º—É —Ü–∏–∫–ª—É (Docling –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –±—ã—Ç—å file router'–æ–º)

- –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å LibreOffice –≤–Ω—É—Ç—Ä–∏ –Ω–æ–¥—ã Docling (–æ–Ω –Ω–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)

- –ø–ª–æ—Ö–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ –æ—à–∏–±–æ–∫ (–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã –ª–æ–º–∞—é—Ç pipeline)

- –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å —Ä–∞–Ω–Ω—é—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É



Docling-–ø–∞–π–ø–ª–∞–π–Ω –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ **–≤—Ö–æ–¥ ‚Äî —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç**.



---



## 2\. –î–≤–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞



---



## üÖ∞ –ü–æ–¥—Ö–æ–¥ A ‚Äî ¬´–í–Ω–µ—à–Ω—è—è –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞¬ª



(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)



**–ü–µ—Ä–µ–¥ Docling –≤—ã –¥–µ–ª–∞–µ—Ç–µ:**



1. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é, mime, —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º)

2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ PDF-text-layer

3. –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ rar/dot-doc –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

4. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è doc ‚Üí docx

5. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ jpg/png ‚Üí pdf (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—é)

6. –†–∞–∑–º–µ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–º–∏:

	- `{"type": "pdf_scan", "needs_ocr": true}`

	- `{"type": "pdf_textlayer", "needs_ocr": false}`

	- `{"type": "docx", "needs_ocr": false}`

	- `{"type": "doc_fake_rar", "contains_scan": true}`

	- `{"source_archive": "...", "extracted_files": [...]}`

7. –ü–µ—Ä–µ–¥–∞—á–∞ —É–∂–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ ‚Üí Docling API



Docling –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–∑ –¥–≤—É—Ö —Ç–∏–ø–æ–≤**:



- **PDF (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π)**

- **DOCX(–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π)**



–ò –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É –∏–¥–µ–∞–ª—å–Ω–æ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ.



---



## üü¢ –ü–ª—é—Å—ã –ø–æ–¥—Ö–æ–¥–∞ –ê



### ‚úî 1. –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –≤—Ö–æ–¥–æ–≤



Docling –Ω–µ –∫—Ä–∞—à–∏—Ç—Å—è –Ω–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö  

(–æ—Å–æ–±–µ–Ω–Ω–æ DOC, RAR, ZIP, —Å—Ç–∞—Ä—ã–µ OLE2 Word).



### ‚úî 2. –í—ã –º–æ–∂–µ—Ç–µ —Ç–æ—á–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å:



- –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å OCR

- –∫–æ–≥–¥–∞ OCR –Ω–µ –Ω—É–∂–µ–Ω

- –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω layout

- –∫–æ–≥–¥–∞ –≤–∫–ª—é—á–∞—Ç—å table extraction

- –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–¥–∫–∏–µ –Ω–µ—Ç–∏–ø–∏—á–Ω—ã–µ –∫–µ–π—Å—ã



### ‚úî 3. –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–µ—Ç–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, DOC –≤–Ω—É—Ç—Ä–∏ ZIP –≤–Ω—É—Ç—Ä–∏ DOC).



### ‚úî 4. –õ–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç–µ pipeline Docling –≤ ¬´pure processing¬ª.



### ‚úî 5. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å



–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–Ω–æ—Å–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–æ—Ä–∫–µ—Ä—ã:



- libreoffice-worker (only convert)

- archive-worker (RAR/ZIP unpack)

- classifier-worker (file sniffing)

- preview-worker (first page thumbnails)



Docling —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—á–Ω—ã–º, —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∏ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º *—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ* –¥–æ–∫—É–º–µ–Ω—Ç–∞.



---



## üî¥ –ú–∏–Ω—É—Å—ã –ø–æ–¥—Ö–æ–¥–∞ A



- –±–æ–ª—å—à–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (router + preprocessors)

- –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å–≤–æ–π –∫–æ–¥ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ (–Ω–æ —ç—Ç–æ –Ω–µ—Å–ª–æ–∂–Ω–æ –∏ –≤—ã –µ–≥–æ —É–∂–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ)

- –±–æ–ª—å—à–µ —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π



–ù–æ **–¥–ª—è production —ç—Ç–æ –Ω–æ—Ä–º–∞**.  

–ë–∏–∑–Ω–µ—Å—ã —É—Ä–æ–≤–Ω—è DocuSign/Adobe/Google –¥–µ–ª–∞—é—Ç –∏–º–µ–Ω–Ω–æ —Ç–∞–∫.



---



---



## üÖ± –ü–æ–¥—Ö–æ–¥ B ‚Äî ¬´–í—Å—ë –Ω–∞ –≤—Ö–æ–¥ –≤ Docling, –ø—É—Å—Ç—å —Å–∞–º —Ä–∞–∑–±–∏—Ä–∞–µ—Ç—Å—è¬ª



(–∏—Å–∫—É—à–µ–Ω–∏–µ, –Ω–æ –æ—à–∏–±–æ—á–Ω—ã–π –ø—É—Ç—å)



### –ü—Ä–∏–Ω—Ü–∏–ø:



> ¬´–°–∫–ª–∞–¥—ã–≤–∞—é –≤—Å—ë –≤ –æ–¥–Ω—É –ø–∞–ø–∫—É ‚Äî Docling —Å–∞–º —Ä–µ—à–∏—Ç¬ª.



–≠—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–æ **–≤—ã–∑—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º**:



### üî¥ –ü—Ä–æ–±–ª–µ–º–∞ 1 ‚Äî Docling –Ω–µ —É–º–µ–µ—Ç –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–æ–≤



–û–Ω –Ω–µ —É–º–µ–µ—Ç:



- –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å PDF-text vs PDF-scan

- –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å rar disguised doc

- –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å structure of DOC OLE2

- –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞–¥–∞—Ç—å –Ω–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö PDF



### üî¥ –ü—Ä–æ–±–ª–µ–º–∞ 2 ‚Äî Docling OCR –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∞ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö



–î–∞–∂–µ –µ—Å–ª–∏ —Ç–∞–º –µ—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π ‚Üí —É–¥–≤–æ–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞.



### üî¥ –ü—Ä–æ–±–ª–µ–º–∞ 3 ‚Äî –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å LibreOffice



Docling –Ω–æ–¥—ã –Ω–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å shell-–∫–æ–º–∞–Ω–¥—ã –≤—Ä–æ–¥–µ:



### üî¥ –ü—Ä–æ–±–ª–µ–º–∞ 4 ‚Äî –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—É—é –ª–æ–≥–∏–∫—É



–ù–∞–ø—Ä–∏–º–µ—Ä:



- DOC ‚Üí –Ω—É–∂–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –î–û –∑–∞–ø—É—Å–∫–∞ layout

- PDF-scan ‚Üí OCR –ø–µ—Ä–µ–¥ text extraction

- PDF-text ‚Üí text extraction –ø–µ—Ä–≤—ã–º

- DOC containing RAR ‚Üí —Å–Ω–∞—á–∞–ª–∞ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å ‚Üí –∑–∞—Ç–µ–º DP



Docling –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å branching.



---



## –ò—Ç–æ–≥: –ø–æ–¥—Ö–æ–¥ B –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –æ—à–∏–±–æ–∫ –Ω–∞ –ø–æ—Ä—è–¥–∫–∏.



---



## ‚úî –§–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥



### üü© 100% —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω—é—é –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É



Docling –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å **—Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**.



üìå –ü–æ—ç—Ç–æ–º—É –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:



---



## ‚öñ –ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤



| –ü–æ–¥—Ö–æ–¥ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã | –í–µ—Ä–¥–∏–∫—Ç |

| --- | --- | --- | --- |

| **A. –í–Ω–µ—à–Ω—è—è –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞** | –ß–∏—Å—Ç–æ, –Ω–∞–¥–µ–∂–Ω–æ, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ, –∫–æ–Ω—Ç—Ä–æ–ª—å, —Å–∫–æ—Ä–æ—Å—Ç—å | –¥–æ–ø. –∫–æ–¥ | ‚úî **–õ—É—á—à–∏–π** |

| **B. –í–Ω—É—Ç—Ä–∏ Docling** | —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ | –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –Ω–µ—Ç –≥–∏–±–∫–æ—Å—Ç–∏, –æ—à–∏–±–∫–∏ | ‚ùå **–ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç** |



---



## –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ ‚Äî —è –º–æ–≥—É:



### üìå 1. –°–æ–±—Ä–∞—Ç—å –¥–ª—è –≤–∞—Å



**–ø–æ–ª–Ω—ã–π –∏ –≥–æ—Ç–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å router, preprocessors –∏ Docling** (–±–µ–∑ GitHub ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)



### üìå 2. –ù–∞–ø–∏—Å–∞—Ç—å



**–ø–æ–ª–Ω—ã–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—Ö–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (Python, 100% production-ready)**



### üìå 3. –û–ø–∏—Å–∞—Ç—å



**–∫–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –≤–µ—Ä—Å–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Å–ª–µ–¥—ã –ø–∞–π–ø–ª–∞–π–Ω–∞**



### üìå 4. –î–æ–±–∞–≤–∏—Ç—å



**Docling custom-nodes**, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ pipeline —à–∞–≥–∏ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ Docling



### üìå 5. –°–æ–∑–¥–∞—Ç—å



**–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–µ–π (Redis/RQ –∏–ª–∏ RabbitMQ) –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏**.



–°–∫–∞–∂–∏—Ç–µ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–æ–º?



---



–î–∞–≤–∞–π –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–±–µ—Ä–µ–º –¥–µ—Ç–∞–ª—å–Ω–æ —ç—Ç–∞–ø –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –Ω–∞ –≤—Ö–æ–¥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏, –≤ –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º—ã –Ω–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–æ—Ä–º–∞—Ç–æ–≤ PDF —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Ñ–µ–π–∫–æ–≤—ã–µ –∞—Ä—Ö–∏–≤—ã —Ñ–æ—Ä–º–∞—Ç–∞.docs, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Word doc –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Word docs. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ñ–µ–π–∫–æ–≤—ã—Ö Word –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º.doc –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ–º, —á—Ç–æ —ç—Ç–æ –∞—Ä—Ö–∏–≤, –≤ –∫–∞–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –º—ã —ç—Ç–æ –±—É–¥–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã. –ü—Ä–∏ —ç—Ç–æ–º –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑—Ä–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω–∏ –±—É–¥—É—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö, –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º —Å–≤—è–∑–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –æ–Ω–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É –∞—Ä—Ö–∏–≤—É –∏ –∫ –æ–¥–Ω–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É.



---



–û—Ç–ª–∏—á–Ω–æ ‚Äî —Ä–∞—Å–ø–∏—Å—ã–≤–∞—é **–ø–æ–ª–Ω—ã–π, –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π** –∞–ª–≥–æ—Ä–∏—Ç–º –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —Å —É—á—ë—Ç–æ–º –≤—Å–µ—Ö –≤–∞—à–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π: –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤, –¥–µ—Ç–µ–∫—Ü–∏–∏ ¬´—Ñ–µ–π–∫–æ–≤—ã—Ö.doc¬ª (–∞—Ä—Ö–∏–≤—ã), –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (docx + scan.jpg), –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∞—Ä—Ö–∏–≤—É, –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –≤–µ—Ç–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ü—Ä–∏–≤–æ–∂—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —Ñ–æ—Ä–º–∞—Ç—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏.



–Ø –¥–∞—é:



- —á–µ—Ç–∫—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤ (what ‚Üí when),

- —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ —Å—Ö–µ–º—ã manifest/metadata (–∫–∞–∫ —Å–≤—è–∑–∞—Ç—å —Ñ–∞–π–ª—ã),

- –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å ¬´DOC –∫–∞–∫ RAR¬ª –∫–µ–π—Å,

- –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ—à–∏–±–∫–∏,

- –∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥/Python-snippets, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ `router` / `preprocessor`.



---



## 1) –û–±—â–∞—è –∏–¥–µ—è –∏ —Ü–µ–ª–∏ —ç—Ç–∞–ø–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏



–¶–µ–ª—å: –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –≤—Ö–æ–¥–Ω–æ–π –ø–∞–ø–∫–∏ `./input` **–Ω–∞–±–æ—Ä –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü** (–ø–∞–∫–µ—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤), –≥–¥–µ –∫–∞–∂–¥–∞—è –µ–¥–∏–Ω–∏—Ü–∞ ‚Äî —ç—Ç–æ –ª–∏–±–æ –æ–¥–∏–Ω–æ—á–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (PDF/DOCX/JPG) –ª–∏–±–æ –Ω–∞–±–æ—Ä —Ñ–∞–π–ª–æ–≤, –æ—Ç–Ω–æ—Å—è—â–∏—Ö—Å—è –∫ –æ–¥–Ω–æ–º—É –∏—Å—Ö–æ–¥–Ω–æ–º—É –∞—Ä—Ö–∏–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, DOC-–∞—Ä—Ö–∏–≤/rar), –∏ –¥–ª—è –∫–∞–∂–¥–æ–π –µ–¥–∏–Ω–∏—Ü—ã –∏–º–µ—Ç—å `manifest.json` —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ —Å–≤—è–∑—è–º–∏. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫–∞–∂–¥–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π downstream-–ø–∞–π–ø–ª–∞–π–Ω (PDF-scan, PDF-text, DOCX, Mixed-archive).



–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:



- –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤, –∑–∞—â–∏—Ç–∞ –æ—Ç path-traversal;

- –ø—Ä–∏–≤—è–∑–∫–∞ –≤—Å–µ—Ö –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∫ –æ–¥–Ω–æ–º—É `archive_id`;

- –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏ ‚Üí –ø–µ—Ä–µ–µ–∑–¥);

- —è–≤–Ω—ã–π —Ñ–ª–∞–≥ `needs_ocr` / `has_text_layer` / `converted_from_doc`;

- –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ retry –¥–ª—è –æ—à–∏–±–æ–∫.



---



## 2) –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–Ω–∞ –¥–∏—Å–∫–µ)



–ü—Ä–∏–º–µ—Ä—ã –ø—É—Ç–µ–π:



- `extracted/ARCHIVE_<sha256>/file1.docx`

- `normalized/UNIT_b8f3a2/.../manifest.json`



---



## 3) –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ—à–∞–≥–æ–≤–æ)



–ù–∏–∂–µ ‚Äî –ø–æ—à–∞–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä—É—é `router/preprocessor` —Ä–µ–∞–ª–∏–∑—É–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –≤ `input/`.



1. **–ü—Ä–∏—ë–º —Ñ–∞–π–ª–∞ –∏ –ø–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (ingest)**

	- –í –º–æ–º–µ–Ω—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ `f` —Å–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥:  

		`temp/<tmpid>/` –∏ –∫–æ–ø–∏—Ä—É–µ–º (–∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º) —Ç—É–¥–∞ `f` (atomic move preferred).

	- –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ö–µ—à: `sha256`, —Ä–∞–∑–º–µ—Ä, owner, mtime.

	- –°–æ–∑–¥–∞—Ç—å `ingest_record` (in-memory / DB) —Å `ingest_id`, `orig_name`, `sha256`, `tmp_path`.

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞ (magic + mimetype)**

	- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `python-magic` –∏–ª–∏ `libmagic` (CLI `file --mime-type`) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `mime_type`.

	- –¢–∞–∫–∂–µ —á–∏—Ç–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –±–∞–π—Ç—ã (magic header) ‚Äî –¥–ª—è ZIP/RAR/PDF/OLE2/BMP/JPEG.

	- –ü—Ä–∏–º–µ—Ä—ã:

		- `application/pdf` ‚Üí PDF

		- `application/vnd.openxmlformats-officedocument.wordprocessingml.document` ‚Üí DOCX

		- `application/msword` ‚Üí DOC (OLE2)

		- `application/zip` ‚Üí ZIP

		- `application/x-rar` ‚Üí RAR

		- `image/jpeg` ‚Üí JPG

	**Python sketch:**

3. **–ï—Å–ª–∏ —ç—Ç–æ –∞—Ä—Ö–∏–≤ (zip/rar/7z) or disguised archive (.doc with archive magic)**

	- **Detect archive-in-doc**: –º–Ω–æ–≥–∏–µ ¬´—Ñ–µ–π–∫–æ–≤—ã–µ.doc¬ª ‚Äî —ç—Ç–æ RAR/ZIP with different extension. Use magic bytes to detect:

		- RAR header: `52 61 72 21 1A 07`

		- ZIP header: `50 4B 03 04`

		- OLE2 (.doc) header: `D0 CF 11 E0 A1 B1 1A E1` (then further check if actually an archive inside).

	- If `mime` indicates archive OR magic bytes indicate archive despite `.doc` extension ‚Üí treat as *archive case*.

4. **If archive detected ‚Üí safe extraction**

	- Create `archive_id = "ARCHIVE_"+sha256(orig)` and directory `extracted/<archive_id>/tmp/`.

	- Extract there using safe tools:

		- `unzip -qq -o` for zip; `7z x` for rar/7z (install p7zip-full); `rar` if needed.

	- **Security**:

		- Reject extraction if total extracted size > X \* original size (zip bomb). Limit e.g. 500MB or configurable.

		- Sanitize filenames: remove `../` and absolute paths. Force flatten or rebase.

		- Do not auto-execute any macros or scripts inside archives.

		- If archive password-protected ‚Üí mark in manifest and move to quarantine for manual handling.

	- After extraction, produce list of extracted files and their mimetypes and hashes.

5. **Create `manifest` for archive unit**

	- `extracted/<archive_id>/manifest.json` with fields (see schema below). This manifest will link all extracted items.

	- Move `archive` original to `archive/` storage (or leave a copy in `extracted/<archive_id>/original/`).

6. **For each extracted member (or for initial file if not archive) ‚Äî further classification**

	- For each file `g` in extracted or original:

		- detect type again via magic; compute `sha256_g`.

		- If file is `.doc` (OLE2), mark `requires_conversion: true`.

		- If file is PDF: run `pdf_has_text_layer` (see snippet below).

			- if `has_text_layer` ‚Üí `needs_ocr=false`

			- else ‚Üí `needs_ocr=true`

		- If file is image (jpeg/png) ‚Üí `needs_ocr=true`

		- If file is docx ‚Üí `needs_ocr=false` (but may still need layout/table)

	- Append each member to `manifest['members']` with metadata and relation to `archive_id`.

7. **Normalization & unit creation**

	- **For non-archive input** create a `unit_id = UNIT_<sha256>` and dir `normalized/<unit_id>/`.

	- **For archive** create `unit_id = UNIT_<archive_id>`. Copy or symlink relevant extracted files into `normalized/<unit_id>/files/`. Ensure unique filenames.

	- Generate `normalized/<unit_id>/manifest.json` (example schema below).

	- Decide processing branch for the `unit`:

		- Single `docx` ‚Üí route to DOCX pipeline.

		- Single `pdf` with `needs_ocr` ‚Üí route to PDF-scan pipeline (OCR).

		- Multiple files (docx + scanned image) ‚Üí create `mixed` route: both files to be processed and merged downstream.

8. **Conversion step (DOC ‚Üí DOCX)**

	- If `requires_conversion` true, **do conversion now**, inside preprocessing layer:

		- run LibreOffice headless: `soffice --headless --convert-to docx --outdir <normalized/unit>/files/ <file.doc>`

		- After conversion, update manifest: `converted_from_doc=true`, `converted_path=...`, add conversion logs.

	- If conversion fails ‚Üí mark `status: conversion_failed` and quarantine.

9. **Atomic publish of normalized unit**

	- After all steps succeed for unit, **atomically move** `normalized/<unit_id>` from temp location to `normalized/` (os.rename) so router/Docling can pick it up safely.

10. **Enqueue / trigger Docling**

	- Router calls Docling API with `POST /process` body containing: `{"unit_id": "...", "manifest": "/normalized/<unit>/manifest.json"}` and mounts volumes accordingly or passes path. Docling reads manifest and processes according to flags.



---



## 4) manifest.json ‚Äî —Å—Ö–µ–º–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–æ–ª—è



–ö–∞–∂–¥—ã–π unit/ archive –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å manifest ‚Äî —ç—Ç–æ –∫–ª—é—á –∫ —Å–≤—è–∑—ã–≤–∞–Ω–∏—é. –ù–∏–∂–µ ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è schema (concise but complete).



–ü–æ–ª–µ–∑–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∏ audit:



- `unit_id` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä UNIT\_<sha256\_prefix>).

- `member_id` ‚Äî –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –≤–Ω—É—Ç—Ä–∏ unit.

- `rel_path` ‚Äî –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –≤–Ω—É—Ç—Ä–∏ unit dir (–¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è).

- `needs_ocr`, `requires_conversion`, `converted_from`.

- `archive.is_archive` –∏ `archive.archive_id` ‚Äî –µ—Å–ª–∏ unit –∏–∑ –∞—Ä—Ö–∏–≤–∞.

- `processing.route` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç (pdf\_scan/pdf\_text/docx/mixed/etc.)



---



## 5) –ì–¥–µ —Ä–∞–∑–º–µ—â–∞—Ç—å —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –∫–∞–∫ —Å–≤—è–∑–∞—Ç—å –∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏



- –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –≤ `extracted/ARCHIVE_<sha256>/tmp/` ‚Üí —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Ç—É–¥–∞; –∑–∞—Ç–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å `extracted/ARCHIVE_<sha256>/manifest.json`.

- –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `normalized/UNIT_<sha256>/files/...` –∏ —Å–æ–∑–¥–∞—Ç—å `normalized/UNIT_<sha256>/manifest.json`.

- –í manifest —É–∫–∞–∑—ã–≤–∞—Ç—å `archive_id` –∏ `origin` —Ç–∞–∫, —á—Ç–æ–±—ã –≤—ã –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–≥–ª–∏ —Å–∫–∞–∑–∞—Ç—å: ¬´—ç—Ç–∏ —Ñ–∞–π–ª—ã –±—ã–ª–∏ –≤–Ω—É—Ç—Ä–∏ —Ç–∞–∫–æ–≥–æ-—Ç–æ –∞—Ä—Ö–∏–≤–∞¬ª.

- –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è/–∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `archive/ARCHIVE_<sha256>/original.zip` –∏–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ `original_path` –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É.



---



## 6) –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–µ–π–∫–æ–≤—ã—Ö.doc (RAR inside.doc)



–ü—Ä–∞–∫—Ç–∏–∫–∞:



- –ï—Å–ª–∏ magic –≥–æ–≤–æ—Ä–∏—Ç `RAR` –∏–ª–∏ `ZIP` but extension `.doc` ‚Üí treat as archive. Extract.

- –ü–æ—Å–ª–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω—ã `docx + image` ‚Üí unit route `mixed`.

- –û–±—Ä–∞–±–æ—Ç–∫–∞:

	- **DOCX** ‚Üí send to Docling as usual (text tokens)

	- **image (scan.jpg)** ‚Üí send to Docling OCR path (needs\_ocr=True)

- –ü–æ—Å–ª–µ both processed ‚Üí do `merge` step:

	- Merge textual content: primary from docx; supplement with OCR text near signatures

	- Mark `signature_found: true` if OCR finds phrases like ‚Äú–ø–æ–¥–ø–∏—Å—å‚Äù or image contains signature region

- Manifest should include relation: `members: [docx, scan.jpg]` and `merge_policy: "docx_priority_then_scan_append"`



---



## 7) –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏/–∫–æ–¥ (–∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã)



### –ü—Ä–æ–≤–µ—Ä–∫–∞ PDF text layer (pypdf)



### Detect magic with python-magic



### Detect OLE2 (.doc) with olefile



### Safe extraction (using 7z)



Shell:



Python-safe filename sanitization:



---



## 8) –ó–∞—â–∏—Ç–∞ –æ—Ç –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö/–ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤



- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ (max\_unpacked\_bytes).

- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ —Ñ–∞–π–ª–æ–≤ (max\_files).

- –ü—Ä–æ–≤–µ—Ä–∫–∞ mime/extension mismatches.

- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è hash –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏.

- –ï—Å–ª–∏ archive contains executables (.exe), —Å–∫—Ä–∏–ø—Ç—ã ‚Üí quarantine and alert.

- –ù–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –∏–∑ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.



---



## 9) –û—à–∏–±–∫–∏, retry, –∏ —Å—Ç–∞—Ç—É—Å—ã



- `manifest.processing.status` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç: `ready`, `processing`, `done`, `error`, `quarantined`.

- –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è/—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ ‚Äî –∑–∞–ø–∏—Å–∞—Ç—å `error` —Å `error_code` –∏ `error_message`. –ü–æ—Å—Ç–∞–≤–∏—Ç—å –≤ `quarantine/` –∏ —É–≤–µ–¥–æ–º–∏—Ç—å (alert, email, Slack).

- Retry policy: up to N attempts (–Ω–∞–ø—Ä–∏–º–µ—Ä 3) with exponential backoff for transient failures (LibreOffice crash, network).



---



## 10) –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ/–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é



- –ö–∞–∂–¥—ã–π unit –∏–º–µ–µ—Ç `manifest` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã.

- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ API `/status?unit_id=...` –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å manifest + logs tail.

- Add audit fields: `processed_by`, `processed_at`, `processing_duration_ms`.



---



## 11) –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –∏ –ø–æ–¥–∞—á–∞ –≤ Docling



- Router –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç request –∫ Docling:  

	`POST /process` body:

- Docling —á–∏—Ç–∞–µ—Ç manifest –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –≤–µ—Ç–∫–∏: for each member, decide OCR vs TextExtraction based on `needs_ocr` flag; after processing runs merge step if `route == mixed_docx+image`.



---



## 12) –†–µ–∑—é–º–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –∫–æ—Ä–æ—Ç–∫–æ)



1. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ ‚Äî –≤–Ω–µ—à–Ω–∏–π —Å–ª–æ–π (preprocessor/router)**. Docling –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∞—Ç—å **–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ unit'—ã**.

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ manifest.json** —Å–≤—è–∑—É—é—â–∏–π –∏—Å—Ö–æ–¥–Ω–∏–∫ + –≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.

3. **–†–∞—Å–ø–∞–∫—É–π—Ç–µ archive ‚Üí extracted/ARCHIVE\_<sha>/**, –∑–∞—Ç–µ–º —Å—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ `normalized/UNIT_<sha>/` –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Ç—É–¥–∞.

4. **–ü–æ–º–µ—Ç—å—Ç–µ –≤ manifest –ø–æ–ª—è `needs_ocr`, `requires_conversion`, `route`** ‚Äî Docling –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö.

5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ª–∏–º–∏—Ç—ã –Ω–∞ unpack size, sanitize filenames, –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–∏–ø–æ–≤, quarantine –¥–ª—è –ø–∞—Ä–æ–ª–µ–π/—ç–∫–∑–µ—à–Ω–∏–∫–æ–≤.

6. **Atomic publish**: –¥–µ–ª–∞–π—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π `os.rename(temp_unit, normalized/unit)` —á—Ç–æ–±—ã downstream –≤–∑—è–ª —Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ unit'—ã.

7. **–•—Ä–∞–Ω–∏—Ç–µ provenance**: hashes, timestamps, original path, archive\_id ‚Äî –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –º–æ–≥—É:



- —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å **–≥–æ—Ç–æ–≤—ã–π Python-–º–æ–¥—É–ª—å `preprocessor`** (router-compatible) —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ (magic detection, extract, manifest build, conversion triggers, secure extraction), –∏–ª–∏

- –ø—Ä–∏—Å–ª–∞—Ç—å **–≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω manifest.json** + unit lifecycle API (`/preprocess/status`, `/preprocess/process_one`) + —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä sample files –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É.



–ö–∞–∫–æ–π –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å `preprocessor` –º–æ–¥—É–ª—å –∏–ª–∏ —Å—Ä–∞–∑—É —à–∞–±–ª–æ–Ω—ã manifest/–∞–≤—Ç–æ–ø–∞–π–ø–ª–∞–π–Ω?



---



–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞ (magic + mimetype) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å python-magic –∏–ª–∏ libmagic (CLI file --mime-type) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è mime\_type. –¢–∞–∫–∂–µ —á–∏—Ç–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –±–∞–π—Ç—ã (magic header) ‚Äî –¥–ª—è ZIP/RAR/PDF/OLE2/BMP/JPEG. –ü—Ä–∏–º–µ—Ä—ã: application/pdf ‚Üí PDF application/vnd.openxmlformats-officedocument.wordprocessingml.document ‚Üí DOCX application/msword ‚Üí DOC (OLE2) application/zip ‚Üí ZIP application/x-rar ‚Üí RAR image/jpeg ‚Üí JPG Python sketch: import magic m = magic.from\_file(path, mime=True) Detect magic with python-magic import magic mime = magic.from\_file(path, mime=True)–†–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –Ω–∞—à–µ–º –ø–∞–π–ø–ª–∞–π–Ω–µ, –∏ –∫–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç Magic –∏ Mimetype. –ö–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞, –∏ –º–æ–∂–µ—Ç –ª–∏ –æ–Ω —Ç–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º.doc, –Ω–æ –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —è–≤–ª—è–µ—Ç—Å—è html —Ñ–∞–π–ª–æ–º? –ü–æ —Å—É—Ç–∏ —ç—Ç–æ —Ñ–µ–π–∫–æ–≤—ã–π Microsoft.doc —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –ø–æ —Å—É—Ç–∏ —è–≤–ª—è–µ—Ç—Å—è html —Ñ–∞–π–ª–æ–º. –ö–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –¥–æ–ø–ª–∏–Ω –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å html –¥–æ–∫—É–º–µ–Ω—Ç –≤ –Ω–∞—à–µ–º pipeline? –ù—É–∂–Ω–æ –ª–∏ –Ω–∞–º –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞—Ç—å –ø–æ —Ä–∞–∑–Ω—ã–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º PDF-—Ñ–∞–π–ª—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π, –∏ PDF-—Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —ç—Å–∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –ø–æ —Å—É—Ç–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ OCR –æ–±—Ä–∞–±–æ—Ç–∫–∞?



---



–†–∞–∑–±–∏—Ä–∞–µ–º –≤–æ–ø—Ä–æ—Å –æ—á–µ–Ω—å –¥–µ—Ç–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, **–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ preprocessor –∏ Docling pipeline**, –∏ —á—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ —Å–ª–µ–¥—É–µ—Ç –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏.



---



## 1Ô∏è‚É£ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç magic –∏ mimetype –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ



### a) Python-Magic / libmagic



- –ß–∏—Ç–∞—é—Ç **–ø–µ—Ä–≤—ã–µ –±–∞–π—Ç—ã —Ñ–∞–π–ª–∞** (magic bytes / file signature) –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç –∏—Ö —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏.

- –ù–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –Ω–∞ **—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞**, –∞ –Ω–∞ **—Ä–µ–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ**.

- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç—Ä–æ–∫—É MIME type, –Ω–∞–ø—Ä–∏–º–µ—Ä:

	- `application/pdf`

	- `application/msword`

	- `application/vnd.openxmlformats-officedocument.wordprocessingml.document`

	- `image/jpeg`

	- `application/zip`

	- `application/x-rar`



–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:



### b) –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ magic bytes



- –ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å **–ø–µ—Ä–≤—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∞–π—Ç –≤—Ä—É—á–Ω—É—é**, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è ¬´—Ñ–µ–π–∫–æ–≤—ã—Ö¬ª —Ñ–∞–π–ª–æ–≤.

- –ù–∞–ø—Ä–∏–º–µ—Ä:

	- PDF: `%PDF-`

	- DOC (OLE2): `D0 CF 11 E0 A1 B1 1A E1`

	- DOCX (ZIP-based): `50 4B 03 04`

	- HTML: `<!DOCTYPE html>` –∏–ª–∏ `<html>` –≤ –ø–µ—Ä–≤—ã—Ö –±–∞–π—Ç–∞—Ö

- –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.doc` **–Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É**.



---



## 2Ô∏è‚É£ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ



–í –Ω–∞—à–µ–º –ø–∞–π–ø–ª–∞–π–Ω–µ:



1. –°–Ω–∞—á–∞–ª–∞ –º—ã **–±–µ—Ä—ë–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞** (`Path(file).suffix`) ‚Äî –±—ã—Å—Ç—Ä—ã–π –æ—Ä–∏–µ–Ω—Ç–∏—Ä.

2. –ü–æ—Ç–æ–º –¥–µ–ª–∞–µ–º **mimetype / magic check** ‚Äî —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

	- –ï—Å–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.doc`, –∞ magic –≥–æ–≤–æ—Ä–∏—Ç `text/html` ‚Üí —ç—Ç–æ —Ñ–µ–π–∫–æ–≤—ã–π Word, —Ä–µ–∞–ª—å–Ω–æ HTML.

	- –ï—Å–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.doc`, –∞ magic –≥–æ–≤–æ—Ä–∏—Ç `application/zip` ‚Üí DOCX –∏–ª–∏ –∞—Ä—Ö–∏–≤ –≤–Ω—É—Ç—Ä–∏ DOC.

	- –ï—Å–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.pdf`, –Ω–æ magic –Ω–µ PDF ‚Üí –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.



**–í—ã–≤–æ–¥:** —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∞–∂–Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞, –Ω–æ –Ω–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–æ–º. **Docling –∏ preprocessor –ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ MIME/magic**, –∞ –Ω–µ –Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.



---



## 3Ô∏è‚É£ –ö–∞–∫ Docling –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å ¬´—Ñ–µ–π–∫–æ–≤—ã–π DOC (HTML)¬ª



–ï—Å–ª–∏ `magic` /mimetype –≤—ã—è–≤–∏–ª `text/html` –≤–Ω—É—Ç—Ä–∏ `.doc`:



1. **Preprocessor**:

	- –ü–æ–º–µ—Ç–∏—Ç—å —Ñ–∞–π–ª –∫–∞–∫ `detected_type='html'`

	- –°–æ–∑–¥–∞—Ç—å `manifest` —Å —Ñ–ª–∞–≥–æ–º `needs_conversion=true`

	- –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ `normalized/unit/files/`

2. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**:

	- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python `html2text` –∏–ª–∏ Docling LLM/TextExtraction pipeline:

		- HTML ‚Üí plain text

		- –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ –±–ª–æ–∫–∏, —á—Ç–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, –º–µ—Ç–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

	- –î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö HTML ‚Üí –º–æ–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã —Å `BeautifulSoup` –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ TableExtraction –º–æ–¥—É–ª–∏ Docling

3. **–í downstream**:

	- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (TextExtraction)

	- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è OCR, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–∫—Å—Ç —É–∂–µ ¬´—Ü–∏—Ñ—Ä–æ–≤–æ–π¬ª



**–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, HTML –≤–Ω—É—Ç—Ä–∏ DOC ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ—Ç–æ–∫ ‚Üí –∏–¥—ë—Ç –Ω–∞ Layout + Table Extraction.**



---



## 4Ô∏è‚É£ PDF: —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π vs –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (scan)



### –°—Ü–µ–Ω–∞—Ä–∏–∏



| –¢–∏–ø PDF | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ | –ù—É–∂–Ω–æ OCR? | –ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç Docling |

| --- | --- | --- | --- |

| PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º (PDF Text Layer) | `pypdf` –ø—Ä–æ–≤–µ—Ä–∫–∞ `extract_text()` | ‚ùå –ù–µ—Ç | TextExtraction ‚Üí —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã, Layout + Table –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É |

| PDF —Å –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º | `extract_text()` –ø—É—Å—Ç–æ–π –∏–ª–∏ None | ‚úÖ –î–∞ | OCR (Docling OCR) ‚Üí —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã, Layout + Table —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–≤–µ—Ä—Ö OCR —Ç–µ–∫—Å—Ç–∞ |



### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º



- **–ú–æ–∂–Ω–æ –Ω–µ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏**, –µ—Å–ª–∏ preprocessor —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ `manifest.json`:

	- `needs_ocr = True/False`

	- `detected_type = pdf_scan/pdf_text`

- –¢–æ–≥–¥–∞ **–æ–¥–Ω–∞ –≤—Ö–æ–¥–Ω–∞—è –ø–∞–ø–∫–∞ `/input`** ‚Äî —Ñ–∞–π–ª—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ preprocessor, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

	- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç PDF scan vs PDF text

	- –û—Ç–º–µ—á–∞–µ—Ç —Ñ–ª–∞–≥ OCR

	- –ü–µ—Ä–µ–¥–∞—ë—Ç –≤ Docling –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞



**–ü–ª—é—Å—ã:**



- –ù–µ –Ω—É–∂–Ω–æ —Ä—É—á–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–∞–ø–æ–∫

- Docling –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω—É–∂–Ω—ã–π –ø—É—Ç—å (OCR vs TextExtraction)

- Manifest —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∞—Ç—É—Å



**–ú–∏–Ω—É—Å—ã (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è 100‚Äì1000 —Ñ–∞–π–ª–æ–≤):**



- –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–±–æ–ª—å—à–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ (pypdf) –¥–ª—è –≤—Å–µ—Ö PDF ‚Äî –Ω–æ —ç—Ç–æ –ª—ë–≥–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å OCR



---



## 5Ô∏è‚É£ –ò—Ç–æ–≥



1. **Magic + mimetype** –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞, –∞ –Ω–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.

2. –§–µ–π–∫–æ–≤—ã–µ `.doc` ‚Üí Docling –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å HTML –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç, –∏—Å–ø–æ–ª—å–∑—É—è TextExtraction.

3. PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º –∏ PDF scan **–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ñ–ª–∞–≥–æ–≤ –≤ manifest (`needs_ocr`).

4. –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ HTML –≤–Ω—É—Ç—Ä–∏ DOC, ZIP –≤–Ω—É—Ç—Ä–∏ DOC, –∏ scan-PDF –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è **–Ω–∞ —ç—Ç–∞–ø–µ preprocessor**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç unit –¥–ª—è downstream Docling.

5. Docling downstream –ø–æ–ª—É—á–∞–µ—Ç –µ–¥–∏–Ω—ã–π ¬´normalized unit¬ª —Å manifest –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª—ã –ø–æ –≤–µ—Ç–∫–∞–º OCR / TextExtraction / Layout / Table Extraction.



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å **—Å—Ö–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å –≤–µ—Ç–∫–∞–º–∏: DOC, DOCX, PDF-text, PDF-scan, HTML –≤–Ω—É—Ç—Ä–∏ DOC**, —Å —Ç–µ–º, –∫–∞–∫ manifest –∏ `needs_ocr` –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É Docling. –≠—Ç–æ –±—É–¥–µ—Ç –Ω–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å—é –ª–æ–≥–∏–∫—É.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —Å–¥–µ–ª–∞–ª —Ç–∞–∫—É—é —Å—Ö–µ–º—É?



---



–£–¥–µ–ª–∏–º –æ—Ç–¥–µ–ª—å–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω—É, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã –ø—Ä–µ–¥–ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ñ–µ–π–∫–æ–≤—ã–µ DOC –¥–æ–∫—É–º–µ–Ω—Ç—ã, —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∞—Ä—Ö–∏–≤–æ–º. –î–ª—è –Ω–∞—á–∞–ª–∞, –ø—Ä–∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–µ, –∫–∞–∫ –º—ã —É–∂–µ –æ—Ç–º–µ—Ç–∏–ª–∏, –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤. –¢–∞–∫–∂–µ, –∏—Å—Ö–æ–¥—è –∏–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π, –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω—É–∂–Ω–∞ –ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑ DOC –≤ DOCS. –ò –µ—Å–ª–∏ –µ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ PDF —Ñ–∞–π–ª—ã, —è –Ω–µ –ø–æ–Ω–∏–º–∞—é, –Ω—É–∂–Ω–æ –ª–∏ –ø—Ä–∏ —ç—Ç–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JPEG –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ PDF —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–¥ –ø–æ–¥–∞—á–µ–π –≤ DOCLIN –Ω–∞ OCR –ø—Ä–æ—Ü–µ–¥—É—Ä—É. –ò–ª–∏ –º–æ–∂–Ω–æ –ø–æ–¥–∞–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ –æ–Ω–∏ –µ—Å—Ç—å, –≥–ª–∞–≤–Ω–æ–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ, —á—Ç–æ —ç—Ç–æ –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –∞—Ä—Ö–∏–≤–∞, –∏ –º—ã –Ω–µ –ø–æ—Ç–µ—Ä—è–µ–º —Å–≤—è–∑—å –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ. –í –∫–∞–∫–∏—Ö –º–µ—Å—Ç–∞—Ö –ª–∏—à–∞—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è –¥–æ–∫–ª–∏–Ω–≥–∞? –ú–æ–∂–µ–º –ª–∏ –º—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∫–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ SQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –≤–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ JSON —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º? –ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –±—É–¥–µ—Ç –±–æ–ª–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏ —É–¥–æ–±–Ω—ã–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ñ–∞–π–ª–æ–≤?



---



–û—Ç–ª–∏—á–Ω–æ, –¥–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º **–¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç—É —Å ¬´—Ñ–µ–π–∫–æ–≤—ã–º–∏ DOC¬ª –∏ –∞—Ä—Ö–∏–≤–∞–º–∏** –∏ –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –º–∞–Ω–∏—Ñ–µ—Å—Ç –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è Docling. –Ø —Ä–∞–∑–±—å—é –≤—Å—ë –Ω–∞ —ç—Ç–∞–ø—ã —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏.



---



## 1Ô∏è‚É£ –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–µ–π–∫–æ–≤—ã—Ö DOC



**–°—Ü–µ–Ω–∞—Ä–∏–π:**`.doc` –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∞—Ä—Ö–∏–≤ (`.zip` /`.rar`) –∏–ª–∏ HTML/—Ñ–µ–π–∫–æ–≤—ã–π DOC.



### –®–∞–≥–∏:



1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MIME/—Ç–∏–ø–æ–≤** (magic + mimetype):

	- –ï—Å–ª–∏ `.doc` ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º magic:

		- `application/zip` –∏–ª–∏ `application/x-rar` ‚Üí –∞—Ä—Ö–∏–≤, —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º

		- `text/html` ‚Üí —Ñ–µ–π–∫–æ–≤—ã–π DOC ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ HTML

		- `application/msword` ‚Üí —Ä–µ–∞–ª—å–Ω—ã–π DOC ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è LibreOffice ‚Üí DOCX

2. **–†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤:**

	- –ê—Ä—Ö–∏–≤ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É `/temp/unpack/<archive_name>/`

	- –ö–∞–∂–¥–æ–º—É –≤–ª–æ–∂–µ–Ω–Ω–æ–º—É —Ñ–∞–π–ª—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**, –Ω–∞–ø—Ä–∏–º–µ—Ä:

	- –§–∞–π–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞: JPEG, PDF, DOCX, HTML.

	- **–°–≤—è–∑—å —Å –∞—Ä—Ö–∏–≤–æ–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** —á–µ—Ä–µ–∑ `archive_id` ‚Üí –º–∞–Ω–∏—Ñ–µ—Å—Ç –∏ Docling pipeline –ø–æ–Ω–∏–º–∞—é—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ –æ–¥–Ω–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É.



---



## 2Ô∏è‚É£ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤



### a) DOC ‚Üí DOCX



- –ï—Å–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª ‚Äî DOC (OLE2), –∑–∞–ø—É—Å–∫–∞–µ–º **LibreOffice headless** –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏.

- DOCX –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ Docling **TextExtraction**, Layout, Table.



### b) PDF



- –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

	1. **PDF —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–ª–æ–µ–º** ‚Üí TextExtraction, Layout, Table

	2. **PDF scan** ‚Üí Docling OCR ‚Üí Layout, Table

- **–í–∞–∂–Ω–æ:** –æ—Ç–¥–µ–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–µ –Ω—É–∂–Ω–∞, —Ñ–ª–∞–≥ `needs_ocr` –≤ manifest —Ä–µ—à–∞–µ—Ç –≤–µ—Ç–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏.



### c) JPEG / –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è



- **–ú–æ–∂–Ω–æ –ø–æ–¥–∞–≤–∞—Ç—å –Ω–∞ Docling –∫–∞–∫ –µ—Å—Ç—å**:

	- Docling OCR –ø–æ–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (`.jpeg`, `.png`) –Ω–∞–ø—Ä—è–º—É—é.

	- –í manifest —Ñ–∏–∫—Å–∏—Ä—É–µ–º `source_archive` –∏ `original_filename`.

	- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è JPEG ‚Üí PDF –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞. **Docling –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞–ø—Ä—è–º—É—é** –¥–ª—è OCR.

- –ú–∏–Ω—É—Å—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ PDF:

	- –î–æ–ø. —à–∞–≥, –ª–∏—à–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ I/O

	- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è



**–í—ã–≤–æ–¥:** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ–¥–∞–≤–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å, –≥–ª–∞–≤–Ω–æ–µ ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π manifest –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–≤—è–∑–µ–π —Å –∞—Ä—Ö–∏–≤–æ–º.



---



## 3Ô∏è‚É£ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤



**–ú–∞–Ω–∏—Ñ–µ—Å—Ç —Ö—Ä–∞–Ω–∏—Ç:**



- `file_id` / `uuid`

- `original_name`

- `detected_type` (pdf\_text, pdf\_scan, docx, jpeg, html)

- `needs_ocr` (true/false)

- `archive_id` (–µ—Å–ª–∏ —Ñ–∞–π–ª –∏–∑ –∞—Ä—Ö–∏–≤–∞)

- `processed` (—Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏)

- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É `/temp/...` –∏–ª–∏ `/input/...`



–ü—Ä–∏–º–µ—Ä JSON –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –Ω–∞ –æ–¥–∏–Ω –∞—Ä—Ö–∏–≤:



---



## 4Ô∏è‚É£ –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: JSON vs SQL



### a) JSON / —Ñ–∞–π–ª–æ–≤–∞—è –±–∞–∑–∞



**–ü–ª—é—Å—ã:**



- –ü—Ä–æ—Å—Ç–æ–π –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π

- –•–æ—Ä–æ—à –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤ (–¥–æ 10k)

- –õ–µ–≥–∫–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏



**–ú–∏–Ω—É—Å—ã:**



- –ü—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–∞—Ö —Å–ª–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å

- –ù–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–∞



### b) SQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö



**–ü–ª—é—Å—ã:**



- –£–¥–æ–±–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: archive\_id, original\_name, detected\_type, —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

- –õ–µ–≥–∫–æ –¥–µ–ª–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã, –æ—Ç—á—ë—Ç—ã, –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É

- –£–¥–æ–±–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ (10k‚Äì100k+ —Ñ–∞–π–ª–æ–≤)

- –ú–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –Ω–∞ –¥–∏—Å–∫–µ, –∞ –Ω–µ –≤–µ—Å—å JSON



**–ú–∏–Ω—É—Å—ã:**



- –ù–µ–º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Postgres / SQLite)

- –ù—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å –±–∞–∑–æ–π



**–í—ã–≤–æ–¥:**



- –î–ª—è **—Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–∞ 100 —Ñ–∞–π–ª–æ–≤** ‚Äî JSON –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

- –î–ª—è **–ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤** ‚Äî –ª—É—á—à–µ SQL –±–∞–∑–∞ (Postgres/MySQL) –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö + —Ñ–∞–π–ª —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ.



---



## 5Ô∏è‚É£ –†–µ–∑—é–º–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π



1. –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∞—Ä—Ö–∏–≤—ã –∏ –ø–æ–º–µ—á–∞–µ–º `archive_id`.

2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º MIME / magic ‚Üí –Ω–∞–∑–Ω–∞—á–∞–µ–º `needs_ocr` –∏ `detected_type`.

3. DOC ‚Üí DOCX —á–µ—Ä–µ–∑ LibreOffice, JPEG/PNG ‚Üí –ø–æ–¥–∞–µ–º –Ω–∞–ø—Ä—è–º—É—é –≤ Docling OCR.

4. Manifest —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏ –∏ –∞—Ä—Ö–∏–≤–∞–º–∏.

5. PDF scan ‚Üí Docling OCR, PDF —Ç–µ–∫—Å—Ç ‚Üí TextExtraction.

6. JSON –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–ª—è 100 —Ñ–∞–π–ª–æ–≤ —Ç–µ—Å—Ç–∞ ‚Üí –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. SQL –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ ‚Üí –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–æ—Ç–æ–∫–æ–≤.

7. Docling pipeline –ø–æ–ª—É—á–∞–µ—Ç **–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã + manifest**, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤–µ—Ç–∫–∞–º OCR/Text/Layout/Table.



---



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å **–Ω–∞–≥–ª—è–¥–Ω—É—é —Å—Ö–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω–∞ –¥–ª—è –∞—Ä—Ö–∏–≤–æ–≤ / —Ñ–µ–π–∫–æ–≤—ã—Ö DOC**, –≥–¥–µ –ø–æ–∫–∞–∑–∞–Ω–æ, –∫–∞–∫ —Ñ–∞–π–ª—ã –∏–∑ –∞—Ä—Ö–∏–≤–∞ –∏–¥—É—Ç –ø–æ —Ä–∞–∑–Ω—ã–º –≤–µ—Ç–∫–∞–º, –∫–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è manifest –∏ –∫–∞–∫ Docling –∏—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.



–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è –µ—ë —Å–¥–µ–ª–∞–ª?



---



c) JPEG / –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ú–æ–∂–Ω–æ –ø–æ–¥–∞–≤–∞—Ç—å –Ω–∞ Docling –∫–∞–∫ –µ—Å—Ç—å: Docling OCR –ø–æ–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (.jpeg,.png) –Ω–∞–ø—Ä—è–º—É—é. –í manifest —Ñ–∏–∫—Å–∏—Ä—É–µ–º source\_archive –∏ original\_filename. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è JPEG ‚Üí PDF –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞. Docling –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è OCR. –ú–∏–Ω—É—Å—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ PDF: –î–æ–ø. —à–∞–≥, –ª–∏—à–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ I/O –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è –í—ã–≤–æ–¥: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ–¥–∞–≤–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å, –≥–ª–∞–≤–Ω–æ–µ ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π manifest –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–≤—è–∑–µ–π —Å –∞—Ä—Ö–∏–≤–æ–º. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —è –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –¥–ª—è —ç—Ç–∞–ø–∞ –æ–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –∏ –≤—ã—à–µ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ–≤–∞–∂–Ω–æ, –µ—Å–ª–∏ —ç—Ç–æ –¥–ª—è –¥–æ–∫–ª–∏–Ω–≥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –µ—Å–ª–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ PDF-–¥–æ–∫—É–º–µ–Ω—Ç —Å–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞. –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Ä–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –ø—Ä–∏–¥–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Å–ª–µ–¥—É—é—â—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –≤–Ω—É—Ç—Ä–∏ –≤—Å–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞, —á—Ç–æ —ç—Ç–æ—Ç PDF –Ω–µ –∏–º–µ–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è –∏–ª–∏ —á—Ç–æ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ø–æ–¥–∞–Ω–Ω–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–º –≤ –≤–∏–¥–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è JPEG.



---



–î–∞, –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. ‚úÖ



–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Docling pipeline **–¥–ª—è OCR / Layout / Table Extraction –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ–π —Ä–∞–∑–Ω–∏—Ü—ã**, –ø–æ—Å—Ç—É–ø–∞–µ—Ç –ª–∏ –Ω–∞ –≤—Ö–æ–¥:



1. **PDF —Å–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏** (–Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è)

2. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ JPEG / PNG**



–û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ **–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤–Ω—É—Ç—Ä—å Docling –≤ —Ä–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ**, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:



- Docling OCR (–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤)

- Layout Analysis (–±–ª–æ–∫–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏, –ø–æ—Ä—è–¥–æ–∫ —á—Ç–µ–Ω–∏—è)

- Table Extraction (rows/cols)



–¢–æ –µ—Å—Ç—å, —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:



- PDF scan ‚Üí —Ä–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí OCR ‚Üí Layout/Table

- JPEG ‚Üí —Ä–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí OCR ‚Üí Layout/Table



–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –Ω–∞ —ç—Ç–∞–ø–µ **–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ manifest**:



- PDF –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ª–æ–π ‚Üí `needs_ocr = true/false`

- JPEG —Å—Ä–∞–∑—É `needs_ocr = true`



–ü–æ—Å–ª–µ —ç—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ **–≤–µ—Ç–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã**.



–¢–æ –µ—Å—Ç—å –≤ pipeline Docling –≤—Å–µ ¬´—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ¬ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (PDF –∏–ª–∏ JPEG), –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∏—Ö —Ñ–æ—Ä–º–∞—Ç –∏ –Ω–∞–ª–∏—á–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è.



–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å —Å—Ö–µ–º—É —ç—Ç–æ–π –≤–µ—Ç–∫–∏, —á—Ç–æ–±—ã –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ PDF scan –∏ JPEG.

---

**Cursor**

–ò–∑—É—á–∞—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–∞–π–ø–ª–∞–π–Ω–∞.


–ò–∑—É—á–∞—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–∞–π–ø–ª–∞–π–Ω–∞:


–ò–∑—É—á–∞—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è:


–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –ø–∞–π–ø–ª–∞–π–Ω –∏ –≥–æ—Ç–æ–≤–ª—é –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é.


–§–æ—Ä–º–∏—Ä—É—é –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏:


```markdown
# –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–∞–π–ø–ª–∞–π–Ω–∞ Preprocessor + Docling

## üìã –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –ø–∞–π–ø–ª–∞–π–Ω–∞

### 1. Preprocessor (Router) Pipeline

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏:**

```
–í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª ‚Üí detect_file_type() ‚Üí –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
  ‚Üì
–ï—Å–ª–∏ –∞—Ä—Ö–∏–≤ ‚Üí safe_extract_archive() ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
  ‚Üì
–ï—Å–ª–∏ DOC ‚Üí LibreOffice ‚Üí –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ DOCX
  ‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ Unit ‚Üí create_manifest() ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ MongoDB/JSON
  ‚Üì
trigger_docling() ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Docling API
```

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `detect_file_type()` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —á–µ—Ä–µ–∑ magic bytes –∏ mimetype
- `safe_extract_archive()` - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç zip bomb
- `create_manifest()` - —Å–æ–∑–¥–∞–µ—Ç manifest.json –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- `process_file()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞

### 2. Docling Pipeline

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏:**

```
–ü–æ–ª—É—á–µ–Ω–∏–µ Unit ‚Üí –ß—Ç–µ–Ω–∏–µ manifest ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ route
  ‚Üì
Route: pdf_scan ‚Üí _process_pdf_ocr() ‚Üí Docling OCR
Route: pdf_text ‚Üí _process_pdf_text() ‚Üí Text Extraction
Route: docx ‚Üí _process_docx() ‚Üí Text Extraction
Route: image ‚Üí (–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û) ‚Üí –î–æ–ª–∂–µ–Ω –±—ã—Ç—å OCR
Route: mixed ‚Üí (–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û) ‚Üí –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  ‚Üì
Layout Analysis ‚Üí _extract_layout() ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
  ‚Üì
Table Extraction ‚Üí (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ Docling) ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
  ‚Üì
_save_results() ‚Üí –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON/Markdown
```

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### A. Preprocessor (router/main.py)

#### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:

1. **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** (`detect_file_type()`):
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç magic bytes + mimetype –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–µ–π–∫–æ–≤—ã–µ DOC (–∞—Ä—Ö–∏–≤—ã, HTML)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç PDF text layer —á–µ—Ä–µ–∑ pypdf

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞** (`safe_extract_archive()`):
   - –ó–∞—â–∏—Ç–∞ –æ—Ç zip bomb (MAX_UNPACK_SIZE_MB, MAX_FILES_IN_ARCHIVE)
   - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ZIP, RAR, 7z

3. **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   - –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ MongoDB
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

#### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∏ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞:

1. **PDF text layer detection (—Å—Ç—Ä–æ–∫–∏ 616-623)**:
   ```python
   for page in reader.pages[:3]:  # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   ```
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö PDF, –≥–¥–µ —Ç–µ–∫—Å—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 4-–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   
   **–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (JPEG/PNG)**:
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è (`detected_type = "image"`), –Ω–æ –Ω–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ route –¥–ª—è –Ω–∏—Ö
   - –í manifest –æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç `needs_ocr=true`, –Ω–æ Docling –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –Ω–∞–ø—Ä—è–º—É—é
   
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Docling OCR, –Ω–æ —Å–µ–π—á–∞—Å –Ω–µ—Ç route `image_ocr`

3. **Mixed route –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
   - –í `create_manifest()` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `route = "mixed"` –¥–ª—è –∞—Ä—Ö–∏–≤–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —Ñ–∞–π–ª–æ–≤
   - –ù–æ –≤ Docling –Ω–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ mixed route
   
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, DOCX + JPEG)

4. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è DOC ‚Üí DOCX**:
   - LibreOffice —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
   - –í `process_file()` –µ—Å—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 1204-1232), –Ω–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ
   
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ DOCX –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –∫ –º–æ–º–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Docling

5. **Manifest —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**:
   - Manifest —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ MongoDB, –Ω–æ –µ—Å—Ç—å fallback –Ω–∞ JSON
   - –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É MongoDB –∏ JSON —Ñ–∞–π–ª–∞–º–∏
   
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### B. Docling Pipeline (docling/processor.py)

#### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docling OCR**:
   - –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `docling-core` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docling OCR (—Å—Ç—Ä–æ–∫–∞ 335-360)
   - Fallback –Ω–∞ pytesseract –µ—Å–ª–∏ Docling –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**:
   - –ö—ç—à –ø–æ SHA256 —Ö–µ—à—É —Ñ–∞–π–ª–∞
   - TTL –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏
   - –≠–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤**:
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ñ–∞–π–ª–æ–≤ > 50MB
   - –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

4. **–ú–µ—Ç—Ä–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏**:
   - –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º, —Ç–∞–±–ª–∏—Ü–∞–º
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ MongoDB

#### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∏ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Docling Converter** (—Å—Ç—Ä–æ–∫–∏ 199-213):
   ```python
   if DOCLING_AVAILABLE:
       try:
           self.converter = DocumentConverter(
               format_options={
                   InputFormat.PDF: PdfPipelineOptions(
                       do_ocr=file_info.get("needs_ocr", False),
                       do_table_structure=True
                   )
               }
           )
   ```
   **–ü—Ä–æ–±–ª–µ–º–∞:** Converter —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–æ `do_ocr` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ `file_info`. –ï—Å–ª–∏ —Ñ–∞–π–ª —Ç—Ä–µ–±—É–µ—Ç OCR, –Ω–æ converter —Å–æ–∑–¥–∞–Ω —Å `do_ocr=False`, OCR –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω.
   
   **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–≤–∞—Ç—å converter –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

2. **Layout Analysis –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ** (—Å—Ç—Ä–æ–∫–∏ 260-262):
   ```python
   if not result.get("layout"):
       result["layout"] = self._extract_layout(result)
   ```
   **–ü—Ä–æ–±–ª–µ–º–∞:** Layout Analysis –≤ Docling –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–π pipeline, –∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ fallback –º–µ—Ç–æ–¥—ã
   
   **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Layout Analysis –∏–∑ Docling

3. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞–ø—Ä—è–º—É—é**:
   - –í `process()` –Ω–µ—Ç route –¥–ª—è `image_ocr`
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG/PNG) –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
   
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –∞—Ä—Ö–∏–≤–æ–≤ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

4. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ mixed route**:
   - –í `docling/main.py` –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞ –¥–ª—è mixed route (—Å—Ç—Ä–æ–∫–∏ 205-219), –Ω–æ –æ–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç route –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
   - –ù–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   
   **–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è –∞—Ä—Ö–∏–≤–æ–≤ —Å DOCX + JPEG —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è

5. **Table Extraction –Ω–µ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
   - –í Docling Table Extraction –≤—Å—Ç—Ä–æ–µ–Ω, –Ω–æ –≤ fallback –º–µ—Ç–æ–¥–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ pdfplumber
   - –î–ª—è DOCX –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è python-docx, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã, –Ω–æ –Ω–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Docling
   
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ç–∞–±–ª–∏—Ü –º–µ–∂–¥—É Docling –∏ fallback

6. **–ù–µ—Ç retry –º–µ—Ö–∞–Ω–∏–∑–º–∞**:
   - –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ failed, –Ω–æ –Ω–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
   
   **–ü—Ä–æ–±–ª–µ–º–∞:** –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ç–µ–≤—ã–µ) –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø–æ–ª–Ω–æ–º—É –ø—Ä–æ–≤–∞–ª—É

---

## üöÄ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –£–ª—É—á—à–µ–Ω–∏–µ 1: –£–ª—É—á—à–µ–Ω–∏–µ PDF text layer detection

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã—Ö 3 —Å—Ç—Ä–∞–Ω–∏—Ü –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π

**–†–µ—à–µ–Ω–∏–µ:**

```python
def detect_pdf_text_layer(file_path: Path, max_pages_to_check: int = 10) -> bool:
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–ª–æ—è –≤ PDF.
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ max_pages_to_check —Å—Ç—Ä–∞–Ω–∏—Ü –∏–ª–∏ 10% –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞.
    """
    try:
        reader = PdfReader(str(file_path))
        total_pages = len(reader.pages)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º—É–º 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –º–∞–∫—Å–∏–º—É–º max_pages_to_check
        # –∏–ª–∏ 10% –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
        pages_to_check = min(
            max(3, int(total_pages * 0.1)),
            max_pages_to_check,
            total_pages
        )
        
        text_length = 0
        pages_with_text = 0
        
        for i, page in enumerate(reader.pages[:pages_to_check]):
            text = page.extract_text()
            if text:
                text_length += len(text.strip())
                if len(text.strip()) > 10:
                    pages_with_text += 1
        
        # –ï—Å–ª–∏ –Ω–∞ 30%+ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –µ—Å—Ç—å —Ç–µ–∫—Å—Ç - —Å—á–∏—Ç–∞–µ–º —á—Ç–æ –µ—Å—Ç—å text layer
        has_text_layer = (pages_with_text / pages_to_check) >= 0.3
        
        return has_text_layer, {
            "total_pages": total_pages,
            "pages_checked": pages_to_check,
            "pages_with_text": pages_with_text,
            "total_text_length": text_length,
            "has_text_layer": has_text_layer
        }
    except Exception as e:
        # –ü—Ä–∏ –æ—à–∏–±–∫–µ —Å—á–∏—Ç–∞–µ–º —á—Ç–æ –Ω—É–∂–µ–Ω OCR
        return False, {"error": str(e), "assumed_scan": True}
```

### –£–ª—É—á—à–µ–Ω–∏–µ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG/PNG) –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ Docling

**–†–µ—à–µ–Ω–∏–µ:**

–í `docling/processor.py` –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:

```python
def _process_image_ocr(self) -> Dict[str, Any]:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ OCR."""
    start_time = time.time()
    
    if DOCLING_AVAILABLE and self.converter:
        # Docling –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é
        try:
            result = self.converter.convert(str(self.file_path))
            doc_json = result.document.export_to_dict()
            
            text_content = []
            tables = []
            
            for item in doc_json.get("content", []):
                if item.get("type") == "text":
                    text_content.append(item.get("text", ""))
                elif item.get("type") == "table":
                    tables.append(item)
            
            self.metrics["processing_times"]["ocr"] = time.time() - start_time
            self.metrics["file_stats"]["tables_extracted"] = len(tables)
            
            return {
                "text": "\n".join(text_content),
                "tables": tables,
                "metadata": doc_json.get("metadata", {}),
                "layout": doc_json.get("layout", {}),
                "method": "docling_image_ocr"
            }
        except Exception as e:
            logger.warning(f"Docling image OCR failed: {e}, using fallback")
            return self._process_image_ocr_fallback()
    else:
        return self._process_image_ocr_fallback()

def _process_image_ocr_fallback(self) -> Dict[str, Any]:
    """Fallback OCR –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ pytesseract."""
    start_time = time.time()
    
    try:
        image = Image.open(str(self.file_path))
        text = pytesseract.image_to_string(image, lang='rus+eng')
        
        self.metrics["processing_times"]["ocr"] = time.time() - start_time
        
        return {
            "text": text,
            "tables": [],
            "metadata": {"image_format": image.format},
            "method": "pytesseract_image_fallback"
        }
    except Exception as e:
        logger.error(f"Image OCR fallback failed: {e}")
        raise
```

–ò –≤ `process()` –¥–æ–±–∞–≤–∏—Ç—å:

```python
elif self.route == "image_ocr":
    result = self._process_image_ocr()
```

### –£–ª—É—á—à–µ–Ω–∏–µ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ mixed route

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**

–í `docling/main.py` –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è:

```python
def merge_mixed_results(processing_results: List[Dict[str, Any]]) -> Dict[str, Any]:
    """
    –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ mixed route.
    –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: DOCX —Ç–µ–∫—Å—Ç > OCR —Ç–µ–∫—Å—Ç > –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    """
    merged = {
        "text": [],
        "tables": [],
        "metadata": {},
        "layout": {"pages": [], "sections": []},
        "files_processed": []
    }
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: —Å–Ω–∞—á–∞–ª–∞ DOCX, –ø–æ—Ç–æ–º PDF, –ø–æ—Ç–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    sorted_results = sorted(
        processing_results,
        key=lambda x: (
            0 if x.get("file_type") == "docx" else
            1 if x.get("file_type") == "pdf" else 2
        )
    )
    
    for result in sorted_results:
        if result.get("success"):
            file_type = result.get("file_type", "unknown")
            file_name = result.get("file_name", "unknown")
            
            # –û–±—ä–µ–¥–∏–Ω—è–µ–º —Ç–µ–∫—Å—Ç
            if result.get("text"):
                merged["text"].append(f"\n--- {file_name} ({file_type}) ---\n")
                merged["text"].append(result["text"])
            
            # –û–±—ä–µ–¥–∏–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—ã
            if result.get("tables"):
                merged["tables"].extend(result["tables"])
            
            # –û–±—ä–µ–¥–∏–Ω—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
            if result.get("metadata"):
                merged["metadata"][file_name] = result["metadata"]
            
            merged["files_processed"].append({
                "file_name": file_name,
                "file_type": file_type,
                "status": "success"
            })
    
    merged["text"] = "\n".join(merged["text"])
    
    return merged
```

### –£–ª—É—á—à–µ–Ω–∏–µ 4: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Docling Converter

**–ü—Ä–æ–±–ª–µ–º–∞:** Converter —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**

```python
def _get_docling_converter(self, needs_ocr: bool = False) -> Optional[DocumentConverter]:
    """–°–æ–∑–¥–∞–µ—Ç Docling converter —Å –Ω—É–∂–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏."""
    if not DOCLING_AVAILABLE:
        return None
    
    try:
        return DocumentConverter(
            format_options={
                InputFormat.PDF: PdfPipelineOptions(
                    do_ocr=needs_ocr,
                    do_table_structure=True
                )
            }
        )
    except Exception as e:
        logger.warning(f"Could not create Docling converter: {e}")
        return None

# –í –º–µ—Ç–æ–¥–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
def _process_pdf_ocr(self) -> Dict[str, Any]:
    start_time = time.time()
    
    converter = self._get_docling_converter(needs_ocr=True)
    if converter:
        result = converter.convert(str(self.file_path))
        # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```

### –£–ª—É—á—à–µ–Ω–∏–µ 5: Retry –º–µ—Ö–∞–Ω–∏–∑–º

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**

```python
from tenacity import retry, stop_after_attempt, wait_exponential

@retry(
    stop=stop_after_attempt(3),
    wait=wait_exponential(multiplier=1, min=2, max=10)
)
def process_with_retry(self) -> Dict[str, Any]:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–≤—Ç–æ—Ä–∞–º–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö."""
    return self.process()
```

### –£–ª—É—á—à–µ–Ω–∏–µ 6: –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ DOC ‚Üí DOCX –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ DOCX –∫ –º–æ–º–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Docling

**–†–µ—à–µ–Ω–∏–µ:**

–í `router/main.py` –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–π –≤—ã–∑–æ–≤ LibreOffice:

```python
def convert_doc_to_docx(doc_path: Path, output_dir: Path) -> Optional[Path]:
    """–Ø–≤–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç DOC –≤ DOCX —á–µ—Ä–µ–∑ LibreOffice."""
    try:
        docx_path = output_dir / f"{doc_path.stem}.docx"
        
        # –í—ã–∑—ã–≤–∞–µ–º LibreOffice –Ω–∞–ø—Ä—è–º—É—é
        result = subprocess.run(
            [
                "soffice",
                "--headless",
                "--convert-to", "docx",
                "--outdir", str(output_dir),
                str(doc_path)
            ],
            capture_output=True,
            timeout=60,
            check=True
        )
        
        if docx_path.exists():
            return docx_path
        return None
    except Exception as e:
        logger.error(f"DOC conversion failed: {e}")
        return None
```

---

## üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `docling/main.py` (—Å—Ç—Ä–æ–∫–∏ 223-275), –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
- **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å batch processing —Å –æ—á–µ—Ä–µ–¥—è–º–∏

### 2. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

- **Retry –º–µ—Ö–∞–Ω–∏–∑–º:** –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- **Graceful degradation:** –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Docling –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback –º–µ—Ç–æ–¥—ã
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –î–æ–±–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç–µ –æ—à–∏–±–æ–∫

### 3. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

- **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:** Docker Compose —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `--scale`
- **–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á:** –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–æ–±–∞–≤–∏—Ç—å Redis + RQ/Celery
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** –†–∞–∑–¥–µ–ª–∏—Ç—å Preprocessor –∏ Docling –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –¥–æ—Ä–∞–±–æ—Ç–∫–∏

1. **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (JPEG/PNG) —á–µ—Ä–µ–∑ route `image_ocr`
   - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è mixed route
   - ‚úÖ –£–ª—É—á—à–∏—Ç—å PDF text layer detection (–±–æ–ª—å—à–µ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)
   - ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Docling Converter

2. **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - ‚ö†Ô∏è –£–ª—É—á—à–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é manifest –º–µ–∂–¥—É MongoDB –∏ JSON
   - ‚ö†Ô∏è –Ø–≤–Ω—ã–π –≤—ã–∑–æ–≤ LibreOffice –¥–ª—è DOC –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

3. **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - üìù –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è)
   - üìù –£–ª—É—á—à–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API endpoints

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–∞–π–ø–ª–∞–π–Ω –≤ —Ü–µ–ª–æ–º —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π:

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å route `image_ocr`
2. **Mixed route** - –Ω—É–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
3. **PDF detection** - —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É text layer
4. **Docling Converter** - —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è —ç—Ç–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π –ø–∞–π–ø–ª–∞–π–Ω –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –¥–ª—è –≤—Å–µ—Ö –∑–∞—è–≤–ª–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

```

–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω. –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ:


## –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω

–ü—Ä–æ–≤–µ–¥–µ–Ω –∞–Ω–∞–ª–∏–∑ –ø–∞–π–ø–ª–∞–π–Ω–∞ Preprocessor + Docling. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `PIPELINE_ANALYSIS.md`.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω

**Preprocessor (Router):**
1. –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ magic bytes + mimetype
2. –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏–≤—ã (ZIP/RAR) —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç zip bomb
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç PDF text vs scan (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–≤—ã–µ 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
4. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç DOC ‚Üí DOCX —á–µ—Ä–µ–∑ LibreOffice
5. –°–æ–∑–¥–∞–µ—Ç manifest.json –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ MongoDB
6. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç unit'—ã –≤ Docling API

**Docling Pipeline:**
1. –ü–æ–ª—É—á–∞–µ—Ç unit —Å manifest
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç route (pdf_scan, pdf_text, docx, etc.)
3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ Docling OCR –∏–ª–∏ Text Extraction
4. –ü—Ä–∏–º–µ–Ω—è–µ—Ç Layout Analysis –∏ Table Extraction
5. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤ JSON/Markdown

### –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ:**
1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG/PNG) –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è ‚Äî –Ω–µ—Ç route `image_ocr`
2. Mixed route –Ω–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî –¥–ª—è –∞—Ä—Ö–∏–≤–æ–≤ —Å DOCX+JPEG —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è
3. PDF text layer detection ‚Äî –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
4. Docling Converter —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `do_ocr` –º–æ–≥—É—Ç –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–°—Ä–µ–¥–Ω–∏–µ:**
5. –ù–µ—Ç retry –º–µ—Ö–∞–Ω–∏–∑–º–∞ ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø—Ä–æ–≤–∞–ª—É
6. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è DOC ‚Üí DOCX –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è ‚Äî –Ω–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –º–æ–º–µ–Ω—Ç—É –æ–±—Ä–∞–±–æ—Ç–∫–∏
7. Manifest —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚Äî –≤–æ–∑–º–æ–∂–Ω–∞ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É MongoDB –∏ JSON

### –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–í `PIPELINE_ANALYSIS.md` –¥–æ–±–∞–≤–ª–µ–Ω—ã:
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ PDF text layer (–¥–æ 10 —Å—Ç—Ä–∞–Ω–∏—Ü –∏–ª–∏ 10% –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ route `image_ocr`
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è mixed route
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Docling Converter
- Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –Ø–≤–Ω—ã–π –≤—ã–∑–æ–≤ LibreOffice –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è mixed route
3. –£–ª—É—á—à–∏—Ç—å PDF text layer detection
4. –°–æ–∑–¥–∞–≤–∞—Ç—å Docling Converter –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏

**–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
5. –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º
6. –£–ª—É—á—à–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é manifest
7. –Ø–≤–Ω—ã–π –≤—ã–∑–æ–≤ LibreOffice

–ì–æ—Ç–æ–≤ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π. –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å?

