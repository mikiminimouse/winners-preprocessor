# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Granite —á–µ—Ä–µ–∑ Cloud.ru OpenAI API vs –õ–æ–∫–∞–ª—å–Ω—ã–π Docling+Granite

## ‚ùå –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø Cloud.ru OpenAI API (—Ç–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è)

### 1. –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö - –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** OpenAI-compatible API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ DocTags

| –ß—Ç–æ –Ω—É–∂–Ω–æ | –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Cloud.ru |
|-----------|-------------------------|
| `<text>–ü–†–û–¢–û–ö–û–õ ‚Ññ 1348-1</text>` | `<loc_59><loc_46><loc_195><loc_53>` |
| `<section-header>–ó–∞–∫–∞–∑—á–∏–∫</section-header>` | `1.1.1.1.1.1.1.1.1.1...` |
| `<table>...</table>` | ‚ùå –ù–µ—Ç |
| `<formula>...</formula>` | ‚ùå –ù–µ—Ç |
| `<code>...</code>` | ‚ùå –ù–µ—Ç |

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- ‚ùå –ù–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –∞–±–∑–∞—Ü—ã, —Ç–∞–±–ª–∏—Ü—ã)
- ‚ùå –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- ‚ùå –¢–æ–ª—å–∫–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã bbox –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞

### 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ç–æ–∫–µ–Ω–∞–º

```
–õ–∏–º–∏—Ç: 8192 —Ç–æ–∫–µ–Ω–∞ (input + output)
–†–µ–∞–ª—å–Ω–æ—Å—Ç—å: ~4096 —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è output –∏–∑-–∑–∞ input
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ë–æ–ª—å—à–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±—Ä–µ–∑–∞—é—Ç—Å—è
- ‚ùå –°–ª–æ–∂–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚ùå –¢–∞–±–ª–∏—Ü—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–º–∏

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

**–ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã:**
- ‚ùå `Convert this page to docling.` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- ‚ùå `Convert table to OTSL.` ‚Üí –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç OTSL
- ‚ùå `Convert formula to LaTeX.` ‚Üí –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ñ–æ—Ä–º—É–ª—ã
- ‚ùå `Convert chart to table.` ‚Üí –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:** OpenAI API –Ω–µ –æ–±—É—á–µ–Ω –Ω–∞ Docling-specific –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö

### 4. –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Docling SDK

```python
# –ù–ï –†–ê–ë–û–¢–ê–ï–¢ —Å Cloud.ru:
from docling_core.types.doc import DoclingDocument
doc = DoclingDocument.load_from_doctags(doctags_doc)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** DocTags –æ—Ç Cloud.ru –Ω–µ–ø–æ–ª–Ω—ã–µ, –ø–∞—Ä—Å–∏–Ω–≥ –ª–æ–º–∞–µ—Ç—Å—è

### 5. –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ batch –æ–±—Ä–∞–±–æ—Ç–∫–∏

**Cloud.ru OpenAI API:**
- –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞ —Ä–∞–∑)
- –ù–µ—Ç batch endpoint
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å = –æ—Ç–¥–µ–ª—å–Ω—ã–π HTTP call

**–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 10 —Å—Ç—Ä–∞–Ω–∏—Ü:**
- Cloud.ru: ~60-80 —Å–µ–∫—É–Ω–¥ (6-8 —Å–µ–∫/—Å—Ç—Ä–∞–Ω–∏—Ü–∞)
- –õ–æ–∫–∞–ª—å–Ω—ã–π VLLM batch: ~10-15 —Å–µ–∫—É–Ω–¥ (–≤—Å–µ —Å—Ä–∞–∑—É)

### 6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**Cloud.ru —Ç—Ä–µ–±—É–µ—Ç:**
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ DPI –¥–æ 100
- Resize –¥–æ 1024x1024
- –°–∂–∞—Ç–∏–µ –≤ base64

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚ö†Ô∏è –ü–æ—Ç–µ—Ä—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è –º–µ–ª–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- ‚ö†Ô∏è OCR –æ—à–∏–±–∫–∏ –Ω–∞ –Ω–∏–∑–∫–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏
- ‚ö†Ô∏è –¢–∞–±–ª–∏—Ü—ã —Å –º–µ–ª–∫–∏–º —à—Ä–∏—Ñ—Ç–æ–º –Ω–µ—á–∏—Ç–∞–µ–º—ã

### 7. –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º

**–ß—Ç–æ —Ç–µ—Ä—è–µ–º:**
- ‚ùå Layout analysis (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –±–ª–æ–∫–æ–≤)
- ‚ùå Confidence scores –¥–ª—è OCR
- ‚ùå Bounding boxes –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚ùå –°—Ç—Ä—É–∫—Ç—É—Ä–∞ DOM –¥–æ–∫—É–º–µ–Ω—Ç–∞
- ‚ùå –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 8. –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –ª–∏–º–∏—Ç—ã

```
Cloud.ru API:
- –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
- Timeout: —Å—Ç—Ä–æ–≥–∏–π (120 —Å–µ–∫)
- Rate limiting: –µ—Å—Ç—å
- –°—Ç–æ–∏–º–æ—Å—Ç—å: –ø–ª–∞—Ç–Ω–æ –∑–∞ —Ç–æ–∫–µ–Ω—ã
```

---

## ‚úÖ –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º Docling + Granite

### 1. –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ DocTags —Å —Ç–µ–∫—Å—Ç–æ–º

```sgml
<doc-prov>
  <page w="595" h="842" id="0">
    <text-region bbox="59,46,195,53">
      <text>–ü–†–û–¢–û–ö–û–õ ‚Ññ 1348-1</text>
    </text-region>
    <section-header level="1">
      <text>–ó–∞–∫–∞–∑—á–∏–∫/–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –∑–∞–∫—É–ø–∫–∏</text>
    </section-header>
    <table>
      <thead>
        <row><cell>‚Ññ</cell><cell>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</cell></row>
      </thead>
      <tbody>
        <row><cell>1</cell><cell>–û–û–û ¬´–û–ù–ò–ö–°¬ª</cell></row>
      </tbody>
    </table>
    <formula>E = mc^2</formula>
  </page>
</doc-prov>
```

**–ü–æ–ª—É—á–∞–µ–º:**
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å —Ä–∞–∑–º–µ—Ç–∫–æ–π
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã)
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
- ‚úÖ –§–æ—Ä–º—É–ª—ã –≤ LaTeX
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç

```python
from docling.document_converter import DocumentConverter

converter = DocumentConverter()
result = converter.convert("protocol.pdf")
doc = result.document

# –≠–∫—Å–ø–æ—Ä—Ç –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
markdown = doc.export_to_markdown()      # ‚úÖ –ò–¥–µ–∞–ª—å–Ω—ã–π Markdown
html = doc.export_to_html()              # ‚úÖ HTML —Å CSS
json_data = doc.export_to_dict()         # ‚úÖ JSON API-ready
doctags = doc.export_to_doctags()        # ‚úÖ DocTags XML
```

**–ö–∞—á–µ—Å—Ç–≤–æ Markdown:**

```markdown
# –ü–†–û–¢–û–ö–û–õ ‚Ññ 1348-1

## –ó–∞–∫–∞–∑—á–∏–∫/–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –∑–∞–∫—É–ø–∫–∏

**–ü–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ:** –§–ì–£–ü ¬´–ì–£–°–°¬ª

| ‚Ññ | –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ | –ò–ù–ù |
|---|-------------|-----|
| 1 | –û–û–û ¬´–û–ù–ò–ö–°¬ª | 2315078029 |
```

vs Cloud.ru (–ø–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã):
```
<loc_59><loc_46>1.1.1.1.1.1...
```

### 3. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

```python
# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü:
messages = [{
    "role": "user",
    "content": [
        {"type": "image"},
        {"type": "text", "text": "Convert table to OTSL."}
    ]
}]

# –ü–æ–ª—É—á–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –≤ OTSL —Ñ–æ—Ä–º–∞—Ç–µ:
# <otsl><thead><row>...</row></thead>...</otsl>
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**
- ‚úÖ `Convert this page to docling.` ‚Üí –ø–æ–ª–Ω—ã–π DocTags
- ‚úÖ `Convert table to OTSL.` ‚Üí OTSL —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ `Convert formula to LaTeX.` ‚Üí LaTeX —Ñ–æ—Ä–º—É–ª—ã
- ‚úÖ `Convert chart to table.` ‚Üí –¥–∞–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- ‚úÖ `Convert code to text.` ‚Üí –∫–æ–¥ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- ‚úÖ `OCR the text in <bbox>` ‚Üí OCR –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- ‚úÖ `Find all 'text' elements` ‚Üí –ø–æ–∏—Å–∫ –ø–æ —Ç–∏–ø–∞–º
- ‚úÖ `Detect footer elements` ‚Üí –¥–µ—Ç–µ–∫—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### 4. Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ VLLM

```python
from vllm import LLM, SamplingParams

llm = LLM(model="ibm-granite/granite-docling-258M")

# –û–±—Ä–∞–±–æ—Ç–∫–∞ 100 —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å!
outputs = llm.generate(
    prompts=[...],  # 100 –ø—Ä–æ–º–ø—Ç–æ–≤
    sampling_params=SamplingParams(max_tokens=8192)
)

# –°–∫–æ—Ä–æ—Å—Ç—å: 10-20 —Å—Ç—Ä–∞–Ω–∏—Ü/—Å–µ–∫—É–Ω–¥—É –Ω–∞ H100
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

| –ó–∞–¥–∞—á–∞ | Cloud.ru API | –õ–æ–∫–∞–ª—å–Ω—ã–π VLLM |
|--------|--------------|----------------|
| 1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞ | 6-8 —Å–µ–∫ | 0.5 —Å–µ–∫ |
| 10 —Å—Ç—Ä–∞–Ω–∏—Ü | 60-80 —Å–µ–∫ | 5-10 —Å–µ–∫ |
| 100 —Å—Ç—Ä–∞–Ω–∏—Ü | 10-13 –º–∏–Ω | 50-100 —Å–µ–∫ |
| 1000 —Å—Ç—Ä–∞–Ω–∏—Ü | 2-3 —á–∞—Å–∞ | 8-15 –º–∏–Ω |

### 5. –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Docling SDK

```python
from docling.document_converter import DocumentConverter
from docling.pipeline.vlm_pipeline import VlmPipeline
from docling.datamodel.pipeline_options import VlmPipelineOptions

# –õ–æ–∫–∞–ª—å–Ω—ã–π Granite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω:
converter = DocumentConverter(
    format_options={
        InputFormat.PDF: PdfFormatOption(
            pipeline_cls=VlmPipeline,
            do_ocr=True,
            do_table_structure=True,
            do_formula=True
        )
    }
)

# –û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
result = converter.convert("protocol.pdf")
doc = result.document

# –ü–æ–ª—É—á–∞–µ–º:
print(doc.main_text)           # ‚úÖ –í–µ—Å—å —Ç–µ–∫—Å—Ç
print(doc.tables)              # ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ
print(doc.formulas)            # ‚úÖ –í—Å–µ —Ñ–æ—Ä–º—É–ª—ã –≤ LaTeX
print(doc.code_blocks)         # ‚úÖ –í—Å–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞
print(doc.figures)             # ‚úÖ –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/–≥—Ä–∞—Ñ–∏–∫–∏
print(doc.metadata)            # ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```

### 6. –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–õ–æ–∫–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- DPI: 300-600 (vs 100 –≤ Cloud.ru)
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (no resize)
- Lossless —Ñ–æ—Ä–º–∞—Ç—ã
- Preprocessing (deskew, denoise)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –¢–æ—á–Ω—ã–π OCR –¥–ª—è –º–µ–ª–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å –º–µ–ª–∫–∏–º —à—Ä–∏—Ñ—Ç–æ–º —á–∏—Ç–∞–µ–º—ã
- ‚úÖ –§–æ—Ä–º—É–ª—ã —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Ç–æ—á–Ω–æ

### 7. –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º

```python
# Layout analysis:
layout = result.document.layout
for element in layout.elements:
    print(f"{element.type}: {element.bbox}")
    print(f"Confidence: {element.confidence}")
    print(f"Text: {element.text}")

# OCR confidence –ø–æ —Ç–æ–∫–µ–Ω–∞–º:
for token in result.ocr_tokens:
    if token.confidence < 0.8:
        print(f"‚ö†Ô∏è –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {token.text}")

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
for section in doc.sections:
    print(f"Level {section.level}: {section.title}")
    for para in section.paragraphs:
        print(f"  {para.text}")
```

### 8. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

```python
# –Ø–ø–æ–Ω—Å–∫–∏–π/–ö–∏—Ç–∞–π—Å–∫–∏–π/–ê—Ä–∞–±—Å–∫–∏–π (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ):
converter = DocumentConverter(
    format_options={
        InputFormat.PDF: PdfFormatOption(
            languages=["rus", "eng", "jpn", "chi_sim", "ara"]
        )
    }
)

# Document QA:
result = vlm_pipeline.query(
    image=page_image,
    question="–ö—Ç–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –∑–∞–∫—É–ø–∫–∏?"
)
# ‚Üí "–û–û–û ¬´–û–ù–ò–ö–°¬ª"

# Layout-aware extraction:
footer_elements = doc.find_elements(type="footer")
header_elements = doc.find_elements(type="header")

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–∏–ø—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤:
@dataclass
class ProtocolMetadata(BaseMetadata):
    procedure_number: str
    winner: str
    price: float

doc.extract_metadata(ProtocolMetadata)
```

### 9. –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å

**–õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:**
- ‚úÖ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ù–µ—Ç timeout (–∫—Ä–æ–º–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö)
- ‚úÖ –ù–µ—Ç rate limiting
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ GPU)
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –º–æ–¥–µ–ª—å—é

**–ó–∞—Ç—Ä–∞—Ç—ã:**
```
GPU H100 (–∞—Ä–µ–Ω–¥–∞): $2-3/—á–∞—Å
–û–±—Ä–∞–±–æ—Ç–∫–∞: ~1000 —Å—Ç—Ä–∞–Ω–∏—Ü/—á–∞—Å
–°—Ç–æ–∏–º–æ—Å—Ç—å: $0.002-0.003/—Å—Ç—Ä–∞–Ω–∏—Ü–∞

vs Cloud.ru API: $0.01-0.05/—Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–æ—Ü–µ–Ω–∫–∞)
```

### 10. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**Multi-modal –∞–Ω–∞–ª–∏–∑:**
```python
# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–∞:
diff = doc1.compare(doc2)

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è summary:
summary = doc.generate_summary()

# Extraction patterns:
patterns = doc.extract_patterns(
    pattern_type="procurement_protocol"
)

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
validation = doc.validate_structure(
    schema=protocol_schema
)
```

---

## üìä –ò–¢–û–ì–û–í–û–ï –°–†–ê–í–ù–ï–ù–ò–ï

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | Cloud.ru OpenAI | –õ–æ–∫–∞–ª—å–Ω—ã–π Docling+Granite |
|------------|-----------------|---------------------------|
| **–ü–æ–ª–Ω—ã–µ DocTags** | ‚ùå –¢–æ–ª—å–∫–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã | ‚úÖ –ü–æ–ª–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ |
| **–ö–∞—á–µ—Å—Ç–≤–æ Markdown** | ‚ùå –ù–∏–∑–∫–æ–µ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ |
| **–¢–∞–±–ª–∏—Ü—ã** | ‚ùå –ù–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è | ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ |
| **–§–æ—Ä–º—É–ª—ã** | ‚ùå –ù–µ—Ç | ‚úÖ LaTeX |
| **–ö–æ–¥** | ‚ùå –ù–µ—Ç | ‚úÖ –° –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π |
| **–ì—Ä–∞—Ñ–∏–∫–∏‚Üí–î–∞–Ω–Ω—ã–µ** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã** | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç | ‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç |
| **Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞** | ‚ùå –ù–µ—Ç | ‚úÖ 10-20x –±—ã—Å—Ç—Ä–µ–µ |
| **–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** | ‚ö†Ô∏è 1024x1024, DPI 100 | ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª, DPI 300+ |
| **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** | ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã | ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| **Layout analysis** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **OCR confidence** | ‚ùå –ù–µ—Ç | ‚úÖ –ü–æ —Ç–æ–∫–µ–Ω–∞–º |
| **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** | ‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ | ‚úÖ –ü–æ–ª–Ω—ã–µ |
| **Document QA** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ | ‚úÖ 50+ —è–∑—ã–∫–æ–≤ |
| **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è** | ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–∞ | ‚úÖ Fine-tuning |
| **–°–∫–æ—Ä–æ—Å—Ç—å (100 —Å—Ç—Ä)** | 10-13 –º–∏–Ω | 1-2 –º–∏–Ω |
| **–õ–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤** | 4096 output | 8192+ output |
| **Rate limiting** | ‚ö†Ô∏è –ï—Å—Ç—å | ‚úÖ –ù–µ—Ç |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å (1000 —Å—Ç—Ä)** | $10-50 | $2-3 |
| **–ö–æ–Ω—Ç—Ä–æ–ª—å** | ‚ùå –ù–µ—Ç | ‚úÖ –ü–æ–ª–Ω—ã–π |

---

## üí° –í–´–í–û–î–´

### –ß—Ç–æ —Ç–µ—Ä—è–µ–º —Å Cloud.ru OpenAI API:

1. **90% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ Granite-Docling** - –ø–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
2. **–ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ö–æ—Ä–æ—à–∏–π Markdown
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –≤ 10-20 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
4. **–ì–∏–±–∫–æ—Å—Ç—å** - –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º
5. **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### –ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º:

1. **–ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** Granite-Docling –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
2. **–ò–¥–µ–∞–ª—å–Ω—ã–π Markdown** —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏, —Ñ–æ—Ä–º—É–ª–∞–º–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
3. **Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Ç—ã—Å—è—á —Å—Ç—Ä–∞–Ω–∏—Ü
4. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å** –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

**–î–ª—è production:**
- –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π Docling + Granite –Ω–∞ GPU —Å–µ—Ä–≤–µ—Ä–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VLLM –¥–ª—è batch inference
- –û–∫—É–ø–∏—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ >10,000 —Å—Ç—Ä–∞–Ω–∏—Ü/–º–µ—Å—è—Ü

**–î–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ (—Å–µ–π—á–∞—Å):**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (OCR + pdfplumber + regex)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç GPU
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏

