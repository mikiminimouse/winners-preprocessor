# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è CLI –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. SyncResult.success AttributeError
**–ü—Ä–æ–±–ª–µ–º–∞**: `'SyncResult' object has no attribute 'success'`

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ `success` –≤ –∫–ª–∞—Å—Å `SyncResult` –≤ `services/sync_microservice/simple_sync.py`:

```python
@property
def success(self) -> bool:
    """True –µ—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ —É—Å–ø–µ—à–Ω–∞."""
    return self.status in ["success", "partial"]
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è MongoDB
**–ü—Ä–æ–±–ª–µ–º–∞**: `MONGO_METADATA_PASSWORD` –Ω–µ –∑–∞–¥–∞–Ω

**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env` –≤ `preprocessing/.env` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# MongoDB Configuration
MONGO_METADATA_SERVER=localhost:27017
MONGO_METADATA_USER=admin
MONGO_METADATA_PASSWORD=password
MONGO_METADATA_DB=docling_metadata

# Remote MongoDB (for sync)
MONGO_SERVER=192.168.0.46:8635
MONGO_USER=readProtocols223
MONGO_SSL_CERT=/root/winners_preprocessor/certs/sber2.crt
```

–û–±–Ω–æ–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `activate_venv.sh` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

### 3. –ò–º–ø–æ—Ä—Ç—ã downloader –≤ CLI
**–ü—Ä–æ–±–ª–µ–º–∞**: `"–ú–æ–¥—É–ª–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã"`

**–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ `load_handlers.py`:
```python
from services.downloader_microservice.manager import ProtocolDownloader
from services.downloader_microservice.core import check_zakupki_health
```

### 4. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ CLI
**–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—É—Å–∫–µ

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã fallback –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è –≤—Å–µ—Ö handlers –≤ `main.py`.

## üöÄ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è venv –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
cd /root/winners_preprocessor
source preprocessing/activate_venv.sh
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞–ø—Ä—è–º—É—é:

**Sync Microservice:**
```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
python -m services.sync_microservice.cli sync-daily --limit 10

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
python -m services.sync_microservice.cli sync-date --date 2025-12-17 --limit 5

# –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞ 2 –¥–Ω—è
python -m services.sync_microservice.cli sync-full --days 2 --limit 20
```

**Downloader Microservice:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ zakupki.gov.ru
python -m services.downloader_microservice.cli --health-check

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ MongoDB)
python -m services.downloader_microservice.cli --limit 5
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π CLI –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞:

```bash
# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ CLI
python preprocessing/cli/main.py

# –í—ã–±—Ä–∞—Ç—å:
# 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏–∑ MongoDB (—Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!)
# 2. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ —á–µ—Ä–µ–∑ VPN (—Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!)
```

## üìä –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

‚úÖ **Sync Microservice**: –†–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å `success` –ø–æ–ª–µ–º
‚úÖ **Downloader Microservice**: –†–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã
‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ `.env`
‚úÖ **zakupki.gov.ru –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚ùå **–û—Å–Ω–æ–≤–Ω–æ–π CLI**: –ò–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –Ω–∞–ø—Ä—è–º—É—é)

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**: –ö–æ–≥–¥–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø –∫ MongoDB —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
2. **VPN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–π MongoDB
3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ CLI**: –ü–æ–ª–Ω–∞—è –ø–æ—á–∏–Ω–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ handlers

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –í `.env` —Ñ–∞–π–ª–µ –µ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –æ–±–æ–ª–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–æ –Ω–µ –ª–æ–º–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- –û—Å–Ω–æ–≤–Ω–æ–π CLI –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—É—Å–∫–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ MongoDB –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
