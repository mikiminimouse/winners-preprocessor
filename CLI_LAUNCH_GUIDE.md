# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É CLI –º–µ–Ω—é

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–ø–æ—Å–æ–± 1: –ü–æ—à–∞–≥–æ–≤–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /root/winners_preprocessor/preprocessing

# 2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source activate_venv.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å CLI
python run_cli.py
```

### –°–ø–æ—Å–æ–± 2: –û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
cd /root/winners_preprocessor/preprocessing && \
source activate_venv.sh && \
python run_cli.py
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ Python –º–æ–¥—É–ª—å

```bash
cd /root/winners_preprocessor/preprocessing
python -m cli.main
```

## üìã –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (27 –æ–ø—Ü–∏–π)

### –†–∞–∑–¥–µ–ª 1: –ó–ê–ì–†–£–ó–ö–ê –ò –ü–û–î–ì–û–¢–û–í–ö–ê –î–ê–ù–ù–´–•

- **1** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏–∑ MongoDB
  - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –ë–î –≤ –ª–æ–∫–∞–ª—å–Ω—É—é
  - –û–ø—Ü–∏–∏: –æ–¥–Ω–∞ –¥–∞—Ç–∞, –¥–∏–∞–ø–∞–∑–æ–Ω, +N –¥–Ω–µ–π

- **2** - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∑–∞ –¥–∞—Ç—É
  - –°–∫–∞—á–∏–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å zakupki.gov.ru
  - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

- **3** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤ –≤ INPUT_DIR
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –†–∞–∑–¥–µ–ª 2: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –≠–¢–ê–ü–û–í (4-8)

- **4** - –¢–ï–°–¢ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
- **5** - –¢–ï–°–¢ 2: –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤
- **6** - –¢–ï–°–¢ 3: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è unit'–æ–≤
- **7** - –¢–ï–°–¢ 4: –°–æ–∑–¥–∞–Ω–∏–µ manifest'–æ–≤
- **8** - –¢–ï–°–¢ 5: Docling –æ–±—Ä–∞–±–æ—Ç–∫–∞

### –†–∞–∑–¥–µ–ª 3: –ü–û–®–ê–ì–û–í–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê (9-14)

- **9** - –®–ê–ì 1: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ—Ç–µ–∫—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- **10** - –®–ê–ì 2: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **11** - –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- **12** - –®–ê–ì 4: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ mixed units
- **13** - –®–ê–ì 5: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ pending –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
- **14** - –ü–û–õ–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê: –í—Å–µ —à–∞–≥–∏ (1-5)

### –†–∞–∑–¥–µ–ª 4: –†–ê–°–®–ò–†–ï–ù–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê (15-17)

- **15** - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã pending –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- **16** - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **17** - –û—Ç—á–µ—Ç –ø–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º units

### –†–∞–∑–¥–µ–ª 5: MERGE –ò –§–ò–ù–ê–õ–ò–ó–ê–¶–ò–Ø (18-19)

- **18** - Merge (DRY RUN) - –ø—Ä–æ–±–Ω—ã–π –∑–∞–ø—É—Å–∫
- **19** - Merge (–†–ï–ê–õ–¨–ù–´–ô) - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### –†–∞–∑–¥–µ–ª 6: –ü–û–õ–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï PIPELINE (20-21)

- **20** - –ü–û–õ–ù–´–ô –¢–ï–°–¢: –í–µ—Å—å pipeline (—à–∞–≥–∏ 1-5)
- **21** - –ò–ù–¢–ï–ì–†–ê–¶–ò–û–ù–ù–´–ô –¢–ï–°–¢: Router API

### –†–∞–∑–¥–µ–ª 7: –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –°–¢–ê–¢–ò–°–¢–ò–ö–ê (22-24)

- **22** - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –º–µ—Ç—Ä–∏–∫ —Å–µ—Å—Å–∏–∏
- **23** - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **24** - –°—Ç–∞—Ç—É—Å MongoDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### –†–∞–∑–¥–µ–ª 8: –°–õ–£–ñ–ï–ë–ù–´–ï –§–£–ù–ö–¶–ò–ò (25-27)

- **25** - –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **26** - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- **27** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –í—ã—Ö–æ–¥

- **0** - –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```
1. –í—ã–±–µ—Ä–∏—Ç–µ: 1
2. –¢–∏–ø —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: 1 (–æ–¥–Ω–∞ –¥–∞—Ç–∞)
3. –î–∞—Ç–∞: 1 (–≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å)
4. –õ–∏–º–∏—Ç: 200 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–æ—Ç–æ–∫–æ–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î

### –ü—Ä–∏–º–µ—Ä 2: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞

```
1. –í—ã–±–µ—Ä–∏—Ç–µ: 2
2. –í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É: 2025-12-18
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: –î–æ–∫—É–º–µ–Ω—Ç—ã —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª–Ω—ã–π pipeline

```
1. –í—ã–±–µ—Ä–∏—Ç–µ: 20
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤

### –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ MongoDB

```
1. –í—ã–±–µ—Ä–∏—Ç–µ: 24
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –æ–±–µ–∏–º –ë–î

## üìä –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

- `INPUT_DIR` - –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
- `EXTRACTED_DIR` - —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä—Ö–∏–≤—ã
- `NORMALIZED_DIR` - –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `OUTPUT_DIR` - –≥–æ—Ç–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- `TEMP_DIR` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

## ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ —É—Å–ª–æ–≤–∏—è

### –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
- Python 3.8+
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Å–º. requirements.txt)
- MongoDB (–ª–æ–∫–∞–ª—å–Ω–∞—è –∏ —É–¥–∞–ª–µ–Ω–Ω–∞—è)

### –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- `.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `preprocessing/.env` - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è preprocessing

### –°–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø:
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç (–¥–ª—è zakupki.gov.ru)
- VPN (–¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–π MongoDB)

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: ModuleNotFoundError

```
–†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ venv –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
$ source activate_venv.sh
```

### –û—à–∏–±–∫–∞: MONGO_METADATA_PASSWORD –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

```
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
$ cat preprocessing/.env | grep MONGO
```

### –û—à–∏–±–∫–∞: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ zakupki.gov.ru

```
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ VPN
$ curl -I https://zakupki.gov.ru
```

### –û—à–∏–±–∫–∞: MongoDB –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

```
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MongoDB –∏ credentials
$ python -c "from router.mongo import get_mongo_client; print(get_mongo_client())"
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞

```bash
python -m uvicorn router.api:app --host 0.0.0.0 --port 8080
```

### –ó–∞–ø—É—Å–∫ scheduler

```bash
python scheduler/main.py
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Python –∫–æ–¥–µ

```python
from router.api import app, process_file, download_document
from router.config import INPUT_DIR, OUTPUT_DIR
from router.mongo import get_mongo_client
from sync_db import SyncService
from downloader import ProtocolDownloader

# –í–∞—à –∫–æ–¥...
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `REFACTORING_COMPLETE_PHASE2.md` - –ø–µ—Ä–≤—ã–π —ç—Ç–∞–ø —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- `REFACTORING_API_FINAL.md` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø
- `QUICK_START_REFACTORED.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `TESTING_CLI.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `MICROSERVICES_README.md` - –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

---

**CLI –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** ‚ú®
